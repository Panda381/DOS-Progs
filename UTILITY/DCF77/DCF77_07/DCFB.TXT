

            DCFB v 1.0 - verze s Bin rn¡ komunikac¡ (6-bitov˜ p©enos)
                           nastaven¡ p©esn‚ho ‡asu

 Nen¡-li nutn  v˜zva k vysl n¡ ‡asu, nen¡ pot©eba vys¡lac¡ sign l zapojovat.
 Program pracuje bez ohledu na vys¡l n¡ v˜zvy

 Jako parametr p©i spu¨tˆn¡ programu se zad v  ‡¡slo 1 a‘ 4 = ‡¡slo portu COM.

 Komunika‡n¡ port COM mus¡ b˜t nastaven na po‘adovan‚ p©enosov‚ parametry.

 Na portu COM posta‡¡ p©ipojit pouze p©ij¡mac¡ sign l (a p©¡p. vys¡lac¡),
 na ostatn¡ch sign lech nez le‘¡.

 P©i p©enosu se pou‘¡v  pouze nejni‘¨¡ch 6 bit– dat, ostatn¡ bity se ignoruj¡.
 Lze proto pou‘¡t nap©. 6-bitov˜ p©enos nebo data transponovat (nap©. OR 40h)

 Program navrac¡ n vratov˜ k¢d 1 p©i chybˆ, 0 p©i operaci OK
 -----------------------------------------------------------------------------

                            Komunika‡n¡ protokol
ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
³                 program:               ³     jednotka zdroje ‡asu:          ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³ vys¡l  na COM bajty v˜zvy 60 (="<")    ³ dokon‡uje p©ede¨l‚ vys¡l n¡,       ³
³ ‡ek  na oddˆlovac¡ znak (bajt > 59)    ³ p©¡padn‚ po‘adavky v˜zvy ignoruje  ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³ do‡kal se oddˆlovac¡ho znaku           ³ vy¨le oddˆlovac¡ znak (nap©. 60)   ³
³                                        ³ jako za‡ tek dal¨¡ zpr vy          ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³ vys¡l  na COM znaky v˜zvy 60 (="<"),   ³ znaky v˜zvy bˆhem vys¡l n¡         ³
³ ‡ek  na prvn¡ datov˜ bajt (0 a‘ 59)    ³ ignoruje                           ³
ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
³ p©ij¡m  zpr vu - 6 bajt–               ³ vys¡l  zpr vu - 6 bajt–            ³
³ v po©ad¡ RMDhms                        ³ v po©ad¡ RMDhms                    ³
³   (R=offset od roku 1980, tj. rok 1980 a‘ 2039, nap©. 1996 = bajt 16)       ³
³  (M=mˆs¡c 1-12, D=den 1-31, h=hodina 0-23, m=minuta 0-59, s=sekunda 0-59)   ³
ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
  P©i neplatn‚ zpr vˆ se pokou¨¡ o nov˜ p©enos a‘ do doby TIME-OUT (2 sekundy)

 Program vys¡l  znaky v˜zvy bˆhem p©enosu neust le (pro p©¡pad ztr ty spojen¡
 uprost©ed zpr vy). To m–‘e vyu‘¡t jednotka zdroje ‡asu k aktivaci vys¡l n¡
 jednotliv˜ch znak– p©i p©enosu. Tento zp–sob bude nutno pou‘¡t u rezidentn¡
 verze programu - program bude moct p©ij¡mat nejrychleji 18 bajt– za sekundu,
 znaky v˜zvy by proto mohly b˜t pou‘ity jako potvrzen¡ p©ipravenosti k p©¡jmu
 dal¨¡ho znaku.
 -----------------------------------------------------------------------------

              Zapojen¡ nulov‚ho modemu (pro tuto aplikaci nen¡
               pot©eba zapojovat sign ly RTS->CTS a DTR->DSR)

   Canon         Canon                    Canon
   9 pin        25 pin                   25 pin
  ÉÍÍÍÍ»        ÉÍÍÍÍ»                   ÉÍÍÍÍ»
  º  5 ÇÄÄÄÄÄ   º  7 ÇÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¶  7 º  GND   zem 0 V
  º  2 ÇÄÄÄÄÄ   º  3 ÇÄÄÄÄÄÄÄÄ\ /ÄÄÄÄÄÄÄÄ¶  3 º  RxD   p©ij¡man  data
  º  3 ÇÄÄÄÄÄ   º  2 ÇÄÄÄÄÄÄÄÄ/ \ÄÄÄÄÄÄÄÄ¶  2 º  TxD   vys¡lan  data
  º  7 ÇÄÄ¿     º  4 ÇÄÄ¿             ÚÄÄ¶  4 º  RTS   ‘ dost vys¡la‡e
  º  8 Ç<ÄÙ     º  5 Ç<ÄÙ             ÀÄ>¶  5 º  CTS   vys¡l n¡ povoleno
  º  6 Ç<Ä¿     º  6 Ç<Ä¿             ÚÄ>¶  6 º  DSR   p©enos povolen
  º  4 ÇÄÄÙ     º 20 ÇÄÄÙ             ÀÄÄ¶ 20 º  DTR   kan l p©ipraven
  º  9 º        º 22 º                   º 22 º  RI    v˜zva
  º  1 º        º  8 º                   º  8 º  DCD   £rove¤ sign lu
  ÈÍÍÍÍ¼        ÈÍÍÍÍ¼                   ÈÍÍÍÍ¼

K testu programu nebo k p©enosu data mezi po‡¡ta‡i lze pou‘¡t program
DCFB_OUT.COM. Jako parametr lze zadat ‡¡slo portu COM (tj. 1 a‘ 4). Po
sv‚m spu¨tˆn¡ program neust le vys¡l  datum a ‡as na zvolen˜ port COM,
sou‡asnˆ vypisuje znaky p©ich zej¡c¡ na port (pozor, znaky jsou upraveny
"AND 3Fh" a "OR 40h"). Program lze p©eru¨it stiskem libovoln‚ kl vesy.
