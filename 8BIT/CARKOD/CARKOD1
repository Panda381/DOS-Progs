\j\p\n







           \D\W\H\B\S Sn¡ma‡ ‡ rov‚ho k¢du \s\b\h\w\d
          





     \BObsah:\b

                                                       Str.

1.  —vod .............................................. 2

2.  Popis zapojen¡ adaptoru ........................... 2

3.  Konstruk‡n¡ ©e¨en¡ adaptoru ....................... 4





P©¡lohy:



1.  Sch‚ma adaptoru

2.  Plo¨n˜ spoj - strana 1

3.  Plo¨n˜ spoj - strana 2

4.  Rozm¡stˆn¡ sou‡ stek na plo¨n‚m spoji














Š
	\B1.- —vod\b
\J\P
   Adaptoò  prï sn¡m n›¡ ‡ rov‚hï k¢dõ CK-00± roz¨i©ujå mo‘nosté vstup›– 
d¡lensk‚hï  termin lõ BDÔ K890± ï vstuğ ‡ rov‚hï  k¢du®  Jakï  vstupn›¡ 
za©¡zen›¡  så pou‘¡v›  ru‡n›¡ sn¡mac›¡ sondá pracuj¡c›¡ ná principõ  odrazõ 
infra‡erven‚hï  paprskõ oä sn¡man‚hï k¢du®  Datá zå sn¡mac›¡ sondù jsoõ 
p©ek¢dov ná  adaptoreí um¡stˆn˜í ö termin lõ jakï dopl¤uj¡c›¡  deská  á 
p©é  bezchybn‚í p©ek¢dov n›¡ jsoõ vysl ná ná termin l®  Ú d–vodõ  neza
sahov n›¡ dï hardwarå ‡é softwarå termin lõ jå pou‘itá jakï komunika‡n›¡ 
br ná  porô  prï  vstuğ ú kl vesnice®  V˜stuğ ú adaptorõ  jå  p©ipojeî 
paraleln›ˆ  kå  kl vesnicé termin lõ á datá ú  adaptorõ  jsoõ  vys¡l ná 
stejn˜í zp–sobem¬ jakobù bylá zad v ná ú kl vesnice® Tï p©in ¨›¡ v˜hodõ 
ö tom¬ ‘å nen›¡ pot©ebá prov dˆô ‘ dn›‚ z sahù dï termin lõ - adaptoò så 
jednodu¨å  p©ipoj›¡ dï termin lõ mezé konektorù prï kl vesnici®  Funkcå 
kl vesnicå z–st v›  é nad lå zachov ná bezå zmˆny®  Vstupù ú kl vesnicå 
nebï zå sn¡ma‡å lzå kombinovaô - nap©® p©é poru¨å sn¡ma‡å lzå pokra‡o
vaô vå vkl d n›¡ daô pomoc›¡ kl vesnice®  Nev˜hodoõ tohotï ©e¨en›¡ je¬ ‘å 
nen›¡ mo‘n›  zpˆtn›  vazbá ú termin lõ ë adaptoru¬ tak‘å jå nutn›  kontro
lá  termin lõ obsluhoõ (zdá jå p©ipraveî p©ij¡maô ‡ten›  datá á  pod.)® 
Jist˜í omezen¡í jå tak›‚ to¬  ‘å souboò vstupn¡cè znak›– jå omezeî pouzå 
ná znaky¬  kter›‚ jå mo‘nï zad vaô ú kl vesnicå - tedù jå mo‘nï zad vaô 
ö podstat›ˆ jeî ‡¡slicå pop©® ©¡d¡c›¡ kl vesy.



\p\j
	\B2.- Popis zapojen¡ adaptoru\b


vstup ze
sondy-data
ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿     ÉÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»     v˜stup na sondu
vstup ze        ³     º                º  - nap jen¡ a indikace
sondy-aktivace  ÀÄÄÄÄÄ¶    Paraleln¡   ÇÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¶                º
                      ºvstupnˆ/v˜stupn¡ºsloupec znaku ÉÍÍÍÍÍÍÍ» v˜stup 
          vstup ÄÄÄÄÄÄ¶                ÌÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹       º  znaku
        p©edvolby     º      port      º              º dek¢d.º    
          k¢dõ  ÄÄÄÄÄÄ›¶                º ›© deë znakõ  ›º obvoä ÌÍÍÍÍÍÍÍ
                      º                ÌÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹       º
                      º                º        ÉÍÍÍÍÍ¹       º
vstup © dku znaku     ÈÍÍÍÍÍÍÍÍÍËÍÍÍÍÍÍ¼        º     ÈÍÍÍÍÍÍÍ¼
ÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼
               vnit©n¡ sbˆrnice º
      ÉÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÎÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
ÉÍÍÍÍÍÊÍÍÍÍÍ»             ÉÍÍÍÍÍÊÍÍÍÍÍ»             ÉÍÍÍÍÍÊÍÍÍÍÍ»
º procesor  º             º   pamˆŸ   º             º   pamˆŸ   º
º           º             º           º             º           º
º    CPU    º             º    ROM    º             º    RAM    º
º           º             º           º             º           º
ÈÍÍÍÍÍÍÍÍÍÍÍ¼             ÈÍÍÍÍÍÍÍÍÍÍÍ¼             ÈÍÍÍÍÍÍÍÍÍÍÍ¼

	Obr.1.: Blokov‚ zapojen¡ adaptoru
Š\P\J
     Blokov›‚ zapojen›¡ adaptorõ jå ná obr® 1® ¡d¡c›¡ jednotkoõ adaptorõ 
jå  mikroprocesoò  U880Ä (ekvivalenô  Z80-CPU)®  Ovl dac›¡  prograí  jå 
ulo‘eî  ö  pamˆté EPROM¬  jakï pracovn›¡ pamˆ›Ÿ prï vstupn›¡  á  v˜stupn›¡ 
bufferù  slou‘›¡ pamˆ›Ÿ RAM®  Komunikacå procesorõ ó okol¡í prob¡h›  p©eó 
paraleln›¡ vstupnˆ/v˜stupn›¡ port®  Ná tentï porô jsoõ p©ipojenù sign lù 
zå sn¡mac›¡ sondù - sn¡man›  datá á sign ì tla‡¡tká prï aktivacé  sondy® 
Jakï dal¨›¡ vstupn›¡ sign lù vstupujå dï portõ informacå ú p©ep¡na‡›– DIÌ 
slou‘¡c›¡  ë p©ednastaven›¡ pou‘it‚hï sn¡man‚hï k¢du®  Jå mo‘nï  navoliô 
jedeî zå ‡ty›© k¢d–¬ z rove›¤ jå mo‘n›  é p©edvolbá zp–sobõ v˜stupõ daô ú 
adaptoru¬  pokuä  jå  adaptoò p©izp–sobeî ë v¡cå v˜stupn¡í  za©¡zen¡m® 
Jakï  standardn›¡ v˜stuğ jå pou‘iô v˜stuğ ná kl vesnicov›˜ vstuğ  termi
n lu®  Ná v˜stupõ paraleln¡hï portõ jå nastaveî k¢ä kl vesù  termin lõ 
(µ  bit›– sloupeã ö k¢dõ ± ú µ á ³ bitù © deë ö bin rn¡í  k¢du)®  Tentï 
v˜stupn›¡  k¢ä  jdå spolõ så sign leí multiplexerõ © dkõ  kl vesnicå  ú 
deskù  ATÓ  dï  dek¢dovac¡hï obvodu¬  kter›˜ porovn›   po‘adovan›˜  © deë 
kl vesù  ú obvodõ PIÏ så skute‡n˜í © dkeí ú  multiplexeru®  P©é  shod›ˆ 
© dk›–  aktivujå  v˜stupn›¡ budi‡å sloupc–¬  ‡¡m›‘ så  nasimulujå  funkcå 
stisknut›‚  kl vesy®  Ë  obvodõ  paraleln¡hï portõ jsoõ  d lå  napojenù 
pomocn›‚ sing ly¬  jakï nap©®  sp¡n n›¡ nap jen›¡ sondy¬ co›‘ jå pou‘itï ë 
indikacé stavõ adaptorõ pomoc›¡ diodù LED¬ um¡stˆn›‚ uvnit›© sondy® 

     Podrobn›‚ zapojen›¡ adaptorõ jå ö p©¡lozå 1® Centr ln›¡ jednotkoõ jå 
mikroprocesoò  U880Ä (IO± - ekvivalenô Z80-CPU)®  Prograí jå zaps î  ö 
pamˆtecè  EPROÍ  MHÂ 271¶ (IO³ a›‘ IO5)®  Po‡eô pamˆt›¡ m–‘å  b˜ô  podlå 
rozsahõ programõ ± a›‘ ³ (kapacitá ² KB¬  ´ KÂ nebï ¶ KB© ®  Jednotliv›‚ 
pamˆté  EPROÍ  tvo©›¡ souvisl›˜ adresov›˜ prostoò  za‡¡naj¡c›¡  ná  adreså 
0000H®  Prï  z pió daô jsoõ pou‘itù pamˆté RAÍ MHÂ 211´ (IO¶ a›‘  IO90® 
Lzå  pou‘¡ô bu›ƒ ² pamˆté nebï ´ (kapacitá ± KÂ nebï ² KB)®  Pamˆté RAÍ 
IO¶  á  IO·  jsoõ adresov nù oä adresù 1800È á zrcadl›¡  så  oä  adreså 
1C00H®  Pamˆté RAÍ IO¸ á IO¹ jsoõ adresov nù oä adresù 2000È á zrcadl›¡ 
så oä adresù 2400H® Totï adresov n›¡ pamˆt›¡ jå pou‘itï ú d–vod›– napodo
ben›¡ zapojen›¡ deskõ STÅ termin lõ BDT¬ abù bylï mo‘nï pou‘¡ô ë servisõ 
testovac¡hï á servisn¡hï za©¡zen›¡ BPE® Ë tomutï £‡elõ slou‘›¡ é propoj
kù X± a›‘ X3¬ obvodù IO18Á a›‘ IO18Ã hradluj¡c›¡ sign lù /CÓ pamˆt›¡ EPROÍ 
á  p©ep¡na›‡  SW± á SW² slou‘¡c›¡ ë  p©ipojov n›¡  programovac¡hï  napˆt›¡ 
pamˆt›¡  EPROM®  T¡mtï jå umo‘nˆî prov dˆô servió adaptorõ pomoc›¡  BPE¬ 
jakï  jå testov n›¡ á programov n›¡ pamˆt›¡ á ostatn¡cè obvod›– beú jejicè 
vyj¡m n›¡ ú deskù adaptoru¬ krokov n›¡ programõ á pod.
     Jakï  paraleln›¡ vstupnˆ/v˜stupn›¡ obvoä slou‘›¡ obvoä U855Ä (IO²  - 
ekvivalenô  Z80-PIO)®  Vstupn›¡ sign lù zå sondù jsoõ p©ivedenù dï  PIÏ 
p©eó integra‡n›¡ á p©izp–sobovac›¡ ‡lenù C2/R¹ á C3/R1° ná vstupù PA°  á 
PA1®  V˜stupn›¡ adresá © dkõ kl vesù ú v˜stup›– PIÏ PB° a›‘ PB² jå p©ive
dená ö negovan›‚ form›ˆ ná porovn vac›¡ obvodù IO16Á a›‘ IO16C®  P©é shod›ˆ 
po‘adovan›‚  adresù så skute‡noõ (sign lù ZL± a›‘ ZL3© jå ú obvodõ  NANÄ 
IO17Á  vysl î impuló £rovn›ˆ L¬  kter›˜ pï negacé hradleí IO16Ä aktivujå 
v˜stupn›¡ budi‡å IO14Á a›‘ IO15A®  Tytï budi‡å p©ivedoõ ná  kl vesnicov›‚ 
vstupù  sloupc›– aktiva‡n›¡ sign lù p©iveden›‚ ú obvodõ PIÏ - PB³ a›‘  PB· 
(sloupec¬  kter›˜ m›  b˜ô aktivov n¬  m›  £rove›¤ H¬  ostatn›¡ L)®  V˜stupù 
budi‡›– jsoõ ó otev©en˜í kolektorem¬  ‡¡m›‘ jå umo‘nˆná paraleln›¡ funkcå 
kl vesnicå  á  adaptorõ (kl vesnicé jå ov¨eí mo‘nï pou‘¡ô  pouzå  kdy›‘ 
neprob¡h›  v˜stuğ daô ú adaptoru¬  jinaë så budoõ datá navz jeí  bloko
vat)®  Nap jen›¡  sondù  jå sp¡n nï tranzistoreí T±  ovl dan˜í  bud¡c¡í 
hradleí  IO15Â pomoc›¡ v˜stupõ PAµ ú PIO®  Vstupù PA¶ á PA· obvodõ  PIÏ 
jsoõ  pou‘itù prï vstuğ nastaven›¡ p©edvolbù k¢dõ ú p©ep¡na‡›– DIÌ SW³ á ŠSW4®  Obvodù IO1² á IO1³ slou‘›¡ ë p©¡padn‚mõ pou‘it›¡ v˜stupõ ná  vstuğ 
zå sn¡ma‡å dˆrn˜cè ¨t¡tk›– (nap©®  p©é po‘adavkõ rychlej¨¡hï vstupõ daô 
nebï  pou‘it›¡ prï form tù pou‘¡vaj¡c›¡ tentï vstup)¬  ö z kladn›¡  verzé 
protï  nejsoõ  osazov ny®  Tytï obvodù jsoõ za©azenù dï cestù  sign l›– 
p©ich zej¡c¡cè  oä sn¡ma‡å dˆrn˜cè ¨t¡tk›– á slou‘›¡ ë p©ep¡n n›¡  vstupõ 
dï  termin lõ  bo›ƒ zå sn¡ma‡å dˆrn˜cè ¨t¡tk›– nebï  ú  adaptoru®  Je-lé 
p©ipraveî ö adaptorõ znaë ë v˜stupu¬  jå ohled v î klopn›˜ obvoä  IO11Â 
zaznamen vaj¡c›¡  sign ì /REÓ (nulov n›¡ registr›– sn¡ma‡e©  p©ich zej¡c›¡ 
oä termin lu®  Pokuä tentï sign ì p©i¨el¬  jå tentï staö identifikov î 
jakï p©ipravenosô termin lõ kå vstupõ zå sn¡ma‡å ¨t¡tk›– á multiplexerù 
p©epoj›¡  vstuğ  sn¡ma‡å  ¨t¡tk›– zå sn¡ma‡å ná adaptoò á  v˜stuğ  znakõ 
probˆhnå ná vstuğ prï sn¡ma›‡ ¨t¡tk–.
     Ú  termin lõ  BDÔ  jsoõ d lå odeb¡r nù sign lù  /RESEÔ  á  TAKT1® 
Sign ì  /RESEÔ  slou‘›¡ ë resetov n›¡ adaptorõ p©é resetov n›¡  termin lõ 
(v˜padeë  nap jen›¡  á pod.© á jå slou‡eî så  sign leí  ú  resetovac¡hï 
obvodõ  adaptorõ  C1/D1/R2¬  kter›˜ prov d›¡ funkcé RESEÔ p©é  p©ipojen›¡ 
adaptorõ ná nap jen›¡ nap©®  p©é instalacé adaptorõ dï zapnut‚hï termi
n lu®  Sign ì TAKT± jå hodinov›˜ takô prï procesoò á PIO®  Ná rozd¡ì oä 
deskù STÅ jå syst‚mov›˜ takô vydˆleî dˆli‡koõ dvˆmá IO11A¬  ‡¡m›‘ odpad›  
nutnosô  korekcå ‡asov n›¡ p©¡stup›– dï pamˆté p©é  pou‘it›¡  pomalej¨¡cè 
pamˆt¡® 



          \B3.- Konstruk‡n¡ ©e¨en¡ adaptoru\b

     Adaptoò  jå nainstalov î dï termin lõ BDÔ jakï t©et›¡  nadstavbov›  
deská  EEL®  Jå  na¨roubov ná naä deskõ ZEL®  Deskù plo¨n˜cè  spoj›–  á 
rozm¡stˆn›¡ sou‡ steë jsoõ ö p©¡loh cè 2¬ ³ á 4® 
\j\p
     Rozpis sou‡ stek:

IO1            U 880 D .................. 1 ks
IO2            U 855 D .................. 1 ks
IO3...IO5      MHB 2716 ................. 2 ks (1 a‘ 3 ks)
IO6...IO9      MHB 2114 ................. 2 ks (2 nebo 4 ks)
IO10           MH 3205 .................. 1 ks
IO11           MH 74ALS74 ............... 1 ks
IO12, IO13     UCY 74LS157 .............. 0 ks (0 nebo 2 ks)
IO14, IO15     MH 74ALS38 ............... 2 ks
IO16           MH 74ALS86 ............... 1 ks
IO17           MH 74ALS20 ............... 1 ks
IO18           MH 74ALS08 ............... 1 ks
IO19           MH 74ALS00 ............... 1 ks

T1             KD 140 ................... 1 ks

D1, D2         KA 501 ................... 2 ks

C1             1æ0/6,3V ................. 1 ks
C2             680p ..................... 1 ks
C3             2n2 ...................... 1 ks
C4,C5          2æ2/6,3V ..................2 ks
C6...C11       68n ...................... 6 ks
ŠR1, R4, R5     
R6, R7, R9
R10,R12,R13
R14,R15,R16
R17,R18,R19    2K2 ...................... 15 ks
R2             33K ...................... 1 ks
R3, R21        120 ...................... 2 ks
R8, R20        3K3 ...................... 2 ks
R11            680 ...................... 1 ks

SW1, SW2       p©ep¡na‡ DIL 2x2 p¢l– .... 1 ks
SW3, SW4       dvojit˜ sp¡na‡ DIL 2x2 p.. 1 ks

X2, X3         konektor 2x13 p¢l– ....... 1 ks (1 nebo 2) 
X4             konektor 2x5 p¢l– ........ 1 ks

sonda          3WN16601 ................. 1 ks



\P\J
     Zapojen›¡  adaptorõ  dï termin lõ jå ná obr.2®  Vstuğ adaptorõ  jå 
napojeî ná vsuvkõ zapojenoõ mezé kabeì prï strojov›˜ interfacå á  deskõ 
ZEÌ  resp®  STE®  V˜stuğ adaptorõ jå napojeî pomoc›¡ vsuvkù mezé  deskõ 
displejå  ATÓ  á deskõ STE-vstuğ ú kl vesnicå á v˜stuğ ná  displej®  Ú 
tohotï  konektorõ  så t‚›‘ odeb¡r›  nap jec›¡  napˆt¡¬  sign ì  /RESEÔ  á 
sign ì TAKT1.
\p\j

       sonda                                          ATS
         Ø z kladna BDT        ÚÄÄÄÄÄÄÄÄÄ¿              ³
         ³                     ³         ³              Ø 
         Ø kabel do ZEL        ³         ³              ³
         ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿   ³ adaptor ³   ÚÄÄÄÄÄÄÄÄÄÄÙ
       vsuvka              ÆÍÎÍµ         ÆÍÎÍµ      vsuvka
         ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ X4³         ³ X3ÀÄÄÄÄÄÄÄÄÄÄ¿
         Ø                     ³         ³              Ø
    ZEL nebo STE               ³         ³              ³
  stroj. interface             ÀÄÄÄÄÄÄÄÄÄÙ      STE-vstup kl vesnice



     Obr. 2.: Zapojen¡ adaptoru do termin lu

