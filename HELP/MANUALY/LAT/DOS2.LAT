 
ÉÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
º ±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±± º
º ±±                                                                   ±± º
º ±±                 ÿD  ÿO  ÿS     ÿ-     ÿsÿlÿuÿ§ÿbÿy                ±± º
º ±±                                                                   ±± º
º ±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±±± º
ÈÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼
                            (c) Miroslav NØmeŸek


    Slu§by modulu operaŸn¡ho syst‚mu DOS se vyvol vaj¡ instrukc¡ INT 21H, v
registru AH je pýitom ulo§eno Ÿ¡slo po§adovan‚ funkce. V dalç¡ch registrech
jsou  ulo§eny  parametry podle po§adavk… funkce. OvlivnØn¡ dalç¡ch registr…
je  z visl‚  na prov dØn‚ operaci; obsah registru AL je zniŸen t‚mØý ka§dou
funkc¡.

Pozn.: Z  d…vod…  sluŸitelnosti  se  starç¡mi verzemi DOSu jsou mo§n‚ jeçtØ
       dalç¡ dvØ mo§nosti vol n¡ slu§eb DOSu:

         1.- Um¡stit  Ÿ¡slo  funkce  do  AH  a  prov‚st  vzd len‚ vol n¡ na
             relativn¡  adresu  0050H  v prefixu programov‚ho segmentu PSP.
             Tuto metodu nelze pou§¡t pro verze DOS ni§ç¡ ne§ 2.0.

         2.- Do  registru  CL  um¡stit  Ÿ¡slo  funkce  a  ostatn¡  registry
             nastavit  podle  funkŸn¡ch  specifikac¡. Pak se provede vol n¡
             uvnitý  programov‚ho  segmentu  na  pamØœov‚ m¡sto 0005H. Toto
             pamØœov‚  m¡sto  obsahuje  vzd len‚  vol n¡ dispeŸera funkce v
             DOS.  Pýi pou§it¡ t‚to metody se v§dy zruç¡ obsah registru AX.
             Tato  metoda  je pou§iteln  jen pro vol n¡ funkc¡ 00H a§ 24H a
             pou§¡vala  se u starç¡ch program… typu COM. Pro novØ vytvoýen‚
             programy je nevhodn .

    Pokud  je  u  dan‚  slu§by uveden pý¡klad (uk zkovì program), lze tento
pý¡klad  pou§¡t  v makroassembleru MASM s t¡m, §e uk zkov  Ÿ st programu se
vŸlen¡  do jednotn‚ struktury programu (tato struktura slou§¡ jako pý¡klad,
je  z roveå ulo§ena jako zdrojovì soubor pro nov‚ programy vúC:\ASSEMB\ pod
n zvem SOURCE.ASM):

(Pozn.: Pý¡klady  jsou  zjednoduçeny  vypouçtØn¡m  instrukc¡  nastavuj¡c¡ch
        registry  pýed  ka§dou  funkc¡, neboœ z…st vaj¡ nastaveny pýedeçlou
        funkc¡.  Pýi  bØ§n‚m  psan¡  programu je vçak vhodn‚ tyto instrukce
        ps t  d…slednØ,  neboœ  se  t¡m sn¡§¡ chybovost pýi z pisu programu
        nebo pýi jeho pozdØjç¡ modifikaci.)


===========================================================================

COMMENT %
               pozn mka - obsahuje popis programu
        %

;--------------------------------------------------------------------------
;                            Segment z sobn¡ku
;--------------------------------------------------------------------------

stack    SEGMENT   stack

         DW        256 DUP(?)               ; z sobn¡k

stack    ENDS

;--------------------------------------------------------------------------
;                            Programovì segment
;--------------------------------------------------------------------------

code     SEGMENT   page
         ASSUME    cs:code,ds:code,ss:stack

start:                                      ; hlavn¡ tØlo programu
         mov       ax,SEG code              ; segment dat=segment programu
         mov       ds,ax                    ; nastaven¡ datov‚ho segmentu

         ; ..............................................
         ;  PROGRAM - zde je um¡stØn program z pý¡kladu
         ; ..............................................

         mov       ah,4ch                   ; ukonŸen¡ programu
         int       21h

code     ENDS

         END       start               ; startovac¡ adresa programu

===========================================================================



    K pýekladu programu lze pou§¡t n sleduj¡c¡ pý¡kazovì soubor:


IF NOT EXIST C:\ASSMEB\SOURCE\%1.ASM COPY C:\ASSEMB\SOURCE.ASM
                                                    C:\ASSMEB\SOURCE\%1.ASM
:START
C:\ASSEMB\EDITOR C:\ASSEMB\SOURCE\%1.ASM
C:\ASSEMB\MASM C:\ASSEMB\SOURCE\%1 /Z;
IF ERRORLEVEL == 1 GOTO START
C:\ASSEMB\LINK %1,C:\ASSEMB\EXEC\%1;
IF ERRORLEVEL == 1 GOTO START
DEL %1.OBJ


    Makroassembler  (MASM.EXE),  spojovac¡  program  (LINK.EXE) a pý¡kazovì
soubor  (ASM.BAT)  jsou um¡stØny na disku C: v adres ýi C:\ASSEMB. Zdrojovì
text  programu  (text  v bØ§n‚m ASCII form tu a s rozç¡ýen¡m jm‚na .ASM) je
ulo§en  v adres ýi C:\ASSEMB\SOURCE, pýelo§enì program je ulo§en v adres ýi
C:\ASSEMB\EXEC.    Pýeklad    se    spust¡   zaps n¡m   pý¡kazov‚ho   ý dku
C:\ASSEMB>ASMújm‚no_programu  (bez ud n¡ rozç¡ýen¡ souboru). Program EDITOR
je  editor  slou§¡c¡ k editaci textu programu. Pokud je vyvol n novì (jeçtØ
neexistuj¡c¡)  soubor  .ASM, pou§ije se zdrojovì text (uvedenì vìçe), kterì
je ulo§en v adres ýi C:\ASSEMB\ pod jm‚nem SOURCE.ASM.



Seznam syst‚movìch funkc¡ DOS:


Funkce 00H ( 0) - pýeruçen¡ programu
Funkce 01H ( 1) - vstup znaku z kl vesnice s echem
Funkce 02H ( 2) - vìstup znaku
Funkce 03H ( 3) - pomocnì vstup znaku
Funkce 04H ( 4) - pomocnì vìstup znaku
Funkce 05H ( 5) - vìstup znaku na tisk rnu
Funkce 06H ( 6) - pý¡mì vstup/vìstup znaku na konzolu
Funkce 07H ( 7) - ý¡zenì vstup znaku z konzoly bez echa
Funkce 08H ( 8) - vstup znaku z konzoly bez echa
Funkce 09H ( 9) - tisk ýetØzce
Funkce 0AH (10) - vstup textu do bufferu
Funkce 0BH (11) - test stavu standradn¡ho vstupu
Funkce 0CH (12) - vymaz n¡ vstupn¡ho bufferu a proveden¡ funkce kl vesnice
Funkce 0DH (13) - reset disku
Funkce 0EH (14) - vìbØr aktivn¡ho disku
Funkce 0FH (15) - otevýen¡ souboru s pou§it¡m FCB
Funkce 10H (16) - uzavýen¡ souboru s pou§it¡m FCB
Funkce 11H (17) - nalezen¡ prvn¡ho vyhovuj¡c¡ho souboru s pou§it¡m FCB
Funkce 12H (18) - nalezen¡ dalç¡ho vyhovuj¡c¡ho souboru s pou§it¡m FCB
Funkce 13H (19) - zruçen¡ souboru s pou§it¡m FCB
Funkce 14H (20) - sekvenŸn¡ Ÿten¡ ze souboru s pou§it¡m FCB
Funkce 15H (21) - sekvenŸn¡ z pis do souboru s pou§it¡m FCB
Funkce 16H (22) - vytvoýen¡ souboru s pou§it¡m FCB
Funkce 17H (23) - pýejmenov n¡ souboru s pou§it¡m FCB
Funkce 18H (24) - rezervov no
Funkce 19H (25) - poskytnut¡ aktivn¡ho disku
Funkce 1AH (26) - nastaven¡ adresy diskovìch pýenos… (DTA)
Funkce 1BH (27) - poskytnut¡ informace FAT pýihl çen‚ho disku
Funkce 1CH (28) - poskytnut¡ informace FAT specifikovan‚ho disku
Funkce 1DH (29) - rezervov no
Funkce 1EH (30) - rezervov no
Funkce 1FH (31) - rezervov no
Funkce 20H (32) - rezervov no
Funkce 21H (33) - Ÿten¡ s pý¡mìm pý¡stupem s pou§it¡m FCB
Funkce 22H (34) - z pis s pý¡mìm pý¡stupem s pou§it¡m FCB
Funkce 23H (35) - poskytnut¡ velikosti souboru s pou§it¡m FCB
Funkce 24H (36) - nastaven¡ polo§ky relativn¡ho z znamu s pou§it¡m FCB
Funkce 25H (37) - nastaven¡ vektoru pýeruçen¡
Funkce 26H (38) - vytvoýen¡ programov‚ho segmentu
Funkce 27H (39) - Ÿten¡ bloku s pý¡mìm pý¡stupem s pou§it¡m FCB
Funkce 28H (40) - z pis bloku s pý¡mìm pý¡stupem s pou§it¡m FCB
Funkce 29H (41) - rozbor jm‚na souboru
Funkce 2AH (42) - poskytnut¡ syst‚mov‚ho data
Funkce 2BH (43) - nastaven¡ syst‚mov‚ho data
Funkce 2CH (44) - poskytnut¡ syst‚mov‚ho Ÿasu
Funkce 2DH (45) - nastaven¡ syst‚mov‚ho Ÿasu
Funkce 2EH (46) - nastaven¡ nebo resetov n¡ pýep¡naŸe VERIFY
Funkce 2FH (47) - poskytnut¡ adresy diskovìch pýenos… (DTA)
Funkce 30H (48) - poskytnut¡ Ÿ¡sla verze DOS
Funkce 31H (49) - pýeruçen¡ a ponech n¡ rezidentn¡m
Funkce 32H (50) - rezervov no
Funkce 33H (51) - poskytnut¡ nebo nastaven¡ statutu BREAK
Funkce 34H (52) - rezervov no
Funkce 35H (53) - poskytnut¡ vektoru pýeruçen¡
Funkce 36H (54) - poskytnut¡ voln‚ho m¡sta disku
Funkce 37H (55) - rezervov no
Funkce 38H (56) - poskytnut¡ nebo nastaven¡ n rodnostnØ z vislìch informac¡
Funkce 39H (57) - vytvoýen¡ adres ýe (MKDIR)
Funkce 3AH (58) - zruçen¡ adres ýe (RMDIR)
Funkce 3BH (59) - zmØna adres ýe (CHDIR)
Funkce 3CH (60) - vytvoýen¡ souboru (CREAT)
Funkce 3DH (61) - otevýen¡ souboru
Funkce 3EH (62) - uzavýen¡ identifik toru souboru
Funkce 3FH (63) - Ÿten¡ ze souboru nebo zaý¡zen¡ s pou§it¡m identif. soub.
Funkce 40H (64) - z pis do souboru nebo zaý¡zen¡ s pou§it¡m identif. soub.
Funkce 41H (65) - zruçen¡ souboru (UNLINK)
Funkce 42H (66) - pýem¡stØn¡ ukazatele souboru (LSEEK)
Funkce 43H (67) - poskytnut¡ nebo nastaven¡ atribut… souboru (CHMOD)
Funkce 44H (68) - vstupnØ/vìstupn¡ ovl d n¡ zaý¡zen¡ (IOCTL)
Funkce 4400H (68- 0) - IOCTL: poskytnut¡ informac¡ o zaý¡zen¡
Funkce 4401H (68- 1) - IOCTL: nastaven¡ informac¡ o zaý¡zen¡
Funkce 4402H (68- 2) - IOCTL: Ÿten¡ ze znakov‚ho zaý¡zen¡
Funkce 4403H (68- 3) - IOCTL: z pis na znakov‚ zaý¡zen¡
Funkce 4404H (68- 4) - IOCTL: Ÿten¡ z blokov‚ho zaý¡zen¡
Funkce 4405H (68- 5) - IOCTL: z pis na blokov‚ zaý¡zen¡
Funkce 4406H (68- 6) - IOCTL: poskytnut¡ vstupn¡ho statutu
Funkce 4407H (68- 7) - IOCTL: poskytnut¡ vìstupn¡ho statutu
Funkce 4408H (68- 8) - IOCTL: je zaý¡zen¡ vìmØnn‚ ?               > DOS 3.0
Funkce 4409H (68- 9) - IOCTL: je logick‚ zaý¡zen¡ d lkov‚ ?       > DOS 3.1
Funkce 440AH (68-10) - IOCTL: je identif. d lkov‚ho zaý¡zen¡ ?    > DOS 3.1
Funkce 440BH (68-11) - IOCTL: zmØna Ÿ¡taŸe opakov n¡ pro sd¡len¡  > DOS 3.0
Funkce 440DH (68-13) - IOCTL: generov n¡ po§adavku IOCTL          > DOS 3.2
Funkce 440EH (68-14) - IOCTL: poskytnut¡ logick‚ho disku          > DOS 3.2
Funkce 440FH (68-15) - IOCTL: nastaven¡ logick‚ho disku           > DOS 3.2
Funkce 45H (69) - zdvojen¡ identifik toru souboru (DUP)
Funkce 46H (70) - nucen‚ zdvojen¡ identifik toru souboru (FORCDUP)
Funkce 47H (71) - poskytnut¡ aktivn¡ho adres ýe
Funkce 48H (72) - pýidØlen¡ pamØti
Funkce 49H (73) - uvolnØn¡ pýidØlen‚ pamØti
Funkce 4AH (74) - modifikace pýidØlen‚ pamØti (SETBLOCK)
Funkce 4BH (75) - naŸten¡ nebo proveden¡ programu (EXEC)
Funkce 4CH (76) - ukonŸen¡ procesu (EXIT)
Funkce 4DH (77) - poskytnut¡ n vratov‚ho k¢du podprocesu (WAIT)
Funkce 4EH (78) - nalezen¡ prvn¡ho vyhovuj¡c¡ho souboru (FIND FIRST)
Funkce 4FH (79) - nalezen¡ dalç¡ho vyhovuj¡c¡ho souboru (FIND NEXT)
Funkce 50H (80) - rezervov no
Funkce 51H (81) - rezervov no
Funkce 52H (82) - rezervov no
Funkce 53H (83) - rezervov no
Funkce 54H (84) - poskytnut¡ informace o nastaven¡ VERIFY
Funkce 55H (85) - rezervov no
Funkce 56H (86) - pýejmenov n¡ souboru
Funkce 57H (87) - poskytnut¡ nebo nastaven¡ data a Ÿasu souboru
Funkce 59H (89) - poskytnut¡ rozçiýuj¡c¡ch chybovìch informac¡    > DOS 3.0
Funkce 5AH (90) - vytvoýen¡ jedineŸn‚ho souboru                   > DOS 3.0
Funkce 5BH (91) - vytvoýen¡ nov‚ho souboru                        > DOS 3.0
Funkce 5CH (92) - zamknut¡/odemknut¡ pý¡stupu k souboru           > DOS 3.0
Funkce 5DH (93) - rezervov no
Funkce 5E00H (94-0) - poskytnut¡ jm‚na zaý¡zen¡                   > DOS 3.1
Funkce 5E02H (94-2) - nastaven¡ inicializaŸn¡ho ýetØzce tisk rny  > DOS 3.1
Funkce 5E03H (94-3) - poskytnut¡ inicializaŸn¡ho ýetØzce tisk rny > DOS 3.1
Funkce 5F02H (95-2) - poskytnut¡ polo§ky vìpisu pýesmØrov n¡      > DOS 3.1
Funkce 5F03H (95-3) - pýesmØrov n¡ zaý¡zen¡                       > DOS 3.1
Funkce 5F04H (95-4) - zruçen¡ pýesmØrov n¡                        > DOS 3.1
Funkce 60H (96) - rezervov no
Funkce 61H (97) - rezervov no
Funkce 62H (98) - poskytnut¡ adresy prefixu program. segmentu     > DOS 3.0




RozdØlen¡ funkc¡ do oblast¡:

Syst‚mov‚ informace:

38H - Ÿ¡slo verze operaŸn¡ho syst‚mu DOS
2AH - syst‚mov‚ datum
2CH - syst‚movì Ÿas
19H - aktivn¡ disk
47H - aktivn¡ adres ý
38H - n rodnostnØ z visl‚ informace

2FH - souŸasn  adresa diskovìch pýenos… DTA
62H - souŸasn  adresa prefixu programov‚ho segmentu PSP
35H - Ÿten¡ hodnoty vektoru pýeruçen¡
4DH - k¢d ukonŸen¡ procesu
59H - rozçiýuj¡c¡ chybov‚ informace
44H - ovl d n¡ I/O zaý¡zen¡ (statut zaý¡zen¡/soubor…)

54H - nastaven¡ pýep¡naŸe m¢du VERIFY
33H - nastaven¡ pýep¡naŸe kontroly Ctrl-Break

37H - nastaven¡ pýep¡naŸe znak… (QUERY)
34H - adresa statutu pozad¡ DOS

36H, 1BH, 1CH - velikost disku, voln‚ bajty
32H - podp…rn‚ informace o disku

57H - Ÿas/datum souboru

4EH, 4FH, 11H, 12H - hled n¡ souboru



Znakov‚ vstupy/vìstupy:

01H, 3FH (BX=0) - vstup z kl vesnice
08H - vstup z kl vesnice (bez echa)
07H - nefiltrovanì vstup z kl vesnice (bez echa)
0BH - poskytnut¡ vstupn¡ho statutu
0CH - vymaz n¡ vyrovn vac¡ pamØti kl vesnice a vstup znaku z kl vesnice
0AH, 3FH (BX=0) - vstup ýetØzce znak… z kl vesnice
06H - vstup a vìstup na konzolu

02H, 40H (BX=1,2) - zobrazen¡ jednoho znaku
09H, 40H (BX=1,2) - zobrazen¡ ýetØzce znak…

03H, 3FH (BX=3) - vstup z pý¡davn‚ho zaý¡zen¡ (s‚riovì port)
04H, 40H (BX=3) - vìstup na pý¡davn‚ zaý¡zen¡ (s‚riovì port)

05H, 40H (BX=4) - vìstup na tisk rnu
INT 2FH - pýep¡nateln‚ funkce


VstupnØ/vìstupn¡ operace s pou§it¡m FCB:

(lze vyu§¡t pouze aktivn¡ adres ý)

29H - rozbor popisu souboru v textov‚m tvaru na tvar FCB
11H, 12H - prohled v n¡ aktivn¡ho adres ýe

16H - vytvoýen¡ souboru
0FH - otevýen¡ souboru
10H - uzavýen¡ souboru
13H - zruçen¡ souboru

14H - sekvenŸn¡ Ÿten¡ ze souboru
15H - sekvenŸn¡ z pis do souboru

21H - Ÿten¡ z znamu s pý¡mìm pý¡stupem
27H - v¡cen sobn‚ Ÿten¡ z znamu s pý¡mìm pý¡stupem
22H - z pis z znamu s pý¡mìm pý¡stupem
28H - v¡cen sobnì z pis z znamu s pý¡mìm pý¡stupem
24H - nastaven¡ polo§ky FCB relativn¡ z znam


VstupnØ/vìstupn¡ operace s pou§it¡m identifik toru souboru:

3CH - vytvoýen¡ souboru
5BH - vytvoýen¡ nov‚ho souboru (nesm¡ existovat)
5AH - vytvoýen¡ jedineŸn‚ho/doŸasn‚ho souboru

3DH - otevýen¡ souboru
3EH - uzavýen¡ souboru
41H - zruçen¡ souboru

42H - nastaven¡ ukazatele pro Ÿten¡/z pis
3FH - Ÿten¡ ze souboru/zaý¡zen¡
40H - z pis do souboru/zaý¡zen¡
44H - ý¡zen¡  vstupnØ/vìstupn¡ch  zaý¡zen¡  IOCTL  (lze  pou§¡t k testov n¡
      konce souboru

45H - duplikov n¡ identifik toru souboru
46H - pýesmØrov n¡ I/O identifik toru souboru


Pr ce s adres ýi a se soubory:

39H - vytvoýen¡ nov‚ho adres ýe
3AH - zruçen¡ adres ýe
3BH - nastaven¡ nov‚ho aktivn¡ho adres ýe
47H - poskytnut¡ aktivn¡ho adres ýe

0EH - nastaven¡ aktivn¡ho disku
19H - poskytnut¡ aktivn¡ho disku

56H, 17H - pýejmenov n¡ souboru
57H - nastaven¡/informace o Ÿasu a data souboru
42H, 23H - informace o velikosti souboru
28H - nastaven¡ velikosti souboru (s pou§it¡m funkce 42H)
43H - zmØna/poskytnut¡ atribut… souboru

5CH - zamŸen¡/odemknut¡ pý¡stupu k souboru

4EH, 4FH - hled n¡ souboru podle jm‚na ASCIIZ
11H, 12H - hled n¡ souboru v adres ýi podle FCB

29H - rozklad textu (jm‚na souboru) do polo§ky FCB


ü¡zen¡ proces…:

4BH - vykon n¡ synovsk‚ho procesu
26H - vytvoýen¡ prefixu programov‚ho segmentu (PSP)
62H - poskytnut¡ adresy prefixu programov‚ho segmentu (PSP) procesu

31H, INT 27H - ukonŸen¡ programu s jeho uchov n¡m v pamØti

00H, INT 20H - tradiŸn¡ ukonŸen¡ programu (kompatibiln¡)

4CH - ukonŸen¡ programu a pýed n¡ vìstupn¡ho k¢du otcovsk‚mu procesu
4DH - poskytnut¡ vìstupn¡ho k¢du ukonŸen‚ho procesu

INT 23H - pýeruçen¡ pomoc¡ kl ves <Ctrl>-<Break> (<Ctrl>-C)
INT 24H - pýeruçen¡ pýi kritick‚ chybØ


Funkce pro ovl d n¡ pamØti:

48H - pýidØlen¡ bloku pamØti procesu (nebo urŸen¡ nejvØtç¡ho bloku pamØti)
49H - uvolnØn¡ pýidØlenìch blok… pamØti
4AH - zvØtçen¡/zmØnçen¡ blok… pamØti

INT 12H - navr cen¡ celkov‚ pamØti syst‚mu


Doplåuj¡c¡ funkce:

1AH - nastaven¡ adresy diskovìch pýenos… DTA
25H - nastaven¡ vektoru pýeruçen¡
0EH - nastaven¡ aktivn¡ho disku DOS

5CH - zamŸen¡/odemknut¡ pý¡stupu k soubor…m
5EH - doplåuj¡c¡ funkce pro pr ci v s¡ti
5FH - pýesmØrov n¡ s¡œov‚ho zaý¡zen¡

0DH - reset disku (vypr zdnØn¡ vyrovn vac¡ pamØti)
29H - rozklad textu na jm‚na souboru v FCB

2BH - nastaven¡ syst‚mov‚ho data
2DH - nastaven¡ syst‚mov‚ho Ÿasu
57H - poskytnut¡ Ÿasu/data souboru

2EH - nastaven¡ statutu verifikace
37H - pýep¡n n¡ znak… QUERY

38H - nastaven¡ aktivn¡ zemØ

44H - komunikaŸn¡ kan ly k ovl d n¡ zaý¡zen¡





ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿ0ÿH ÿ(ÿ0ÿ)  - pýeruçen¡ programu

    vstup:    AH = 00H
              CS = adresa segmentu prefixu programov‚ho segmentu PSP

    vìstup:   § dnì

    Funkce ukonŸuje program a navrac¡ ý¡zen¡ do DOS.

    DOS  pýeruç¡ program, vypr zdn¡ buffery soubor…, navr t¡ obsahy vektor…
INT  22H,  INT  23H  a  INT  24H  z prefixu programov‚ho segmentu PSP - tj.
vìstupn¡  adresy  (vektory)  pro  ukonŸen¡ (adr. 0AH), <Ctrl>-<Break> (adr.
0EH)  a kritick‚ chyby (adr. 12H) a pýed  ý¡zen¡ na adresu vektoru ukonŸen¡
programu v PSP (n vrat do otcovsk‚ho procesu).

    Pýed  vyvol n¡m  slu§by  nejdý¡ve  uzavýete  vçechny  soubory. Potom se
pýesvØdŸte, zda CS obsahuje adresu segmentu PSP.

Pozn.: Tato  funkce  je  vol na  pomoc¡ pýeruçen¡ INT 20H a pracuje stejnìm
       zp…sobem.  Slu§ba  je  historickìm poz…statkem nemaj¡c¡ § dn‚ vìhody
       oproti   funkci  4CH  (ukonŸen¡  programu)  a  z…st v   pouze  kv…li
       sluŸitelnosti  se  starç¡mi programy. Proto pou§¡vejte radØji funkci
       4CH, kter  umo§åuje navr tit chybovì k¢d pou§itelnì jinìm programem.




ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿ1ÿH ÿ(ÿ1ÿ)  - vstup znaku z kl vesnice s echem

    vstup:    AH = 01H

    vìstup:   AL = pýeŸtenì znak ze standardn¡ho vstupu

    Funkce Ÿte znak ze standardn¡ho vstupn¡ho zaý¡zen¡ (obvykle kl vesnice)
a  provede  t‚§  jeho echo (tj. kop¡rov n¡ znaku i na vìstup) na standardn¡
vìstupn¡ zaý¡zen¡ (obvykle obrazovka). Funkce Ÿek  na pý¡chod znaku

    Pokud je stisknuta kl vesa se speci ln¡ funkc¡ (napý. kurzorov‚ kl vesy
a  pod.),  navr t¡ funkce v AL nejdý¡ve k¢d 00H; opØtnìm vol n¡m funkce lze
pýeŸ¡st orientaŸn¡ k¢d kl vesy (viz tabulka k¢d… kl ves).

    Pýi  duplikov n¡  znaku na displej se prov dØj¡ ý¡d¡c¡ k¢dy BEL (07H) =
p¡pnut¡, BS (08H) = krok kurzoru zpØt a vymaz n¡ posledn¡ho znaku, HT (09H)
=  tabel tor,  LF  (0AH) = pýesun na n sleduj¡c¡ ý dek, FF (0CH) = vymaz n¡
obrazovky, CR (0DH) = pýechod na zaŸ tek ý dku a pýi nainstalovan‚m driveru
obrazovky ANSI.SYS t‚§ ESC (1BH) = speci ln¡ ý¡d¡c¡ funkce.

    Kombinace  kl ves  <Ctrl>-<Break>  nebo  <Ctrl>-C  vygeneruje pýeruçen¡
INTú23H (u§ivatelsk‚ pýeruçen¡).




ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿ2ÿH ÿ(ÿ2ÿ)  - vìstup znaku

    vstup:    AH = 02H
              DL = znak k vìstupu

    vìstup:   § dnì

    Funkce vyçle znak ulo§enì v registru DL na standardn¡ vìstupn¡ zaý¡zen¡
(obvykle obrazovka).

Pozn.: Pokud  je  stisknuta  kombinace kl ves <Ctrl>-<Break> nebo <Ctrl>-C,
       provede  funkce  pýeruçen¡  INT  23H.  Test  kl ves se prov d¡ a§ po
       zobrazen¡ znaku.

       Pýi  vìstupu  znaku se prov dØj¡ ý¡d¡c¡ k¢dy BEL (07H) = p¡pnut¡, BS
       (08H)  =  krok  kurzoru zpØt a vymaz n¡ posledn¡ho znaku, HT (09H) =
       tabel tor,  LF  (0AH)  =  pýesun  na  n sleduj¡c¡  ý dek, FF (0CH) =
       vymaz n¡  obrazovky,  CR  (0DH)  =  pýechod  na  zaŸ tek ý dku a pýi
       nainstalovan‚m  driveru obrazovky ANSI.SYS t‚§ ESC (1BH) = speci ln¡
       ý¡d¡c¡ funkce.

       Vìstup zadan‚ho ýetØzce textu - viz funkce 09H.

Pý¡klad: N sleduj¡c¡ program pýevede mal  p¡smena na velk  a zobraz¡ je.

         cyklus:   mov       ah,8           ; funkce vstupu znaku z kl v.
                   int       21h            ; vstup znaku z kl vesnice
                   cmp       al,27          ; kl vesa <Esc>
                   jz        konec          ; ukonŸen¡ programu
                   cmp       al,"a"         ; je menç¡ ne§ "a" ?
                   jl        neprev         ; je menç¡ - nepýev dØt
                   cmp       al,"z"         ; je vØtç¡ ne§ "z" ?
                   jg        neprev         ; je vØtç¡ ne§ "z" - nepýev dØt
                   sub       al,20h         ; pýevod mal‚ho p¡sm. na velk‚
         neprev:   mov       ah,2           ; funkce vìstupu na displej
                   mov       dl,al          ; znak k vìstupu na displej
                   int       21h            ; vìstup znaku na displej
                   jmp       cyklus         ; dalç¡ znak
         konec:                             ; n sleduje ukonŸen¡ programu



ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿ3ÿH ÿ(ÿ3ÿ)  - vstup znaku z pý¡davn‚ho zaý¡zen¡

    vstup:    AH = 03H

    vìstup:   AL = pýeŸtenì znak z pý¡davn‚ho zaý¡zen¡

    Funkce  Ÿte  znak  (Ÿek   na  jeho  pý¡chod) ze standardn¡ho pý¡davn‚ho
zaý¡zen¡  AUX.  Standardn¡m  pý¡davnìm zaý¡zen¡m (oznaŸen¡ AUX) je norm lnØ
prvn¡  s‚riovì  port  COM1.  Vstup  nepou§¡v  vyrovn vac¡ pamØœ, nen¡ ý¡zen
pýeruçen¡m  a  prob¡h   formou  Ÿek n¡  na  pý¡chod  znaku.  Pýi zpracov n¡
pýich zej¡c¡ch   znak…   je   proto   nutn‚,  aby  aplikaŸn¡  program  mezi
jednotlivìmi  vstupy  neprov dØl  prodlevy,  neboœ by mohlo doj¡t ke ztr tØ
dat.  MØl by si zajistit vhodnou formou komunikaŸn¡ho protokolu, aby mu byl
vys¡l n  pouze  urŸitì poŸet bajt…, kter‚ si nejdý¡ve ukl d  do vyrovn vac¡
pamØti  a  a§  pýijde  pýesnØ  definovanì  poŸet  bajt…, provede zpracov n¡
pýijatìch  dat  a vyzve protØjç¡ zaý¡zen¡ k vysl n¡ dalç¡ho bal¡ku dat.

    Pýi  startu syst‚mu inicializuje DOS prvn¡ s‚riovì port COM1 na hodnotu
2400  baud,  8údatovìch  bit…,  jeden  stop bit, § dn  parita. Povelem MODE
(extern¡ pý¡kaz operaŸn¡ho syst‚mu) lze tyto hodnoty mØnit.

Pozn.: Pokud  je  detekov na  kombinace  kl ves  <Ctrl>-<Break> (<Ctrl>-C),
       potom je vygenerov no pýeruçen¡ INT 23H.

       Vstup  znaku  nen¡  ukl d n  do bufferu a nen¡ ý¡zen pýes pýeruçen¡;
       pokud v ç program nen¡ schopen Ÿ¡st znaky plnou rychlost¡, mohou bìt
       data ztracena.

       Funkce  neumo§åuje  monitorov n¡  stavu  komunikaŸn¡ho portu (zda je
       pýipraven  pýijatì  znak).  Pro  vØtç¡  kontrolu nad portem pou§ijte
       pýeruçen¡  INT 14H ROM-BIOSu. Viz t‚§ popis adapt‚ru s‚riovìch port…
       a pýeruçen¡ INT 0CH a INT 0BH.



ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿ4ÿH ÿ(ÿ4ÿ)  - vìstup znaku na pý¡davn‚ zaý¡zen¡

    vstup:    AH = 04H
              DL = znak k vìstupu na pý¡davn‚ zaý¡zen¡

    vìstup:   § dnì

    Tato  funkce  umo§åuje  vìstup  znaku, jeho§ ASCII hodnota je ulo§ena v
registru DL, na standardn¡ pý¡davn‚ zaý¡zen¡ AUX. Pýitom Ÿek , a§ je vysl n
pýedch zej¡c¡  znak  (tj. a§ je vypr zdnØn vys¡lac¡ buffer a a§ je protØjç¡
zaý¡zen¡ pýipraveno pýijmout znak).

    Standardn¡m  pý¡davnìm  zaý¡zen¡m  (oznaŸen¡  AUX)  je  norm lnØ  prvn¡
s‚riovì   port   COM1.  Vìstup  nepou§¡v   vyrovn vac¡  pamØœ,  nen¡  ý¡zen
pýeruçen¡m  a  prob¡h   formou Ÿek n¡ na vysl n¡ pýedch zej¡c¡ho znaku. Zda
bude  aplikaŸn¡ program ponech vat mezi jednotlivìmi vyslanìmi znaky mezery
vznikl‚  jinìmi Ÿinnostmi programu, je vØc¡ aplikaŸn¡ho programu a m  pouze
vliv  na  zpomalen¡  pýenosu.  Pouze  pýi  synchronn¡m re§imu provozu by se
nemØly objevovat meziznakov‚ mezery.

    Pýi  startu syst‚mu inicializuje DOS prvn¡ s‚riovì port COM1 na hodnotu
2400  baud,  8údatovìch  bit…,  jeden  stop bit, § dn  parita. Povelem MODE
(extern¡ pý¡kaz operaŸn¡ho syst‚mu) lze tyto hodnoty mØnit.

Pozn.: Pokud  je  detekov na  kombinace  kl ves  <Ctrl>-<Break> (<Ctrl>-C),
       potom je vygenerov no pýeruçen¡ INT 23H.

       Funkce  neumo§åuje  monitorov n¡  stavu komunikaŸn¡ho portu (zda byl
       vysl n  pýedch zej¡c¡  znak). Pro vØtç¡ kontrolu nad portem pou§ijte
       pýeruçen¡  INT 14H ROM-BIOSu. Viz t‚§ popis adapt‚ru s‚riovìch port…
       a pýeruçen¡ INT 0CH a INT 0BH.




ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿ5ÿH ÿ(ÿ5ÿ)  - vìstup znaku na tisk rnu

    vstup:    AH = 05H
              DL = znak k vìstupu na tisk rnu

    vìstup:   § dnì

    Funkce  vyçle  znak,  jeho§  ASCII hodnota je ulo§ena v registru DL, na
standardn¡  tiskov‚  zaý¡zen¡  PRN, kterìm je norm lnØ prvn¡ paraleln¡ port
tisk rny (LPT1).

Pozn.: Pokud  je  zaý¡zen¡  (tisk rna)  zanepr zdnØno,  funkce  Ÿek   a§ je
       pýipraveno pýijmout znak.

       Povel   operaŸn¡ho  syst‚mu  MODE  umo§åuje  pýesmØrovat  standardn¡
       tiskovì vìstup PRN na s‚riovì port.

       Pokud  je  detekov na  kombinace  kl ves  <Ctrl>-<Break> (<Ctrl>-C),
       potom je vygenerov no pýeruçen¡ INT 23H.

Pý¡klad: N sleduj¡c¡ program tiskne na tisk rnu ý dky ASCII znak….

                   mov       bl,32          ; poŸ teŸn¡ znak k tisku
                   mov       ah,5           ; funkce pro tisk znaku
         radek:    mov       cx,80          ; poŸet znak… na ý dek
                   mov       dl,bl          ; znak k tisku
         znak:     int       21h            ; tisk znaku na tisk rnu
                   inc       dl             ; zvìçen¡ znaku
                   loop      znak           ; dalç¡ znak na ý dku k tisku
                   mov       dl,13          ; znak CR
                   int       21h            ; tisk znaku CR
                   mov       dl,10          ; znak LF
                   int       21h            ; tisk znaku LF
                   inc       bl             ; zvìçen¡ znaku pro dalç¡ ý dek
                   cmp       bl,128-80      ; je ji§ zak zanì znak ?
                   jl        radek          ; tisk dalç¡ho ý dku
                                            ; konec programu



ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿ6ÿH ÿ(ÿ6ÿ)  - pý¡mì vstup/vìstup znaku na konzolu

    vstup:    AH = 06H
              DL = FFH            - vstup znaku z kl vesnice (neŸek )
                   jin  hodnota   - znak k vìstupu na displej

    vìstup:   AL = znak z kl vesnice (pokud je vstup z kl vesnice DL=FFH)
              ZF = (ovlivnØn, pokud je vstup z kl vesnice - tj. DL=FFH)
                   0 (NZ) - pýijat znak z kl vesnice (AL = znak)
                   1 (ZR) - nen¡ pýipraven znak z k vesnice (AL = 0)

    Pokud  je  v  registru  DL  ulo§ena  hodnota  FFH, je prov dØn vstup ze
standardn¡ho  vstupn¡ho  zaý¡zen¡  (obvykle  kl vesnice), neŸek  na pý¡chod
znaku.  Funkce  testuje, zda je pýipraven znak ze vstupn¡ho zaý¡zen¡. Pokud
ano,  je  znak  ulo§en do registru AL a je vynulov n pý¡znak nuly ZF. Pokud
nen¡  pýipraven znak, je pý¡znak ZF nastaven a obsah registru AL je nulovì.
Pýi vstupu znaku nen¡ prov dØno echo na vìstupn¡ zaý¡zen¡ (displej).

    Pokud  je v registru DL ulo§ena jin  hodnota ne§ FFH, je obsah registru
pova§ov n  za  znak,  kterì  m   bìt vysl n na standardn¡ vìstupn¡ zaý¡zen¡
(displej).

    Pokud  je  pýi vstupu znaku navr cena v registru AL nula (a pokud je to
platnì  znak,  tj.  pý¡znak ZF je vynulov n - tj. plat¡ podm¡nka NZ), jde o
zvl çtn¡  ý¡d¡c¡  znak  (napý.  funkŸn¡  nebo  kurzorov   kl vesa).  Druhìm
vyvol n¡m   t‚to  funkce  je  navr cena  druh   Ÿ st  speci ln¡ho  znaku  -
orientaŸn¡ k¢d kl vesy (viz tabulku k¢d… kl ves).

    Funkce neprov d¡ detekci kombinace kl ves <Ctrl>-<Break> (<Ctrl>-C).

    Pýi  vìstupu  znaku  se  prov dØj¡  ý¡d¡c¡ k¢dy BEL (07H) = p¡pnut¡, BS
(08H)  =  krok  kurzoru  zpØt  a  vymaz n¡  posledn¡ho  znaku,  HT  (09H) =
tabel tor,  LF  (0AH)  =  pýesun  na n sleduj¡c¡ ý dek, FF (0CH) = vymaz n¡
obrazovky, CR (0DH) = pýechod na zaŸ tek ý dku a pýi nainstalovan‚m driveru
obrazovky ANSI.SYS t‚§ ESC (1BH) = speci ln¡ ý¡d¡c¡ funkce.

Pý¡klad: N sleduj¡c¡ pý¡klad vypisuje na obrazovce k¢dy kl ves v HEX tvaru.
         Pokud  je  stisknuta  speci ln¡ kl vesa (generuje prvn¡ bajt = 0),
         zobraz¡  se  nejdý¡ve  znak  "*" a potom jej¡ orientaŸn¡ k¢d v HEX
         tvaru. UkonŸen¡ programu je mo§n‚ pomoc¡ kl vesy <Esc>.

         cyklus:  mov       ah,6            ; funkce vstupu znaku z konzoly
                  mov       dl,0ffh
                  int       21h             ; vstup znaku z konzoly
                  jz        cyklus          ; nebyl zad n § dnì znak (Ÿek )
                  test      al,al           ; test - je AL = 0 ?
                  jnz       cykl2           ; AL nen¡ = 0
                  mov       dl,'*'          ; oznaŸen¡ rozç¡ýen‚ho k¢du
                  jmp       short cykl3     ; tisk prefixu "*"
         cykl2:   cmp       al,27           ; je znak <Esc> ?
                  jz        konec           ; konec programu
                  call      bajt            ; tisk bajtu v AL v HEX tvaru
                  mov       dl,13           ; znak CR
                  int       21h             ; tisk znaku CR
                  mov       dl,10           ; znak LF
         cykl3:   int       21h             ; tisk znaku LF
                  jmp       short cyklus
                                            ; podprogram tisku bajtu HEX
         bajt:    push      ax              ; znak k vìstupu
                  ror       al,1            ; rotace AL o 4 bity vpravo
                  ror       al,1
                  ror       al,1
                  ror       al,1
                  call      hex             ; tisk znaku HEX
                  pop       ax              ; n vrat znaku k tisku
         hex:     and       al,0fh          ; ni§ç¡ tetr da znaku
                  add       al,90h          ; pýevod na znak HEX
                  daa
                  adc       al,40h
                  daa
                  mov       ah,6            ; funkce pro vìstup znaku
                  mov       dl,al           ; znak k vìstupu na konzolu
                  int       21h             ; vìstup znaku na konzolu
                  ret
         konec:                             ; konec programu




ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿ7ÿH ÿ(ÿ7ÿ)  - ý¡zenì vstup znaku z konzoly bez echa

    vstup:    AH = 07H

    vìstup:   AL = znak ze standardn¡ho vstupn¡ho zaý¡zen¡

    Funkce  Ÿek   na  pý¡chod  znaku  se  standardn¡ho  vstupn¡ho  zaý¡zen¡
(obvykle   konzola).   Neprov d¡   echo   a   nekontroluje   zad n¡  kl ves
<Ctrl>-<Break>  (<Ctrl>-C)  -  pýi  zad n¡  kombinace kl ves <Ctrl>-<Break>
(<Ctrl>-C) navr t¡ hodnotu k¢du 03H.

    Pokud  je pýi vstupu znaku navr cena v registru AL nula, jde o zvl çtn¡
ý¡d¡c¡  znak  (napý. funkŸn¡ nebo kurzorov  kl vesa). Druhìm vyvol n¡m t‚to
funkce  je  navr cena druh  Ÿ st speci ln¡ho znaku - orientaŸn¡ k¢d kl vesy
(viz tabulku k¢d… kl ves).

    Pou§ijte funkci DOS 0BH k testov n¡ vstupn¡ho statutu.



ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿ8ÿH ÿ(ÿ8ÿ)  - vstup znaku z konzoly bez echa

    vstup:    AH = 08H

    vìstup:   AL = znak z konzoly

    Funkce  Ÿek   na  pý¡chod  znaku  se  standardn¡ho  vstupn¡ho  zaý¡zen¡
(obvykle   konzola).   Neprov d¡   echo,   kontroluje  vçak  zad n¡  kl ves
<Ctrl>-<Break> (<Ctrl>-C).

    Pokud  je pýi vstupu znaku navr cena v registru AL nula, jde o zvl çtn¡
ý¡d¡c¡  znak  (napý. funkŸn¡ nebo kurzorov  kl vesa). Druhìm vyvol n¡m t‚to
funkce  je  navr cena druh  Ÿ st speci ln¡ho znaku - orientaŸn¡ k¢d kl vesy
(viz tabulku k¢d… kl ves).

Pozn.: Jedinì  rozd¡l mezi touto funkc¡ a funkc¡ 07H je ten, §e tato funkce
       prov d¡  kontrolu zad n¡ kombinace kl ves <Ctrl>-<Break> (<Ctrl>-C),
       pýi detekci t‚to kombinace kl ves provede pýeruçen¡ INT 23H.




ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿ9ÿH ÿ(ÿ9ÿ)  - tisk ýetØzce

    vstup:    AH = 09H
              DS:DX = ukazatel na textovì ýetØzec ukonŸenì znakem $

    vìstup:   § dnì

    Funkce  vyçle  zadanì  ýetØzec  znak…  na standardn¡ vìstupn¡ zaý¡zen¡.
üetØzec  mus¡  bìt  ukonŸen  znakem  $ (symbol dolaru). Tento znak nen¡ ji§
zobrazen.  Funkce  nen¡  tedy  vhodn  pro zobrazen¡ ýetØzc…, kter‚ obsahuj¡
symbol  dolaru  $,  vçechny ostatn¡ znaky, vŸetnØ ý¡d¡c¡ch, jsou zobrazeny.
Kúvìstupu  textu  vŸetnØ  znaku  dolaru  $  m…§ete  pou§¡t  funkci  DOS 40H
(súidentifik torem souboru BX=0), kter  umo§åuje vìstup textu zadan‚ d‚lky.

    Pýi  vìstupu  znaku  se  prov dØj¡  ý¡d¡c¡ k¢dy BEL (07H) = p¡pnut¡, BS
(08H)  =  krok  kurzoru  zpØt  a  vymaz n¡  posledn¡ho  znaku,  HT  (09H) =
tabel tor,  LF  (0AH)  =  pýesun  na n sleduj¡c¡ ý dek, FF (0CH) = vymaz n¡
obrazovky, CR (0DH) = pýechod na zaŸ tek ý dku a pýi nainstalovan‚m driveru
obrazovky ANSI.SYS t‚§ ESC (1BH) = speci ln¡ ý¡d¡c¡ funkce. Norm ln¡ zp…sob
odý dkov n¡  textu  (tj. pýechod na novì ý dek) je vysl n¡ dvojice ý¡d¡c¡ch
k¢d… CR (0DH) a LF (0AH).

    Funkce   prov d¡   kontrolu   zad n¡  kombinace  kl ves  <Ctrl>-<Break>
(<Ctrl>-C), pýi detekci t‚to kombinace kl ves provede pýeruçen¡ INT 23H.

Pý¡klad: Tento pý¡klad vytiskne na obrazovce jednoduchì obrazec.

                   mov       dx,offset text ; text k tisku
                   mov       cx,10          ; poŸet ý dk… k tisku
                   mov       ah,9           ; funkce tisku ýetØzce
         cyklus:   int       21h            ; tisk ýetØzce od adresy DS:DX
                   inc       dx             ; zvìçen¡ ukazatele ýetØzce
                   loop      cyklus         ; dalç¡ ý dek k tisku
                   mov       ah,4ch         ; ukonŸen¡ programu
                   int       21h

         text      db        '0123456789',13,10,'$'   ; tisknutì ýetØzec




ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿAÿH ÿ(ÿ1ÿ0ÿ) - vstup textu ze vstupn¡ho zaý¡zen¡

    vstup:    AH = 0AH
              DS:DX = ukazatel  na  vstupn¡  vyrovn vac¡ pamØœ

    vìstup:   § dnì (n vrat informac¡ ve vstupn¡m bufferu)
              (navr ceno AL = ukonŸovac¡ znak 0DH)

    Funkce  Ÿte  ýetØzec  znak…  ze  standardn¡ho  vstupn¡ho zaý¡zen¡ a§ po
zad n¡  kl vesy  <Enter>  (znak  s k¢dem 0DH = 13) nebo po zaplnØn¡ vstupn¡
vorovn vac¡  pamØti  (tj.  je zad n poŸet znak… MAX-1, kde MAX je maxim ln¡
poŸet  znak…  nastavenì  v  prvn¡m  bajtu vyrovn vac¡ pamØti). Pýi zad v n¡
znak…  ze  vstupn¡ho  zaý¡zen¡  (kl vesnice) prov d¡ echo znak… na vìstupn¡
zaý¡zen¡  (displej).  Znaky  (vŸetnØ ukonŸovac¡ho znaku <Enter> = 0DH) jsou
ukl d ny do bufferu DS:DX poŸ¡naje offsetem 02H (týet¡ bajt).

    Struktura vstupn¡ho bufferu textu:

         offset 00H (1.bajt): (hodnota  1  a§ 254) maxim ln¡ poŸet znak… ve
                              vyrovn vac¡  pamØti  vŸetnØ  znaku CR (0DH) -
                              tuto  hodnotu  mus¡  u§ivatel  nastavit  pýed
                              vyvol n¡m funkce.
         offset 01H (2.bajt): skuteŸnì  poŸet zadanìch znak… textu bez CR -
                              tato hodnota je nastavena funkc¡
         offset 02H (3.bajt): vyrovn vac¡   pamØœ;  mus¡  bìt  alespoå  tak
                              dlouh , jak ud v  1.bajt.

    Maxim ln¡  poŸet  zadanìch znak… je omezen velikost¡ vstupn¡ho bufferu,
kter   je  ud na  prvn¡m  bajtem vstupn¡ho bufferu DS:DX (max. 255 zadanìch
znak… vŸetnØ CR). Tuto hodnotu nastavuje u§ivatel pýed vyvol n¡m funkce.

    Pýi n vratu je v bufferu DS:DX na offsetu 1 (tj. druhì bajt vyrovn vac¡
pamØti)  navr cen  poŸet  platnìch znak…, kter‚ byly zaznamen ny do bufferu
(bez koncov‚ho znaku CR - 0DH). Text je v§dy ukonŸen znakem CR

    Funkce   prov d¡   kontrolu   zad n¡  kombinace  kl ves  <Ctrl>-<Break>
(<Ctrl>-C), pýi detekci t‚to kombinace provede pýeruçen¡ INT 23H.

Pozn.: BØjem  zad v n¡  textu  pomoc¡  t‚to  funkce  jsou aktivn¡ editovac¡
       povely  DOS.  Znaky  obsa§en‚  v  bufferu  (vŸetnØ bajtu d‚lky) pýed
       vol n¡m   funkce  jsou  pou§ity  jako  doŸasn‚  a  povely  DOS  maj¡
       n sleduj¡c¡  £Ÿinek: Kl vesa <Esc> zobraz¡ znak \ a obnovuje editaci
       (navr t¡  ji  do p…vodn¡ho stavu), <F3> zobraz¡ celì doŸasnØ ulo§enì
       text  a§  po  konec, <F5> zobraz¡ znak @ a ulo§¡ souŸasnì ý dek jako
       doŸasnì  (tj.  lze  jej editovat), kl vesy <-- a --> ruç¡ a obnovuj¡
       znak z doŸasn‚ho textu atd.

       Pokud  se  buffer  napln¡  do kapacity bez jednoho bajtu, DOS odm¡t 
       vçechny  zad van‚  znaky  kromØ  ukonŸovac¡  kl vesy  <Enter> (resp.
       nØkterìch povel… editoru), ozìv  se zvukovì sign l chyby.



ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿBÿH ÿ(ÿ1ÿ1ÿ) - test stavu standardn¡ho vstupu

    vstup:    AH = 0BH

    vìstup:   AL = FFH  - je pýipraven znak ze vstupn¡ho zaý¡zen¡
                   00H  - nen¡ pýipraven znak ze vstupn¡ho zaý¡zen¡

    Funkce  kontroluje,  zda  je  pýipraven  znak ze standardn¡ho vstupn¡ho
zaý¡zen¡  (konzoly).  M…§e bìt pou§ita ke kontrole pýipravenosti znaku pýed
vstupem znaku z konzoly, kterì Ÿek  na zad n¡ znaku (funkce 01H, 07H, 08H).

    Funkce   prov d¡   kontrolu   zad n¡  kombinace  kl ves  <Ctrl>-<Break>
(<Ctrl>-C),  pýi  detekci  t‚to  kombinace  provede pýeruçen¡ INT 23H. Tato
funkce   je  nejvhodnØjç¡  metodou  k  testov n¡  zad n¡  kombinace  kl ves
<Ctrl>-<Break>  (<Ctrl>-C)  pýi  dlouhìch vìpoŸtech programu kter‚ norm lnØ
neprov dØj¡ § dn‚ vstupnØ/vìstupn¡ operace, neboœ nem  § dn‚ dalç¡ vedlejç¡
£Ÿinky.




ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿCÿH ÿ(ÿ1ÿ2ÿ) - vymaz n¡ vstup. bufferu a proveden¡ funkce

    vstup:    AH = 0CH
              AL = funkce, kter  se m  prov‚st (01H, 06H, 07H, 08H, 0AH)
                   jak koliv jin  hodnota - neprov d¡ se dalç¡ zpracov n¡

    vìstup:   AL = zadanì znak (pokud vzta§n  funkce nebyla 0AH)
                 = 0, pokud nebyla v AL § dn  funkce kl vesnice

    Funkce  vyma§e vçechny znaky ze vstupn¡ vyrovn vac¡ pamØti znak…, potom
provede specifikovanou funkci vstupu (Ÿ¡slo funkce v registru AL). Pou§ijte
tuto  funkci  pokud  si  chcete  bìt  jisti,  §e program pýijme novì znak z
kl vesnice ani§ by pou§il znaky zadan‚ bØhem dý¡vØjç¡ch operac¡. Obvykle se
tato  funkce  pou§¡v   napý. pýi ohl çen¡ chybov‚ho stavu a Ÿek n¡ na dalç¡
volby u§ivatele.

Pozn.: Pýi  zad n¡  funkce  06H  nemus¡ prov dØt funkce pouze vstup znaku z
       kl vesnice,  ale  m…§e  prov‚st  i vìstup znaku na vìstupn¡ zaý¡zen¡
       (viz detaily funkce 06H).

       Pokud  chcete  vynulovat  vstupn¡  buffer  bez  proveden¡  jak‚koliv
       operace (bez Ÿten¡ znaku), zadejte funkci AL = 06H a DL = 0FFH (test
       pýipravenosti znaku z kl vesnice).




ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿDÿH ÿ(ÿ1ÿ3ÿ) - reset disku

    vstup:    AH = 0DH

    vìstup:   § dnì

    Funkce  vypr zdn¡  vçechny  vyrovn vac¡  pamØti  soubor…,  soubory vçak
neuzav¡r .  Zapisuje  modifikovan‚  vyrovn vac¡  pamØti  na  disk  a oznaŸ¡
vçechny  vnitýn¡  vyrovn vac¡  pamØti  jako voln‚. K zajiçtØn¡ ulo§en¡ zmØn
polo§ky  souboru  v adres ýi pou§ijte pýed vyvol n¡m t‚to funkce nØkterou z
funkc¡  pro  uzavýen¡ souboru (10H nebo 3EH). Funkce se nemus¡ vyvolat pýed
vìmØnou  disku,  jestli§e  vçechny  soubory,  v  nich§ doçlo ke zmØnØ, byly
uzavýeny. Obvykle se tato funkce pou§¡v  k zajiçtØn¡ zn m‚ho stavu syst‚mu.
Tuto funkci by mØly volat programy obsluhuj¡c¡ <Ctrl>-<Break>.




ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿEÿH ÿ(ÿ1ÿ4ÿ) - vìbØr aktivn¡ho disku

    vstup:    AH = 0EH
              DL = Ÿ¡slo aktivn¡ho disku (0 = A, 1 = B atd.)

    vìstup:   AL = poŸet logickìch disk… v syst‚mu

    Funkce nastav¡ aktivn¡ disk a navr t¡ poŸet disk… v syst‚mu libovoln‚ho
typu, vŸetnØ pevnìch disk… a logickìch disk….

Pozn.: Disketov   jednotka  v  jednodisketov‚m  syst‚mu  se poŸ¡t  jako dva
       logick‚ disky A: a B:.

       DOS  verze  3.x  a  pozdØjç¡  verze  hl s¡  5 logickìch disk…, pokud
       neobsahuje CONFIG.SYS jin‚ pýiýazen¡ pomoc¡ LASTDRIVE.

       K  urŸen¡  poŸtu  fyzickìch  disketovìch jednotek v syst‚mu pou§ijte
       pýeruçen¡  INT  11H  (17).  K  urŸen¡  poŸtu pevnìch disk… v syst‚mu
       pou§ijte pýeruçen¡ INT 13H (19)/funkci 08H.

       Pou§ijte  funkci  DOS  19H  (poskytnut¡  aktivn¡ho  disku), pokud se
       chcete pýesvØdŸit o spr vnosti operace.




ÿFÿuÿnÿkÿcÿeÿ ÿ0ÿFÿH ÿ(ÿ1ÿ5ÿ) - otevýen¡ souboru s pou§it¡m FCB

    vstup:    AH = 0FH
              DS:DX = ukazatel na neotevýenì FCB souboru

    vìstup:   AL = 00H - soubor £spØçnØ otevýen (a FCB spr vnØ vyplnØn)
                   FFH - soubor nenalezen nebo jej nelze otevý¡t

    Funkce  otevýe existuj¡c¡ soubor s pou§it¡m FCB souboru. DS:DX obsahuje
adresu  neotevýen‚ho  ý¡d¡c¡ho  bloku  FCB.  Jmenovanì  soubor  se  hled  v
aktivn¡m  adres ýi aktivn¡ho disku nebo disku specifikovan‚ho v polo§ce FCB
(tj.  prvn¡  bajt  FCB:  0=aktivn¡  disk; 1=A; 2=B; ...). Nalezne-li se pro
soubor  vyhovuj¡c¡ adres ýov  polo§ka, AL vr t¡ hodnotu 0, soubor se otevýe
v  kompatibiln¡m pý¡stupov‚m m¢du (viz funkce DOS 3DH - otevýen¡ souboru) a
FCB se vypln¡ n sledovnØ:

    - Je-li  k¢d  diskov‚  jednotky 0 (implicitn¡ disk), zmØn¡ se pý¡sluçn 
      polo§ka FCB na aktivn¡ pou§itì disk (1=A, 2=B, atd.).

    - Polo§ka aktivn¡ blok se vynuluje.

    - D‚lka z znamu se nastav¡ na syt‚movou implicitn¡ hodnotu 128 (80H).

    - D‚lka  souboru,  datum  a Ÿas posledn¡ho z pisu do souboru se nastav¡
      podle adres ýov‚ polo§ky.

    Pýed  proveden¡m sekvenŸn¡ diskov‚ operace se souborem se mus¡ nastavit
polo§ka  aktivn¡ z znam. Pýed proveden¡m diskov‚ operace s pý¡mìm pý¡stupem
se  souborem  se  mus¡  nastavit  polo§ka  relativn¡  z znam. Nevyhovuje-li
implicitn¡  d‚lka  z znamu  128  bajt…, je nutno ji nastavit na po§adovanou
d‚lku pýed proveden¡m n sleduj¡c¡ diskov‚ operace.




ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿ0ÿH ÿ(ÿ1ÿ6ÿ) - uzavýen¡ souboru s pou§it¡m FCB

    vstup:    AH = 10H
              DS:DX = ukazatel na otevýenì FCB souboru

    vìstup:   AL = 00H - soubor £spØçnØ uzavýen
                   FFH - soubor nenalezen


    Funkce  uzavýe  soubor  a  ulo§¡ jeho adres ýovou polo§ku do adres ýe s
pou§it¡m FCB. Tato funkce se mus¡ vyvolat po provedenìch zmØn ch v souboru,
aby se aktualizovala adres ýov  polo§ka.

    Polo§ka  adres ýe  mus¡ bìt na sv‚m p…vodn¡m m¡stØ v souŸasn‚m aktivn¡m
adres ýi a disku, z kter‚ho byl soubor otevýen.

    Je-li  pro  soubor  nalezena  odpov¡daj¡c¡ adres ýov  polo§ka, um¡stØn¡
souboru  se  porovn   s  odpov¡daj¡c¡mi polo§kami v FCB. Pokud je to nutn‚,
aktualizuje  se adres ýov  polo§ka podle FCB a vyrovn vac¡ pamØœ souboru se
vypr zdn¡. AL vr t¡ hodnotu 0.

Pozn.: Pokud  uzav¡r te soubor na disketØ, DOS se sna§¡ nejdý¡ve urŸit, zda
       byla  v disketov‚ jednotce vymØnØna disketa. Pokud ano, navrac¡ v AL
       hodnotu  0FFH.  UrŸov n¡  vìmØny disket nen¡ spolehliv‚ v dý¡vØjç¡ch
       verz¡ch  DOS  ne§  3.0;  pou§it¡  t‚to  funkce  v DOS 2.x pýi vìmØnØ
       diskety m…§e m¡t za n sledek zniŸen¡ obsahu diskety.



ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿ1ÿH ÿ(ÿ1ÿ7ÿ) - nalezen¡ prvn¡ho souboru s pou§it¡m FCB

    vstup:    AH = 11H
              DS:DX = ukazatel na neotevýenì FCB souboru

    vìstup:   AL = 00H - soubor nalezen (a DTA vyplnØna)
                   FFH - § dnì soubor nenalezen

    Funkce  hled   v  aktivn¡m  adres ýi  prvn¡ vyhovuj¡c¡ soubor. DS:DX je
adresa  neotevýen‚ho FCB, kterì m…§e obsahovat konvenŸn¡ znaky (tj. * a ?).
K  prohled v n¡ skrytìch nebo syst‚movìch soubor… mus¡ DX ukazovat na prvn¡
bajt rozç¡ýen‚ho FCB.
þ
Pozn.: Pýedpokl dan‚  pou§it¡  t‚to slu§by je ovl d n¡ soubor… obsahuj¡c¡ch
       maskovac¡ znaky "?" ve sv‚m jm‚nØ (univerz ln¡ znak - na t‚to pozici
       m…§e bìt uveden jakìkoliv znak). Tato funkce zah j¡ porces hled n¡ a
       funkce  12H  (18)  pokraŸuje  v  hled n¡  n sleduj¡c¡ch vyhovuj¡c¡ch
       soubor….

       Funkci  29H  (rozlo§en‚  jm‚no  souboru)  lze  pou§¡t  pro vytv ýen¡
       neotevýen‚ho FCB souboru v pý¡pravØ pro hled n¡.

       Pokud  je  soubor nalezen, vytvoý¡ se na souŸasn‚ adrese pro diskov‚
       pýenosy   (DTA)   neotevýenì   FCB   stejn‚ho  typu  (norm ln¡  nebo
       rozç¡ýenì).  Pýed  vol n¡m t‚to funkce je potýeba se pýesvØdŸit, zda
       je dostatek m¡sta rezervovan‚ho na DTA pro CFB; pokud nen¡, je nutno
       nastavit pomoc¡ funkce 1AH novou adresu DTA.

       Pokud funkce hled n¡ pou§¡v  rozç¡ýenì FCB (FCBE), je FCBE ulo§en na
       adrese  DTA s nastavenìm bitem identifik toru (offset -7) na hodnotu
       0FFH.

       Rozsah  hled n¡ m…§ete ý¡dit zad n¡m bajtu atribut… v rozç¡ýen‚m FCB
       (offset  -1).  Pokud  je bajt atribut… nastaven na 00H, hled  funkce
       pouze  norm ln¡ soubory (tj. mohou m¡t nastaven pouze atribut "pouze
       Ÿten¡"  a/nebo  "archivn¡"). Pokud je v bajtu atributu specifikov na
       nØjak   kombinace  atribut… "skrytì soubor", "syst‚movì soubor" nebo
       "adres ý",  budou  se  vyhled vat  norm ln¡  soubory  a tak‚ vçechny
       soubory  s  tØmito  atributy. Pokud je v bajtu atribut… specifikov n
       atribut   "n vØçt¡  disku",  bude  funkce  hledat  pouze  polo§ku  s
       atributem  "n vØçt¡  disku".  Atributy  "pouze  Ÿten¡"  a "archivn¡"
       nemaj¡ vliv na hled n¡.

         Struktura bajtu atribut… souboru:
        ÚÄÂÄÂÄÂÄÂÄÂÄÂÄÂÄ¿
        ³7 6 5 4 3 2 1 0³
        ÀÂÁÂÁÂÁÂÁÂÁÂÁÂÁÂÙ bit
         ³ ³ ³ ³ ³ ³ ³ ÀÄ> 0 (  1): pouze Ÿten¡ souboru (Read-only "R/O")
         ³ ³ ³ ³ ³ ³ ÀÄÄÄ> 1 (  2): skrytì soubor (Hidden "HID")
         ³ ³ ³ ³ ³ ÀÄÄÄÄÄ> 2 (  4): syst‚movì soubor (System "SYS")
         ³ ³ ³ ³ ÀÄÄÄÄÄÄÄ> 3 (  8): n vØçt¡ disku (Volume Label "VOL")
         ³ ³ ³ ÀÄÄÄÄÄÄÄÄÄ> 4 ( 16): adres ý (Directory "DIR")
         ³ ³ ÀÄÄÄÄÄÄÄÄÄÄÄ> 5 ( 32): archivn¡ soubor (Archive "ARC")
         ³ ÀÄÄÄÄÄÄÄÄÄÄÄÄÄ> 6 ( 64): rezervov no (mus¡ bìt nastaven na 0)
         ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ> 7 (128): rezervov no (mus¡ bìt nastaven na 0)

            - bli§ç¡ popis atribut… viz "Adres ýov  polo§ka"

       FCB  jsou poz…statky z DOS 1. Je vìhodnØjç¡ pou§¡t k hled n¡ soubor…
       funkce 4EH a 4FH.




ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿ2ÿH ÿ(ÿ1ÿ8ÿ) - nalezen¡ dalç¡ho souboru s pou§it¡m FCB

    vstup:    AH = 12H
              DS:DX = ukazatel  na  neotevýenì FCB souboru specifikovanì ve
                      funkci 11H nebo 12H

    vìstup:   AL = 00H - dalç¡ soubor nalezen
                   FFH - soubor nenalezen

    Funkce  hled   v  aktivn¡m  adres ýi  dalç¡  vyhovuj¡c¡  soubor.  DS:DX
obsahuje adresu FCB specifikovan‚ho v pýedchoz¡m hled n¡ pomoc¡ funkce 11H.
Funkce  12H  se  pou§¡v   po  funkci  11H  (vyhled n¡  prvn¡ho vyhovuj¡c¡ho
souboru) k nalezen¡ dalç¡ch vyhovuj¡c¡ch adres ýovìch polo§ek.

Varov n¡: Informace  potýebn‚  funkc¡  12H  jsou  zniŸeny  jakoukoliv jinou
          operac¡  pou§¡vaj¡c¡  vytv ýen¡  FCB  souboru  (jako napý. funkce
          11H).  Proto,  pokud chcete hledat v¡ce soubor… a prov dØt v nich
          t‚§  vstupnØ/vìstupn¡  operace, mus¡te ulo§it informace k hled n¡
          tak, §e ulo§¡te FCB.


Pý¡klad: N sleduj¡c¡  pý¡klad  prov d¡  vìpis soubor… aktivn¡ho adres ýe na
         aktivn¡m  disku (podobnØ jako pý¡kaz DIR) na obrazovku a to v pØti
         sloupc¡ch.

              mov       ah,1ah              ; funkce nastaven¡ DTA
              mov       dx,offset buffer    ; adresa bufferu jako DTA
              int       21h                 ; nastaven¡ adresy DTA
              mov       ah,11h              ; funkce nalezen¡ prvn¡ polo§ky
              mov       dx,offset fcb       ; adresa FCB
              int       21h                 ; nalezen¡ prvn¡ polo§ky FCB
              inc       al                  ; je AL=FFH ? (tj. nenalezen)
              mov       dx,offset neni      ; textchybov‚ho hl çen¡
              jz        konec1              ; nen¡ soubor v adres ýi
    vypis:    mov       si,offset buffer+1  ; adresa FCB nalezen‚ho souboru
              mov       cx,8                ; poŸet znak… jm‚na
              mov       ah,2                ; funkce vìstupu znaku
    jmeno:    mov       dl,[si]             ; znak jm‚na souboru k tisku
              int       21h                 ; tisk znaku na displej
              inc       si                  ; dalç¡ znak jm‚na souboru
              loop      jmeno               ; dalç¡ znak jm‚na
              mov       dl,"."              ; oddØlovac¡ znak teŸky
              int       21h                 ; tisk oddØlovac¡ teŸku
              mov       cx,3                ; poŸet znak… rozç¡ýen¡ souboru
    typ:      mov       dl,[si]             ; znak typu souboru k tisku
              int       21h                 ; tisk znaku typu souboru
              inc       si                  ; dalç¡ znak typu souboru
              loop      typ                 ; tisk dalç¡ho znaku typu
              mov       dl," "              ; oddØlovac¡ mezera
              int       21h                 ; tisk 4 oddØlovac¡ch mezer
              int       21h
              int       21h
              int       21h
              mov       ah,12h              ; funkce vyhled n¡ dalç¡ho s.
              mov       dx,offset fcb       ; adresa FCB
              int       21h                 ; nalezen¡ dalç¡ho souboru
              inc       al                  ; je AL=FFH ? (tj. nenalezen)
              jnz       vypis               ; je dalç¡ soubor
              mov       dx,offset tiskcr    ; odý dkov n¡ textu
    konec1:   mov       ah,9                ; funkce tisku textu
              int       21h                 ; tisk textu
              jmp       konec               ; konec programu

    neni      db        'V adres ýi nen¡ § dnì soubor.'
    tiskcr    db        13,10,'$'
    fcb       db        0,"???????????"
              db        25 dup (0)
    buffer    db        128 dup (0)

    konec:                                      ; konec programu




ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿ3ÿH ÿ(ÿ1ÿ9ÿ) - zruçen¡ souboru s pou§it¡m FCB

    vstup:    AH = 13H
              DS:DX = ukazatel na neotevýenì FCB souboru

    vìstup:   AL = 00H - soubor nalezen a zruçen
                   FFH - soubor nenalezen

    Funkce  zruç¡  vçechny  soubory  s  aktivn¡m  adres ýi,  kter‚  splåuj¡
podm¡nky dan‚ FCB souboru.

   Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va vytv ýen¡ CREATE.

Pozn.: Specifikace  souboru  m…§e obsahovat znaky "?" nahrazuj¡c¡ jakìkoliv
       znak ve specifikaci jm‚na souboru.

       Soubory read-only nebudou touto funkc¡ zruçeny.





ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿ4ÿH ÿ(ÿ2ÿ0ÿ) - sekvenŸn¡ Ÿten¡ ze souboru s pou§it¡m FCB

    vstup:    AH = 14H
              DS:DX = ukazatel na otevýenì FCB

    vìstup:   AL = 00H - Ÿten¡ probØhlo £spØçnØ
                   01H - nalezen konec souboru, § dn  data nepýeŸtena
                   02H - prostor DTA pý¡liç malì (nebo pýelom segmentu)
                   03H - nalezen konec souboru, pýeŸtena Ÿ st dat

    Funkce  Ÿte  sekvenŸnØ  n sleduj¡c¡ z znam souboru do bufferu na adrese
DTA,  po  Ÿten¡  inkrementuje  ukazatele v FCB souboru na dalç¡ z znam (tj.
inkrementuje aktivn¡ blok a aktivn¡ z znam). Pýed vyvol n¡m funkce mus¡ bìt
v FCB nastaveny polo§ky aktivn¡ blok a aktivn¡ z znam.

    Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va Ÿten¡ READ.

Pozn.: ¬¡sko  sekvenŸn¡ho  z znamu  je  odvozeno  z  hodnot aktivn¡ho bloku
       (offset  0CH)  a  aktivn¡ho z znamu (offset 20H) v FCB souboru. Tyto
       polo§ky  FCB  jsou  automaticky  zaznamen ny po operaci Ÿten¡. PoŸet
       Ÿtenìch bajt… je pou§it z polo§ky velikosti z znamu na offsetu 0EH v
       FCB.

       Data  jsou Ÿtena do bufferu na adrese oznaŸen‚ jako Adresa diskov‚ho
       pýenosu  DTA.  Pokud by pýenos dat mohl zp…sobit pýeteŸen¡ segmentu,
       je vygenerov na chyba 2.

       Pokud  je  nalezen konec souboru jeçtØ pýed naŸten¡m cel‚ho z znamu,
       je zbytek z znamu doplnØn nulami a§ do pln‚ velikosti z znamu.

Pý¡klad: N sleduj¡c¡  program  vyp¡çe  na obrazovku z aktivn¡ho adres ýe na
         aktivn¡m  disku  textovì  soubor  DIRINFO  (pokud existuje), kterì
         obsahuje  informace o nastaven‚m adres ýi (tento informaŸn¡ soubor
         pou§¡v  t‚§ Norton Commander).

              mov       ah,1AH              ; funkce nastaven¡ DTA
              mov       dx,offset buffer    ; adresa bufferu
              int       21h                 ; nastaven¡ adresy DTA
              mov       ah,0fh              ; funkce otevýen¡ souboru
              mov       dx,offset fcb       ; adresa fcb
              int       21h                 ; otevýen¡ souboru
              inc       al                  ; je AL = FFH ? (tj. nenalezen)
              jz        konec               ; konec programu
              mov       [fcb+14],1          ; nastaven¡ d‚lky z znamu na 1
    cteni:    mov       dx,offset fcb       ; adresa fcb
              mov       ah,14h              ; funkce sekvenŸn¡ho Ÿten¡
              int       21h                 ; sekvenŸn¡ Ÿten¡ z znamu
              or        al,al               ; je spr vn‚ Ÿten¡ ?
              jnz       zavri               ; konec - uzavreni souboru
              mov       dl,[buffer]         ; pýeŸtenì znak
              cmp       dl,1ah              ; je znak konce souboru ?
              je        zavri               ; konec souboru - uzavýi
              mov       ah,2                ; funkce vìstupu znaku
              int       21h                 ; zobrazen¡ znaku
              jmp       short cteni         ; dalç¡ znak ze souboru
    zavri:    mov       ah,10h              ; funkce uzavýen¡ souboru
              mov       dx,offset fcb       ; adresa fcb
              int       21h                 ; uzavýen¡ souboru
              jmp       short konec         ; konec programu

    fcb       db        0,"DIRINFO    "     ; polo§ka FCB souboru
              db        25 dup (0)
    buffer    db        1 dup (?)           ; z sobn¡k 1 znaku

    konec:                                  ; konec programu





ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿ5ÿH ÿ(ÿ2ÿ1ÿ) - sekvenŸn¡ z pis do souboru s pou§it¡m FCB

    vstup:    AH = 15H
              DS:DX = ukazatel na otevýenì FCB

    vìstup:   AL = 00H - z pis probØhl £spØçnØ
                   01H - disk je plnì
                   02H - prostor DTA pý¡liç malì (nebo pýelom segmentu)

    Funkce zapisuje sekvenŸnØ data z bufferu na adrese DTA do n sleduj¡c¡ho
z znamu  souboru,  po  z pisu inkrementuje ukazatele v FCB souboru na dalç¡
z znam (tj. inkrementuje aktivn¡ blok a aktivn¡ z znam).

    Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va z pisu WRITE.

Pozn.: ¬¡sko  sekvenŸn¡ho  z znamu  je  odvozeno  z  hodnot aktivn¡ho bloku
       (offset  0CH)  a  aktivn¡ho z znamu (offset 20H) v FCB souboru. Tyto
       polo§ky  FCB  jsou  automaticky zaznamen ny po operaci z pisu. PoŸet
       zapisovanìch  bajt… je pou§it z polo§ky velikosti z znamu na offsetu
       0EH v FCB.

       Data  jsou  zapisov na  na  disk  z  bufferu na adrese oznaŸen‚ jako
       Adresa  diskov‚ho  pýenosu  DTA.  Pokud  by pýenos dat mohl zp…sobit
       pýeteŸen¡ segmentu, je vygenerov na chyba 2.

       Pokud zapisovan  data nevypln¡ zapisovanì sektor, DOS ukl d  data do
       bufferu pro evenu ln¡ z pis pokud jsou data v bufferu nashrom §dØna.

       Pokud  m  specifikovanì soubor nastaven atribut ochrany proti z pisu
       Read-Only, z pis se neprovede.

Pý¡klad: Program  zde  uvedenì  odstraåuje tabel tory z textov‚ho souboru a
         nahrazuje  je  odpov¡daj¡c¡m  poŸtem  mezer.  Pýev dØnì  soubor se
         zad v   pýi  vyvol n¡  programu  jako  parametr za jm‚nem programu
         (pou§¡v   se  polo§ka  FCB  na adrese 005CH v prefixu programov‚ho
         segmentu).  Soubor  mus¡  bìt v aktivn¡m adres ýi (v aktivn¡m nebo
         uveden‚m  disku).  Jako  vìstupn¡  soubor  se  (pro  jednoduchost)
         vytvoý¡  soubor  stejnØ  pojmenovanì  jako  zdrojovì soubor, ale s
         oznaŸen¡m typu $$$.

                                            ; program pou§¡v  FCB souboru
                                            ; na adrese ES:005CH
         mov       ax,es                    ; datovì segment
         mov       ds,ax                    ; datovì segment
         mov       ax,cs                    ; segment programu
         mov       es,ax                    ; segment programu
         mov       si,5ch                   ; zdrojov  adresa
         mov       di,offset fcb            ; c¡lov  adresa
         mov       cx,12                    ; poŸet znak… jm‚na
         rep       movsb                    ; pýenos jm‚na souboru
         mov       si,5ch                   ; zdrojov  adresa FCB
         mov       di,offset fcbout         ; vìstupn¡ soubor
         mov       cx,9                     ; d‚lka - jen jm‚no
         rep       movsb                    ; pýenos jm‚na souboru
         mov       ax,cs                    ; segment programu
         mov       ds,ax                    ; segment programu
         mov       dx,offset buffer         ; buffer znaku souboru
         mov       ah,1ah                   ; funkce nastaven¡ adresy DTA
         int       21h                      ; nastaven¡ adresy DTA
         mov       dx,offset fcb            ; adresa FCB souboru k pýevodu
         mov       ah,0fh                   ; funkce pro otevýen¡ souboru
         int       21h                      ; otevýen¡ souboru
         inc       al                       ; byl soubor nalezen ?
         jz        hlaseni                  ; chybov‚ hl çen¡
         mov       word ptr [fcb+14],1      ; d‚lka z znamu = 1 znak
         mov       ah,16h                   ; funkce vytvoýen¡ souboru
         mov       dx,offset fcbout         ; vìstupn¡ soubor
         int       21h                      ; vytvoýen¡ souboru
         inc       al                       ; je voln‚ m¡sto ?
         jz        hlaseni                  ; nen¡ m¡sto v adres ýi
         mov       word ptr [fcbout+14],1   ; d‚lka z znamu = 1 znak
prevod:  mov       ah,14h                   ; funkce sekvenŸn¡ho Ÿten¡
         mov       dx,offset fcb            ; adresa fcb souboru
         int       21h                      ; Ÿten¡ znaku ze souboru
         or        al,al                    ; je chyba ?
         jnz       zavri                    ; konec - uzavýi soubor
         mov       al,[buffer]              ; znak ze souboru
         mov       cx,1                     ; poŸet znak… k z pisu
         cmp       al,0ah                   ; znak LF ?
         je        zapis                    ; z pis znaku LF
         cmp       al,0dh                   ; je znak CR ?
         jne       nenicr                   ; nen¡ znak CR
         mov       word ptr [pozice],0      ; vynulov n¡ pozice
         jmp       short zapis              ; z pis znaku
nenicr:  inc       word ptr [pozice]        ; zvìçen¡ pozice
         cmp       al,9                     ; znak tabel toru ?
         jne       zapis                    ; nen¡ - z pis znaku
         dec       word ptr [pozice]        ; n vrat pozice
         mov       ax,[pozice]              ; pozice znaku
         and       ax,0fff8h                ; nastaven¡ na pýedchoz¡ tabel.
         add       ax,8                     ; nastaven¡ na dalç¡ tabel tor
         mov       bx,ax                    ; £schova nov‚ pozice
         sub       ax,[pozice]              ; poŸet znak… k tabelaci
         mov       [pozice],bx              ; nov  pozice
         mov       cx,ax                    ; poŸet vlo§enìch mezer
         mov       al,' '                   ; oddØlovac¡ znak mezery
zapis:   mov       [buffer],al              ; znak k z pisu do souboru
         mov       dx,offset fcbout         ; vìstupn¡ soubor
         mov       ah,15h                   ; funkce z pisu znaku
znak:    int       21h                      ; z pis znaku
         or        al,al                    ; je chyba ?
         jnz       hlaseni                  ; chyba - hl çen¡ chyby
         loop      znak                     ; z pis dalç¡ho znaku
         jmp       short prevod             ; dalç¡ znak k pýevodu
zavri:   mov       ah,10h                   ; funkce uzavýen¡ souboru
         mov       dx,offset fcb            ; adresa fcb
         int       21h                      ; uzavýen¡ souboru
         mov       dx,offset fcbout         ; z lo§n¡ fcb
         int       21h
         jmp       short konec
hlaseni: mov       dx,offset chyba
         mov       ah,9
         int       21h
         jmp       short konec

chyba    db        'Chyba !',13,10,'$'      ; chybov‚ hl çen¡
pozice   dw        0                        ; Ÿ¡taŸ pozice na ý dku
buffer   db        1                        ; buffer znaku
fcbout   db        0,'        $$$'          ; vìstupn¡ soubor
         db        25 dup (?)
fcb      db        0,'           '          ; pýev dØnì soubor
         db        25 dup (?)
konec:                                      ; konec programu





ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿ6ÿH ÿ(ÿ2ÿ2ÿ) - vytvoýen¡ souboru s pou§it¡m FCB

    vstup:    AH = 16H
              DS:DX = ukazatel na neotevýenì FCB souboru

    vìstup:   AL = 00H - soubor £spØçnØ vytvoýen
                   FFH - soubor nevytvoýen (plnì adres ý)

    Funkce  vytvoý¡ a otevýe novì soubor s pou§it¡m FCB souboru nebo otevýe
ji§ existuj¡c¡ soubor s t¡m, §e jej zkr t¡ na nulovou d‚lku.

   Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va vytv ýen¡ CREATE.

Pozn.: Pou§it¡m  rozç¡ýen‚ho  FCB  m…§ete  pýiýadit  souboru  pýi  otevýen¡
       speci ln¡ atributy.

       Otevýen‚mu  souboru  je pýiýazena nulov  d‚lka. Proto se tato funkce
       pou§¡v  k otevýen¡ vìstupn¡ho souboru, zat¡mco funkce 0FH se pou§¡v 
       k otevýen¡ souboru ke Ÿten¡.

       Tato  funkce je poz…statkem z DOS v1.0. VìhodnØjç¡ je pou§¡t novØjç¡
       funkci k vytvoýen¡ souboru, jako je napý. funkce 3CH.



ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿ7ÿH ÿ(ÿ2ÿ3ÿ) - pýejmenov n¡ souboru s pou§it¡m FCB

    vstup:    AH = 17H
              DS:DX = ukazatel na FCB, kterì m  bìt modifikov n

    vìstup:   AL = 00H - operace probØhla £spØçnØ
                   FFH - operace  ne£spØçn  (polo§ka nenalezena nebo c¡lovì
                         soubor ji§ existuje)

   Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va vytv ýen¡ CREATE.

    Funkce  mØn¡  jm‚na  vçech  soubor… podle zadan‚ specifikace v aktivn¡m
adres ýi  na druh  specifikovan  jm‚na. Specifikace nov‚ho jm‚na souboru je
um¡stØna  v  FCB çest bajt… od konce prvn¡ho jm‚na (tj. na offsetu 11H=17 v
FCB).

Pozn.: V  prvn¡m  i  druh‚m  jm‚nØ souboru lze pou§¡t znaky "?" nahrazuj¡c¡
       jakìkoliv  znak  (v  druh‚m jm‚nØ m  znak "?" ten vìznam, §e znak na
       odpov¡daj¡c¡ pozici jm‚na nebude zmØnØn).

       Funkce  nepýejm‚nuje soubor na jm‚no, kter‚ v adres ýi ji§ existuje;
       v tom pý¡padØ se funkce pýeruç¡ a navr t¡ AL = FFH.

       Soubory  s  nastavenou  ochranou  proti  z pisu  nelze  touto funkc¡
       pýejmenovat.



ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿ8ÿH ÿ(ÿ2ÿ4ÿ) - rezervov no




ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿ9ÿH ÿ(ÿ2ÿ5ÿ) - poskytnut¡ aktivn¡ho disku

    vstup:    AH = 19H

    vìstup:   AL = Ÿ¡slo aktivn¡ho disku (0 = A, 1 = B, atd.)

    Funkce navr t¡ Ÿ¡slo aktivn¡ho disku.

Pozn.: ¬¡slo  disku  navr cen‚  touto  funkc¡  je o 1 menç¡ ne§ Ÿ¡sla disk…
       uv dØn   v jinìch funkc¡ch (napý. FCB souboru); mnoho funkc¡ pou§¡v 
       0 k oznaŸen¡ aktivn¡ho disku.




ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿAÿH ÿ(ÿ2ÿ6ÿ) - nastaven¡ adresy diskov‚ho pýenosu (DTA)

    vstup:    AH = 1AH
              DS:DX = nov  adresa diskovìch pýenos… DTA

    vìstup:   § dnì

    Adresa   diskov‚ho  pýenosu  DTA  (Disk  Transfer  Address)  je  adresa
vyrovn vac¡  pamØti,  do  kter‚  jsou  ukl d na  (nebo z n¡ Ÿtena) data pýi
diskov‚m  pýenosu  ze  souboru  (do  souboru).  Diskov‚  pýenosy se nemohou
pýepisovat  z  konce  segmentu  na  zaŸ tek,  ani nemohou pýet‚ct do jin‚ho
segmentu.  Proto  slu§by  pro  pýenosy  dat  v tØchto pý¡padech hl s¡ chybu
nedostaŸuj¡c¡ velikosti prostoru DTA.

Pozn.: Pokud nen¡ nastavena DTA jinak, pou§¡v  DOS jako aktivn¡ DTA prostor
       o  d‚lce  128  bajt…  na offsetu 80H v prefixu programov‚ho segmentu
       (PSP).

       Rezervujte  dostateŸnì prostor bufferu; pokud DOS zjist¡, §e by data
       pýi pýenosu pýetekla pýes okraj segmentu, abortuje diskovì pýenos.

       Tato  funkce  se  pou§¡v   s operacemi Ÿten¡ a z pisu pomoc¡ FCB a s
       operacemi  pro  nalezen¡ prvn¡ho a n sleduj¡c¡ho souboru pou§¡vaj¡c¡
       FCB.



ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿBÿH ÿ(ÿ2ÿ7ÿ) - poskytnut¡ informac¡ FAT aktivn¡ho disku

    vstup:    AH = 1BH

    vìstup:   AL = poŸet sektor… na blok
              CX = velikost sektoru v bajtech
              DX = celkovì poŸet blok… disku
              DS:BX = ukazatel na bajt popisovaŸe m‚dia (identifik tor FAT)

    zniŸen‚ registry: DS

    Funkce  navrac¡  charakteristiku  m‚dia  a  bajt  popisovaŸe  m‚dia pro
aktivn¡ disk (bajt popisovaŸe m‚dia specifikuje typ diskov‚ jednotky).

    Bajt popisovaŸe m‚dia (identifikaŸn¡ bajt FAT):

    Bajt popisovaŸe m‚dia je omezen na hodnoty F0H a§ FFH.
 
 ÉÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
 º  FFH  ³    oboustrann  disketa 5 1/4", 8 sektor…          º
 ÌÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
 º  FEH  ³    jednostrann  disketa 5 1/4", 8 sektor… nebo    º
 º       ³    jednostrann  disketa 8", 26 sektor… nebo       º
 º       ³    jednostrann  disketa 8", 8 sektor…             º
 ÌÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
 º  FDH  ³    oboustrann  disketa 5 1/4", 9 sektor… nebo     º
 º       ³    jednostrann  disketa 8", 26 sektor…            º
 ÌÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
 º  FCH  ³    jednostrann  disketa, 9 sektor…                º
 ÌÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
 º  F9H  ³    oboustrann  disketa 5 1/4", 15 sektor…         º
 º       ³    oboustrann  disketa 3 1/2", 9 sektor…          º
 ÌÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
 º  F8H  ³    pevnì disk                                     º
 ÌÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
 º  F0H  ³    oboustrann  disketa 3 1/2", 18 sektor… nebo    º
 º       ³    jinì nedefinovatelnì typ m‚dia                 º
 ÈÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

    Dalç¡  informace  o typu m‚dia obdr§¡te pomoc¡ pýeruçen¡ INT 25H, kter‚
umo§åuje Ÿten¡ bloku parametr… BIOS (BPB) ze zav dØc¡ho sektoru disku.

Pozn.: Tato funkce mØn¡ hodnotu registru DS, proto ji pýed vyvol n¡m funkce
       uschovejte pomoc¡ PUSH DS.




ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿCÿH ÿ(ÿ2ÿ8ÿ) - poskytnut¡ informac¡ FAT specifik. disku

    vstup:    AH = 1CH
              DL = Ÿ¡slo disku (0 = aktivn¡, 1 = A, 2 = B, atd.)

    vìstup:   AL = poŸet sektor… na blok
              CX = velikost sektoru v bajtech
              DX = celkovì poŸet blok… disku
              DS:BX = ukazatel na bajt popisovaŸe m‚dia (identifik tor FAT)

    zniŸen‚ registry: DS

    Funkce  navrac¡  charakteristiku  m‚dia  a  bajt  popisovaŸe  m‚dia pro
aktivn¡ disk (bajt popisovaŸe m‚dia specifikuje typ diskov‚ jednotky).

    Bajt popisovaŸe m‚dia (identifikaŸn¡ bajt FAT):

    Bajt popisovaŸe m‚dia je omezen na hodnoty F0H a§ FFH.
  
 ÉÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
 º  FFH  ³    oboustrann  disketa 5 1/4", 8 sektor…          º
 ÌÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
 º  FEH  ³    jednostrann  disketa 5 1/4", 8 sektor… nebo    º
 º       ³    jednostrann  disketa 8", 26 sektor… nebo       º
 º       ³    jednostrann  disketa 8", 8 sektor…             º
 ÌÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
 º  FDH  ³    oboustrann  disketa 5 1/4", 9 sektor… nebo     º
 º       ³    jednostrann  disketa 8", 26 sektor…            º
 ÌÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
 º  FCH  ³    jednostrann  disketa, 9 sektor…                º
 ÌÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
 º  F9H  ³    oboustrann  disketa 5 1/4", 15 sektor…         º
 º       ³    oboustrann  disketa 3 1/2", 9 sektor…          º
 ÌÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
 º  F8H  ³    pevnì disk                                     º
 ÌÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
 º  F0H  ³    oboustrann  disketa 3 1/2", 18 sektor… nebo    º
 º       ³    jinì nedefinovatelnì typ m‚dia                 º
 ÈÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

    Dalç¡  informace  o typu m‚dia obdr§¡te pomoc¡ pýeruçen¡ INT 25H, kter‚
umo§åuje Ÿten¡ bloku parametr… BIOS (BPB) ze zav dØc¡ho sektoru disku.

Pozn.: Tato funkce mØn¡ hodnotu registru DS, proto ji pýed vyvol n¡m funkce
       uschovejte pomoc¡ PUSH DS.




ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿDÿH ÿ(ÿ2ÿ9ÿ) - rezervov no




ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿEÿH ÿ(ÿ3ÿ0ÿ) - rezervov no




ÿFÿuÿnÿkÿcÿeÿ ÿ1ÿFÿH ÿ(ÿ3ÿ1ÿ) - rezervov no




ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿ0ÿH ÿ(ÿ3ÿ2ÿ) - rezervov no




ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿ1ÿH ÿ(ÿ3ÿ3ÿ) - Ÿten¡ s pý¡mìm pý¡stupem s pou§it¡m FCB

    vstup:    AH = 21H
              DS:DX = ukazatel na otevýenì FCB

    vìstup:   AL = 00H - Ÿten¡ probØhlo £spØçnØ
                   01H - nalezen konec souboru, § dn  data nepýeŸtena
                   02H - prostor DTA pý¡liç malì (pýelom segmentu)
                   03H - nalezen konec souboru, pýeŸtena Ÿ st dat

    Funkce  Ÿte  specifikovanì  z znam  souboru  do  bufferu na adrese DTA.
Z znam  je  specifikov n  v  FCB nastaven¡m Ÿ¡sla n hodn‚ho z znamu (offset
21H)  a  velikost¡  z znamu  (offset 0EH), z tØchto £daj… je odvozeno Ÿ¡slo
bloku se z znamem a Ÿ¡slo z znamu v bloku.

    Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va Ÿten¡ READ.

Pozn.: Polo§ka  n hodn‚ho  z znamu  nen¡  po t‚to operaci ulo§ena. Proto je
       nutn‚,  aby  program  nastavil  polo§ku  n hodn‚ho z znamu v§dy pýed
       vyvol n¡m  t‚to  funkce.  Funkce  27H, kter  je obdobou t‚to funkce,
       ukl d   automaticky  polo§ku  n hodn‚ho z znamu (funkce 27H m…§e t‚§
       Ÿ¡st z znam v¡cen sobnØ).

       Data  jsou Ÿtena do bufferu na adrese oznaŸen‚ jako Adresa diskov‚ho
       pýenosu  DTA.  Pokud by pýenos dat mohl zp…sobit pýeteŸen¡ segmentu,
       je vygenerov na chyba 2.

       Pokud  je  nalezen konec souboru jeçtØ pýed naŸten¡m cel‚ho z znamu,
       je zbytek z znamu doplnØn nulami a§ do pln‚ velikosti z znamu.





ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿ2ÿH ÿ(ÿ3ÿ4ÿ) - z pis s pý¡mìm pý¡stupem s pou§it¡m FCB

    vstup:    AH = 22H
              DS:DX = ukazatel na otevýenì FCB

    vìstup:   AL = 00H - z pis probØhl £spØçnØ
                   01H - disk je plnì
                   02H - prostor DTA pý¡liç malì (pýelom segmentu)

    Funkce  zapisuje  specifikovanì  z znam  z  bufferu  na  adrese  DTA do
souboru. Z znam je specifikov n Ÿ¡slem n hodn‚ho z znamu (offset 21H v FCB)
a  velikost¡  z znamu  (offset 0EH v FCB). Aktivn¡ blok a aktivn¡ z znam v
bloku jsou odvozeny z Ÿ¡sla n hodn‚ho z znamu a velikosti z znamu.

    Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va z pisu WRITE.

Pozn.: Polo§ka  n hodn‚ho  z znamu  nen¡  po t‚to operaci ulo§ena. Proto je
       nutn‚,  aby  program  nastavil  polo§ku  n hodn‚ho z znamu v§dy pýed
       vyvol n¡m  t‚to  funkce.  Funkce  28H, kter  je obdobou t‚to funkce,
       ukl d   automaticky  polo§ku  n hodn‚ho z znamu (funkce 28H m…§e t‚§
       zapisovat z znam v¡cen sobnØ).

       Data  jsou  zapisov na  z  bufferu  na  adrese  oznaŸen‚ jako Adresa
       diskov‚ho  pýenosu  DTA. Pokud by pýenos dat mohl zp…sobit pýeteŸen¡
       segmentu, je vygenerov na chyba 2.

       Pokud  je  nalezen konec souboru jeçtØ pýed naŸten¡m cel‚ho z znamu,
       je zbytek z znamu doplnØn nulami a§ do pln‚ velikosti z znamu.

       Pokud  m  specifikovanì soubor nastaven atribut ochrany proti z pisu
       Read-Only, z pis se neprovede.

       Je-li  d‚lka  z znamu  menç¡  ne§  sektor  (512  bajt…), zapisuj¡ se
       z znamy  do  vyrovn vac¡  pamØti  dokud nen¡ k z pisu pýipraven celì
       sektor.





ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿ3ÿH ÿ(ÿ3ÿ5ÿ) - poskytnut¡ velikosti souboru s pou§it¡m FCB

    vstup:    AH = 23H
              DS:DX = ukazatel na neotevýenì FCB

    vìstup:   AL = 00H - pokud byl po§adovanì soubor nalezen
                   FFH - pokud nebyl nalezen § dnì vyhovuj¡c¡ soubor

    Funkce hl s¡ velikost souboru jako poŸet z znam… (zaokrouhleno nahoru).
PoŸet z znam… je navracen v polo§ce FCB relativn¡ z znam (offset 21H).

Pozn.: Tato  funkce  m   stejnì  £Ÿinek,  jakoby  bylo po§adov no nastaven¡
       ukazatele  relativn¡ho  z znamu  na  konec souboru, pý¡çt¡ operace s
       pý¡mìm  pý¡stupem  by  prob¡hala  za  konec souboru (novì z znam pýi
       z pisu).

       Pýed  vol n¡m  funkce  mus¡te  nastavit  polo§ku  velikosti  z znamu
       (offset  0EH)  v FCB. Pokud chcete urŸit velikost souboru v bajtech,
       mastavte polo§ku velikosti z znamu na hodnotu 1.

       K   urŸen¡   velikosti   souboru  s  pou§it¡m  funkc¡  pou§¡vaj¡c¡ch
       identifik tory  souboru  pou§ijte  funkci  LSEEK (funkce 42H), kter 
       nastav¡ ukazatel na konec souboru.





ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿ4ÿHÿ ÿ(ÿ3ÿ6ÿ) - nastaven¡ relativ. z znamu s pou§it¡m FCB

    vstup:    AH = 24H
              DS:DX = ukazatel na neotevýenì FCB

    vìstup:   § dnì

    Funkce  nastav¡ polo§ku relativn¡ho z znamu v FCB tak, aby souhlasila s
nastaven¡m polo§ek aktivn¡ho bloku a aktivn¡ho z znamu v FCB.

Pozn.: Tato  funkce usnadåuje pýep¡n n¡ ze sekvenŸn¡ch operac¡ na operace s
       pý¡mìm  pý¡stupem.  ZpØtn‚  pýepnut¡  je  mo§n‚ t¡m zp…sobem, §e pýi
       operac¡ch  s  pý¡mìm  pý¡stupem  DOS  automaticky  nastavuje polo§ky
       aktivn¡ho bloku a aktivn¡ho z znamu v FCB.





ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿ5ÿHÿ ÿ(ÿ3ÿ7ÿ) - nastaven¡ vektoru pýeruçen¡

    vstup:    AH = 25H
              AL = Ÿ¡slo pýeruçen¡
              DS:DX = adresa nov‚ho ovladaŸe pýeruçen¡

    vìstup:   § dnì

Pozn.: Pýed  vol n¡m  funkce  25H  si  m…§ete  vy§ dat  informaci  o adrese
       souŸasn‚ho  ovladaŸe  pýeruçen¡  (pomoc¡  funkce  35H),  aby byl v ç
       program  schopen  navr tit  p…vodn¡  adresu  ovladaŸe  pýeruçen¡ pýi
       ukonŸen¡  programu.  Toto  je  preferovan  cesta k nastaven¡ vektoru
       pýeruçen¡. Nepou§¡vejte nastaven¡ adresy pýeruçen¡ pý¡mo v pamØti !





ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿ6ÿHÿ ÿ(ÿ3ÿ8ÿ) - vytvoýen¡ programov‚ho segmentu

    vstup:    AH = 26H
              DX = adresa segmentu nov‚ho prefixu programov‚ho segmentu
              CS:0 = prefix program. segmentu, z kter‚ho se zkop¡ruj¡ inf.

    vìstup:   § dnì

    Funkce  vytvoý¡  novì  prefix  programov‚ho  segmentu  (PSP),  aby byly
votvoýeny podm¡nky k oddØlen‚mu naŸten¡ podprogramu a jeho spuçtØn¡. PSP na
zaŸ tku segmentu souŸasn‚ho k¢du programu se zkop¡ruje do prvn¡ch 256 bajt…
nov‚ho  segmentu  specifikovan‚ho  v  registru  DX.  Novì  PSP  se ulo§¡ se
souŸasnìm   nastaven¡m   vektor…  pýeruçen¡  INTú22h,  INTú23H  a  INTú24H.
Informace  o  velikosti  pamØti na relativn¡ adrese 06H nov‚ho PSP se ulo§¡
souhlasnØ podle skuteŸn‚ho stavu voln‚ pamØti.

Pozn.: Tato  funkce  je  u  verz¡  DOS  2.0 a vyçç¡ch nahrazena funkc¡ EXEC
       (funkce 4BH); tato funkce by nemØla bìt pou§¡v na.




ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿ7ÿHÿ ÿ(ÿ3ÿ9ÿ) - Ÿten¡ bloku s pý¡mìm pý¡stupem s pou§. FCB

    vstup:    AH = 27H
              CX = poŸet z znam… ke Ÿten¡
              DS:DX = ukazatel na otevýenì FCB

    vìstup:   AL = 00H - Ÿten¡ probØhlo £spØçnØ
                   01H - nalezen konec souboru, posledn¡ z znam vcelku
                   02H - prostor DTA pý¡liç malì (pýelom segmentu)
                   03H - nalezen konec souboru, pýeŸtena Ÿ st dat
              CX = poŸet skuteŸnØ pýeŸtenìch z znam…

    Funkce  Ÿte  jeden  nebo  v¡ce  z znam…  do  pamØti na souŸasnou adresu
diskovìch  pýenos…  DTA.  PoŸet z znam… specifikuje registr CX. Je-li poŸet
z znam…  nastaven  na  0,  ukonŸ¡  se funkce bez Ÿten¡ jak‚hokoliv z znamu.
¬ten¡  zaŸ¡n  na relativn¡ adrese z znamu (offset 21H). Velikost z znam… je
specifikov na polo§kou velikosti z znamu (offset 0EH). Polo§ky aktivn¡ blok
a  aktivn¡  z znam  se  nastav¡  odpov¡daj¡c¡m zp…sobem k polo§ce relativn¡
z znam.

    Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va Ÿten¡ READ.

Pozn.: Pou§ijte  funkci 1AH k nastaven¡ adresy diskovìch pýenos… DTA. Pokud
       by  pýenos  dat  mohl  zp…sobit  pýeteŸen¡ segmentu, je vygenerov na
       chyba 2.

       Pokud  je  nalezen konec souboru jeçtØ pýed naŸten¡m cel‚ho z znamu,
       je zbytek z znamu doplnØn nulami a§ do pln‚ velikosti z znamu.

       Po  naŸten¡  po§adovan‚ho  z znamu  ulo§¡  tato funkce novou hodnotu
       polo§ky  relativn¡ho z znamu a polo§ky aktivn¡ blok a aktivn¡ z znam
       tak,  §e  ukazuj¡  na  novì z znam. Funkce 21H je jednoduçç¡ obmØnou
       t‚to funkce, kromØ toho, §e funkce 21H neukl d  automaticky poslednØ
       jmenovan‚  týi  polo§ky  a  m…§e  Ÿ¡st  pouze  jeden z znam na jedno
       vol n¡.





ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿ8ÿHÿ ÿ(ÿ4ÿ0ÿ) - z pis bloku s pý¡mìm pý¡stupem s pou§. FCB

    vstup:    AH = 28H
              CX = poŸet z znam… k z pisu
              DS:DX = ukazatel na otevýenì FCB

    vìstup:   AL = 00H - z pis probØhl £spØçnØ
                   01H - disk je plnì
                   02H - prostor DTA pý¡liç malì (pýelom segmentu)
              CX = poŸet zapsanìch z znam…

    Funkce  zapisuje  jeden  nebo v¡ce z znam… ze souŸasn‚ adresy diskovìch
pýenos…  DTA na disk. PoŸet z znam… specifikuje registr CX. Z pis zaŸ¡n  na
relativn¡  adrese  z znamu  (offset 21H). Velikost z znam… je specifikov na
polo§kou  velikosti  z znamu  (offset  0EH). Polo§ky aktivn¡ blok a aktivn¡
z znam se nastav¡ odpov¡daj¡c¡m zp…sobem k polo§ce relativn¡ z znam.

    Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va z pisu WRITE.

Pozn.: Pou§ijte  funkci 1AH k nastaven¡ adresy diskovìch pýenos… DTA. Pokud
       by  pýenos  dat  mohl  zp…sobit  pýeteŸen¡ segmentu, je vygenerov na
       chyba 2.

       Pokud  zapisovanì z znam nezapln¡ celì sektor (512 Bajt…), DOS ulo§¡
       data do vyrovn vac¡ pamØti a ulo§¡ sektor a§ po jeho naplnØn¡ (resp.
       a§ ve chv¡li, kdy je po§adov n pý¡stup na jinì sektor ne§ kterì je v
       pamØti).

       Pokud  specifikovanì soubor m  nastaven atribut "pouze Ÿten¡", z pis
       se neprovede.

       Pokud  specifikujete  hodnotu  v  CX  =  0  (poŸet  z znam…), funkce
       nezap¡çe   § dnì  z znam,  avçak  zkr t¡  d‚lku  souboru  na  pozici
       specifikovanou  Ÿ¡slem  relativn¡ho z znamu. Tato funkce se pou§¡v ,
       pokud  chcete logicky zruçit z znamy za koncem souboru a uvolnit tak
       m¡sto na disku.

       Po  z pisu  po§adovan‚ho  z znamu  ulo§¡  tato  funkce novou hodnotu
       polo§ky  relativn¡ho z znamu a polo§ky aktivn¡ blok a aktivn¡ z znam
       tak,  §e  ukazuj¡  na  novì z znam. Funkce 22H je jednoduçç¡ obmØnou
       t‚to funkce, kromØ toho, §e funkce 22H neukl d  automaticky poslednØ
       jmenovan‚  týi  polo§ky a m…§e zapisovat pouze jeden z znam na jedno
       vol n¡.




ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿ9ÿHÿ ÿ(ÿ4ÿ1ÿ) - rozbor jm‚na souboru

    vstup:    AH = 29H
              DS:SI = ukazatel na ýetØzec, kterì m  bìt rozebr n
              ES:DI = ukazatel na neotevýenou polo§ku FCB
              AL = parametry rozboru:
                   bit 0 - zkoum n¡ od posledn¡ho oddØl. znaku (ingorov n)
                       1 - identifikaŸn¡  bajt  disku  v FCB je modifikov n
                           pouze  pokud  je  disk specifikov n v pý¡kazov‚m
                           ý dku
                       2 - jm‚no  souboru v FCB je modifikov no pouze pokud
                           je  jm‚no  souboru  specifikov no  v  pý¡kazov‚m
                           ý dku
                       3 - rozç¡ýen¡  jm‚na  souboru  v FCB je modifikov no
                           pouze   pokud   je   rozç¡ýen¡   jm‚na   souboru
                           specifikov no v pý¡kazov‚m ý dku
                       4-7 ignorov ny

    vìstup:   AL = FFH - funkce neprobØhla £spØçnØ
                   00H - funkce £spØçn , nenalezeny § dn‚ maskovac¡ znaky
                   01H - funkce £spØçn , nalezeny maskovac¡ znaky (?,*)
              DS:SI = prvn¡ bajt po ýetØzci, kterì se rozeb¡ral
              ES:DI = novì neotevýenì FCB

    Funkce  29H  prov d¡  rozbor  pý¡kazov‚ho ý dku pro specifikaci souboru
pomoc¡  formy d:JMNO_SOUBORU.TYP. Pokud je nalezeno jm‚no souboru, vytvoý¡
se  FCB.  Jinak  funkce  navrac¡ v AL hodnotu FFH. Funkce umo§åuje programu
nastavit  aktivn¡  disk,  jm‚no  souboru  a rozç¡ýen¡ (typ) jm‚na souboru a
ponechat na u§ivateli, aby zmØnil tyto aktivn¡ hodnoty.

Pozn.: DS:SI ukazuje na lokaci ýetØzce specifikace souboru, jeho§ rozbor m 
       bìt  proveden  (text  z pý¡kazov‚ho ý dku). ES:DI ukazuje na lokaci,
       kde  bude  vytvoýen  novì FCB. V ni§ç¡ tetr dØ registru AL (tj. jeho
       ni§ç¡ Ÿtyýi bity) jsou specifikov ny parametry pro rozbor:

         - bit 0: Pokud  je  nastaven  na  1, hled  se jm‚no souboru i pýes
                  poŸ teŸn¡  oddØlovac¡ znaky soubor… (napý. mezera). Pokud
                  je  nastaven  na  0, pýedpokl d  se, §e jm‚no specifikace
                  souboru zaŸ¡n  na prvn¡m bajtu pý¡kazov‚ho ý dku.

         - bit 1: Pokud je nastaven na 1, nastav¡ funkce bajt disku pouze v
                  pý¡padØ, §e povelovì ý dek obsahuje specifikaci disku. To
                  umo§åuje programu definovat sv…j vlastn¡ implicitn¡ disk.
                  Pokud je nastaven na 0, je disk nastavem na specifikovanì
                  disk nebo na implicitn¡ disk (hodnota 0).

         - bit 2: Pokud  je nastaven na 1, zmØn¡ funkce jm‚no souboru v FCB
                  pouze  v  pý¡padØ,  §e  nalezne  platn‚  jm‚no  souboru v
                  pý¡kazov‚m  ý dku.  To  umo§åuje  programu  nastavit  sv‚
                  implicitn¡    jm‚no    souboru,   kter‚   m…§e   u§ivatel
                  pýedefinovat. Pokud je bit nastaven na 0 a nen¡ v ýetØzci
                  specifikov no  jm‚no souboru, nastav¡ se jm‚no souboru na
                  8 mezer.

         - bit 3: Pokud  je  nastaven  na  1,  zmØn¡ funkce rozç¡ýen¡ jm‚na
                  souboru   v  FCB  pouze  v  pý¡padØ,  §e  nalezne  platn‚
                  rozç¡ýen¡  jm‚na souboru v pý¡kazov‚m ý dku. Pokud je bit
                  nastaven  na  0  a  nen¡  v  ýetØzci  specifikov no jm‚no
                  souboru, nastav¡ se jm‚no souboru na 3 mezery.


       Pokud  funkce  nalezne  ve  specifikaci jm‚na souboru maskovac¡ znak
       "*",  nahrad¡  zbytek  jm‚na  souboru  nebo  rozç¡ýen¡ jm‚na souboru
       maskovac¡mi znaky "?". Pokud je zbytek rozboru £spØçnì, navr t¡ v AL
       hodnotu   01H   informuj¡c¡   program,   §e   mus¡   pou§¡t   funkce
       nalezni_prvn¡/nalezni_dalç¡ (tj. funkce 11H a 12H).

       Pokud  operace  neprobØhne  £spØçnØ,  navr t¡ AL hodnotu FFH a druhì
       bajt FCB (ES:DI+1) bude pr zdnì.

       Funkce  29H  nem…§e  pracovat  s  popisem cest soubor…. Soubory jsou
       pops ny  pouze  ve  tvaru d:jm‚no.typ (d=oznaŸen¡ disku; jm‚no=jm‚no
       souboru; typ=typ souboru, rozç¡ýen¡ jm‚na souboru).

       Jako oddØlovaŸe jm‚na souboru se pou§¡vaj¡ znaky:
         : . ; , = + / " [ ] < > | mezera tabel tor

       UkonŸovac¡  znaky  jm‚na  souboru  zahrnuj¡ vçechny oddØlovac¡ znaky
       plus  jakìkoliv  ý¡d¡c¡  znak  (tj. znak s k¢dem menç¡m ne§ 20H=32).
       Jm‚no souboru nem…§e obsahovat ukonŸovac¡ znak jm‚na souboru.




ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿAÿHÿ ÿ(ÿ4ÿ2ÿ) - poskytnut¡ syst‚mov‚ho data

    vstup:    AH = 2AH

    vìstup:   AL = den v tìdnu (0 - 6; 0 = nedØle)
              CX = rok (1980 - 2099)
              DH = mØs¡c (1 - 12)
              DL = den (1 - 31)

Pozn.: Pý¡ruŸky  k  DOS 2.00 a 2.10 nesr vnØ uv d¡, §e funkce 2CH navrac¡ v
       registru AL den v tìdnu.

       ¬¡seln‚ £daje jsou v bin rn¡ formØ.




ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿBÿHÿ ÿ(ÿ4ÿ3ÿ) - nastaven¡ syst‚mov‚ho data

    vstup:    AH = 2BH
              CX = rok (1980 - 2099)
              DH = mØs¡c (1 - 12)
              DL = den (1 - 31)

    vìstup:   AL = 00H - bylo zad no spr vn‚ datum
                   FFH - bylo zad no neplatn‚ datum

Pozn.: ¬¡seln‚ £daje jsou v bin rn¡ formØ.




ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿCÿHÿ ÿ(ÿ4ÿ4ÿ) - poskytnut¡ syst‚mov‚ho Ÿasu

    vstup:    AH = 2CH

    vìstup:   CH = hodina (0 - 23)
              CL = minuta (0 - 59)
              DH = sekunda (0 - 59)
              DL = setina sekundy (0 - 99)

Pozn.: V   mnoha   syst‚mech   je   polo§ka  setiny  sekundy  (registr  DL)
       zaokrouhlov na po Ÿ stech 1/18.2 sekundy.

       V  nØkterìch syst‚mech, jejich§ hodiny neumo§åuj¡ prov dØt krokov n¡
       po setin ch sekundy, m…§e bìt hodnota v DL nedefinovateln .

       ¬¡seln‚ £daje jsou v bin rn¡ formØ.




ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿDÿHÿ ÿ(ÿ4ÿ5ÿ) - nastaven¡ syst‚mov‚ho Ÿasu

    vstup:    AH = 2CH
              CH = hodina (0 - 23)
              CL = minuta (0 - 59)
              DH = sekunda (0 - 59)
              DL = setina sekundy (0 - 99)

    vìstup:   AL = 00H - bylo zad n spr vnì Ÿas
                   FFH - bylo zad n neplatnì Ÿas

Pozn.: ¬¡seln‚ £daje jsou v bin rn¡ formØ.





ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿEÿHÿ ÿ(ÿ4ÿ6ÿ) - zapnut¡ nebo vypnut¡ pýep¡naŸe VERIFY

    vstup:    AH = 2EH
              AL = 00H - vypnut¡ pýep¡naŸe VERIFY
                   01H - zapnut¡ pýep¡naŸe VERIFY
              DL = 00H

    vìstup:   § dnì

    Funkce  2EH  umo§åuje  zapnout  nebo  vypnout pýep¡naŸ VERIFY. Pokud je
pýep¡naŸ  VERIFY  zapnut  (AL  = 01H), Ÿte DOS bajty kontroln¡ho souŸtu CRC
(Cyclic  Redundancy  Check) pr vØ zapisovanìch dat a ovØýuje, zda jsou data
spr vnØ  zaps na.  Nastaven¡  tohoto  pýep¡naŸe  tedy  nezp…sob¡  ovØýov n¡
spr vnosti  z pisu  dat  kontroln¡m  Ÿten¡m  dat  po z pisu (a porovn n¡m s
p…vodn¡mi  daty),  prov d¡  pouze  kontrolu  Ÿitelnosti  dat pomoc¡ ovØýen¡
kontroln¡ho  souŸtu. Tento pýep¡naŸ je vhodn‚ zapnout pýi z pisu kritickìch
dat  na  disk,  v  bØ§n‚m provozu je vhodnØjç¡ jej vypnout, neboœ zpomaluje
prov dØn¡ diskovìch operac¡.

Pozn.: U verz¡ DOS 1 a 2 mus¡ bìt DL nastaven pýed vol n¡m funkce na 0.

       S¡œov‚ disky nepodporuj¡ funkci pro verifikaci dat.

       K  zjiçtØn¡  stavu  pýep¡naŸe VERIFY pou§ijte funkci 54H (poskytnut¡
       nastaven¡ pýep¡naŸe VERIFY).





ÿFÿuÿnÿkÿcÿeÿ ÿ2ÿFÿHÿ ÿ(ÿ4ÿ7ÿ) - poskytnut¡ adresy diskovìch pýenos… (DTA)

    vstup:    AH = 2FH

    vìstup:   ES:BX = adresa souŸasnØ nastaven‚ adresy DTA

Pozn.: Pokud  nen¡  pou§ita  funkce 1AH (nastaven¡ adresy diskovìch pýenos…
       DTA),  je automaticky nastavena jako DTA vyrovn vac¡ pamØœ na adrese
       80H v prefixu programov‚ho segmentu PSP a o d‚lce 128 bajt….





ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿ0ÿHÿ ÿ(ÿ4ÿ8ÿ) - poskytnut¡ Ÿ¡sla verze DOS

    vstup:    AH = 30H

    vìstup:   AL = hlavn¡ Ÿ¡slo verze operaŸn¡ho syst‚mu DOS
              AH = doplåkov‚ Ÿ¡slo verze operaŸn¡ho syst‚mu DOS

Pozn.: DOS verze 1.x navrac¡ v AL hodnotu 00H.

       Je  týeba  si uvØdomit, §e napý. verze 2.1 je ulo§ena jako 02H (2) a
       0AH (10), tj. jako 2.10 a ne jako 02H a 01H (= 2.01).

Pý¡klad: Pokud  je  tato  funkce  vyvol na  napý.  pod  DOS 2.11, v AL bude
         navr cena hodnota 02H a v AH bude hodnota 0BH (= 11).





ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿ1ÿHÿ ÿ(ÿ4ÿ9ÿ) - ukonŸen¡ procesu a jeho uchov n¡ v pamØti

    vstup:    AH = 31H
              AL = n vratovì k¢d
              DX = velikost rezidentn¡ Ÿ sti (v odstavc¡ch)

    vìstup:   neexistuje n vrat

    Funkce  pýeruç¡  pr vØ  prob¡haj¡c¡  proces, avçak ponech  jeho urŸitou
Ÿ st  rezidentnØ  v  pamØti. Funkce 31H je rozç¡ýen¡m pýeruçen¡ DOS INT 27H
(pýeruçen¡  s  uchov n¡m  k¢du  programu v pamØti); umo§åuje dvØ doplåuj¡c¡
funkce:  umo§åuje  ponechat  v  pamØti  rezidentnØ  v¡ce ne§ 64K a umo§åuje
navr tit nadýazen‚mu procesu n vratovì k¢d.

Pozn.: Tato   funkce   neuvolåuje   § dnou  pamØœ,  kter   byla  pýem¡stØna
       pýeruçenìm procesem pomoc¡ funkce 48H (pýidØlen¡ pamØti).

       Nadýazenì  proces  m…§e  obdr§et  n vratovì  k¢d pýeruçen‚ho procesu
       pomoc¡  funkce  4DH  nebo v pý¡kazov‚m souboru DOS testov n¡m pomoc¡
       funkce ERRORLEVEL.

       Otevýen‚ soubory nejsou touto funkc¡ uzavýeny.




ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿ2ÿHÿ ÿ(ÿ5ÿ0ÿ) - rezervov no



ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿ3ÿHÿ ÿ(ÿ5ÿ1ÿ) - poskytnut¡ nebo nastaven¡ statutu BREAK

    vstup:    AH = 33H
              AL = 00H - poskytnut¡ statutu BREAK
                   01H - nastaven¡ statutu BREAK
              DL = 00H - vypnut¡ pý¡znaku BREAK (pouze pýi AL = 01H)
                   01H - zapnut¡ pý¡znaku BREAK (pouze pýi AL = 01H)

    vìstup:   DL = 00H - BREAK je vypnut (pouze pýi AL = 00H)
                   01H - BREAK je zapnut (pouze pýi AL = 00H)

    OperaŸn¡  syst‚m  DOS verze 2.00 a pozdØjç¡ umo§åuje rozç¡ýit prov dØn¡
kontroly  stisku  kombinace kl ves <Ctrl>-<Break> (<Ctrl>-C) kromØ vstup… a
vìstup…  na  konzolu  (tj.  funkce  01H  - 0CH) tak‚ na testov n¡ pýi vçech
ostatn¡ch  vstupnØ/vìstupn¡ch  operac¡ch.  K  zapnut¡  kontroly  pýi  vçech
vstupnØ/vìstupn¡ch operac¡ch slou§¡ tato funkce 33H.

Pozn.: Standardn¡  nastaven¡  kontroly <Ctrl>-<Break> (<Ctrl>-C) je vypnutì
       stav,  tj. kontrola se prov d¡ pouze pýi operac¡ch vstupu/vìstupu na
       konzolu.

       Stav  pýep¡naŸe  BREAK lze nastavovat z pý¡kazov‚ho ý dku DOS pomoc¡
       povelu BREAK ON nebo BREAK OFF.

       Programy,  kter‚  pou§¡vaj¡  vol n¡  funkc¡  06H  nebo  07H ke Ÿten¡
       kombinace  kl ves <Ctrl>-<Break> (<Ctrl>-C) jako dat, mus¡ zajistit,
       aby byl pýep¡naŸ BREAK vypnut.




ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿ4ÿHÿ ÿ(ÿ5ÿ2ÿ) - rezervov no




ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿ5ÿHÿ ÿ(ÿ5ÿ3ÿ) - poskytnut¡ vektoru pýeruçen¡

    vstup:    AH = 35H
              AL = Ÿ¡slo pýeruçen¡

    vìstup:   ES:BX = ukazatel na obsluhu pýeruçen¡

    Funkce navrac¡ adresu obslu§n‚ho programu pro po§adovan‚ pýeruçen¡.

Pozn.: Po  vol n¡ funkce 35H m…§ete nastavit novou adresu vektoru pýeruçen¡
       pomoc¡  funkce  25H.  Toto  je  preferovan   cesta  ke Ÿten¡ vektoru
       pýeruçen¡, programy by nemØly z¡sk vat vektor pýeruçen¡ pý¡mo Ÿten¡m
       tabulky vektor….





ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿ6ÿHÿ ÿ(ÿ5ÿ4ÿ) - poskytnut¡ voln‚ho m¡sta disku

    vstup:    AH = 36H
              DL = Ÿ¡slo disku (0=aktivn¡ disk, 1=A, 2=B, atd.)

    vìstup:   AX = poŸet sektor… na alokaŸn¡ blok
                   (FFFFH = neplatn  specifikace disku)
              BX = poŸet volnìch alokaŸn¡ch blok… disku
              CX = poŸet bajt… na sektor
              DX = celkovì poŸet alokaŸn¡ch blok… na disku

    Funkce  navrac¡ poŸet volnìch alokaŸn¡ch blok… disku a jin‚ informace o
disku podobnØ jako funkce 1BH a 1CH se týemi odliçnostmi:

    - navrac¡ poŸet volnìch blok… (nam¡sto tabulky popisovaŸe m‚dia)
    - nevrac¡ ukazatel na popisovac¡ bajt m‚dia
    - navrac¡ chybovì k¢d, pokud je specifikovanì disk neplatnì





ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿ7ÿHÿ ÿ(ÿ5ÿ5ÿ) - rezervov no

    nastaven¡  oddØlovac¡ho znaku parametr… pý¡kazu (viz povel SWITCHAR pro
souboru CONFIG.SYS).



ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿ8ÿHÿ ÿ(ÿ5ÿ6ÿ) - poskytnut¡/nastaven¡ n rodnost. informac¡

    vstup:    AH = 38H
              AL = 00H - souŸasnØ nastaven  zemØ (implicitn¡ zemØ)
                 = k¢d zemØ (> DOS 2.01)
                 = FFH - k¢d zemØ > 255 je ulo§en v registru BX (> DOS3.00)
              BX = 16-bitovì k¢d zemØ (pokud je AL = FFH) (> DOS 3.00)
              DS:DX = ukazatel na vyrovn vac¡ pamØœ (32 resp. 34 bajt…)
              DX = FFFFH pro nastaven¡ k¢du zemØ v AL resp. BX (> DOS 3.00)

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   02H (2) - soubor nenalezen (nen¡ tabulka pro spec. zemi)
              BX = k¢d zemØ (pokud je zad n AL = 0)
              napln¡ tab. na adrese DS:DX n rodnostnØ z vislìmi informacemi

    Funkce  navrac¡  (pokud  je  v  DS:DX  ukazatel  na  vyrovn vac¡ pamØœ)
n rodnostnØ  z visl‚ informace pro implicitn¡ zemi (AL = 00H; v AL resp. BX
pýitom  navrac¡  k¢d  zemØ)  nebo  pro specifikovanou zemi (AL = k¢d zemØ -
pouze  verze  DOS  > 2.01) nebo umo§åuje specifikovat novou implicitn¡ zemi
(pokud  je  DX  =  FFFFH; v AL resp. v BX je nastaven novì k¢d zemØ - pouze
verze  DOS  > 3.00 - nebo je AL=FFH a k¢d zemØ je ulo§en v BX). Norm lnØ je
k¢d zemØ nastaven v souboru CONFIG.SYS pý¡kazem COUNTRY.

    Pro  k¢dy  zemØ  vØtç¡  ne§ 254 (FDH) zadejte v registru AL hodnotu FFH
(255) a k¢d zemØ uveÔte v registru BX (pouze verze DOS > 3.00).

    Informace  navr cen   na  adrese  DS:DX  pro  DOS  verze  3.00  a vyçç¡
(34-bajtov  tabulka) m  n sleduj¡c¡ strukturu:
 
ÉÍÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
º   offset   ³ bajt… ³         vìznam                                    º
ÌÍÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
º  00H ( 0)  ³   2   ³    form t data (viz n sleduj¡c¡ tabulka)          º
º  02H ( 2)  ³   5   ³    znak mØny (ýetØzec ASCIIZ)                     º
º  07H ( 7)  ³   2   ³    oddØlovaŸ tis¡c… (ýetØzec ASCIIZ)              º
º  09H ( 9)  ³   2   ³    oddØlovaŸ desetinnìch m¡st (ýetØzec ASCIIZ)    º
º  0BH (11)  ³   2   ³    oddØlovaŸ data (ýetØzec ASCIIZ)                º
º  0DH (13)  ³   2   ³    oddØlovaŸ Ÿasu (ýetØzec ASCIIZ)                º
º  0FH (15)  ³   1   ³    form t mØny (viz d le uveden  tabulka)         º
º  10H (16)  ³   1   ³    poŸet vìznamnìch desetinnìch Ÿ¡slic v mØnØ     º
º  11H (17)  ³   1   ³    form t Ÿasu (bit0=0 - 12 hod; bit0=1 - 24 hod) º
º  12H (18)  ³   4   ³    ukazatel na FAR porceduru, kter  prov d¡       º
º            ³       ³      pý¡p. mapov n¡ znak… pro specifikovanou zemi º
º  16H (22)  ³   2   ³    oddØlovaŸ seznamu dat (ýetØzec ASCIIZ)         º
º  18H (24)  ³  10   ³    rezervov no                                    º
ÈÍÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

Mo§n‚ form ty data:
  ÉÍÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
  º   hodnota  ³   zemØ   ³    form t zobrazen¡ data       º
  ÌÍÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍ¹
  º   00H (0)  ³   USA    ³  mØs¡c   ³   den    ³   rok    º
  º   01H (1)  ³  Evropa  ³   den    ³  mØs¡c   ³   rok    º
  º   02H (2)  ³ Japonsko ³   rok    ³  mØs¡c   ³   den    º
  ÈÍÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍ¼

Hodnota polo§ky form tu mØny:
  ÉÍÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
  º   hodnota  ³            vìznam                                       º
  ÌÍÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
  º   00H (0)  ³ symbol mØny pýedch z¡ hodnotu; mezi symbolem a hodnotou º
  º            ³ nen¡ § dn  mezera                                       º
  º   01H (1)  ³ symbol mØny n sleduje za hodnotou; mezi symbolem a      º
  º            ³ hodnotou nen¡ § dn  mezera                              º
  º   02H (2)  ³ symbol mØny pýedch z¡ pýed hodnotou; mezi symbolem a    º
  º            ³ hodnotou je jedna mezera                                º
  º   03H (3)  ³ symbol mØny n sleduje za hodnotou; mezi symbolem a      º
  º            ³ hodnotou je jedna mezera                                º
  º   04H (4)  ³ symbol mØny nahrazuje oddØlovaŸ desetinnìch m¡st (pouze º
  º            ³ DOS verze 3.2 a vyçç¡)                                  º
  ÈÍÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

    Rutina mapov n¡ znak… DOS (CaseMap), jej¡§ adresa (jako segment:offset)
se  navrac¡  s  n rodnostnØ z vislìmi informacemi, pýev d¡ znaky s hodnotou
80H  a§  FFH  na  jejich  ekvivalenty velkìch p¡smen. K pou§it¡ t‚to rutiny
um¡stØte  nejdý¡ve  mapovanì  znak  do registru AL. Potom proveÔte vzd len‚
vol n¡  FAR  CALL  na  tuto  rutinu. V registru AL bude navr cen velkì znak
ekvivalentn¡  mapovan‚mu  znaku. Napý. povel DOS SORT pou§¡v  tuto rutinu k
pýiýazen¡  k¢du "A" a "a" znak…m Ô, „, Ò, ›, Ž, µ, § a   (tyto znaky jsou v
standardn¡ tabulce znak… IBM zobrazov ny jako n rodn¡ verze znak… A).

    Informace  navr cen   na  adrese  DS:DX  pro DOS verze 2.x (32-bajtov 
tabulka) m  n sleduj¡c¡ strukturu:
 
ÉÍÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
º   offset   ³ bajt… ³         vìznam                                    º
ÌÍÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
º  00H ( 0)  ³   2   ³    form t data a Ÿasu (viz n sleduj¡c¡ tabulka)   º
º  02H ( 2)  ³   ?   ³    znak mØny (ýetØzec ASCIIZ)                     º
º   ?H ( ?)  ³   ?   ³    oddØlovaŸ tis¡c… (ýetØzec ASCIIZ)              º
º   ?H ( ?)  ³   ?   ³    oddØlovaŸ desetinnìch m¡st (ýetØzec ASCIIZ)    º
º   ?H ( ?)  ³   ?   ³    rezervov no (doplnØk do 32 bajt…)              º
ÈÍÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼
   - ýetØzce n sleduj¡ ihned za sebou

Mo§n‚ form ty data a Ÿasu:
  ÉÍÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
  º   hodnota  ³   zemØ   ³  zobrazen¡ data ³     zobrazen¡ Ÿasu     º
  ÌÍÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
  º   00H (0)  ³   USA    ³  mØs¡c/den/rok  ³  hodina:minuta:sekunda º
  º   01H (1)  ³  Evropa  ³  den/mØs¡c/rok  ³  hodina:minuta:sekunda º
  º   02H (2)  ³ Japonsko ³  rok:mØs¡c:den  ³  hodina:minuta:sekunda º
  ÈÍÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼


         K¢dy zem¡:
ÉÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÂÍ»
º  k¢d zemØ ³     zemØ     ³ kl v.³  datum ³   Ÿas     ³     mØna       ³dº
ÌÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÅÍ¹
º  3DH ( 61)³Austr lie     ³      ³DD-MM-RR³13:00:00   ³   $1,000.00    ³,º
º  20H ( 32)³Belgie        ³      ³DD/MM/RR³13:00:00   ³    1 000,00 F  ³;º
º0352H (850)³¬eskoslovensko³keybCS³DD.MM.RR³13.00.00   ³    1 000,00 KŸs³;º
º  2DH ( 45)³D nsko        ³      ³DD/MM/RR³13.00:00   ³    1.000,00 DKR³;º
º0166H (358)³Finsko        ³      ³DD-MM-RR³13:00:00   ³    1 000,00 MK ³;º
º  21H ( 33)³Francie       ³keybFR³DD/MM/RR³13:00:00   ³    1 000,00 F  ³;º
º  27H ( 39)³It lie        ³keybIT³DD/MM/RR³13:00:00   ³    1.000,Lit.  ³;º
º03CCH (972)³Izrael        ³      ³DD/MM/RR³13:00:00   ³  ™ 1,000.00    ³,º
º  02H (  2)³Kanada        ³      ³RR-MM-DD³13:00:00   ³    1 000,00 $  ³;º
º0311H (785)³Middle East   ³      ³DD/MM/RR³01:00:00 PM³    1.000,000 $ ³;º
º  31H ( 49)³NØmecko       ³keybGR³DD.MM.RR³13.00.00   ³  DM1.000,00    ³;º
º  1FH ( 31)³Nizozemsko    ³      ³DD-MM-RR³13:00:00   ³   œ1.000,00    ³;º
º  2FH ( 47)³Norsko        ³      ³DD/MM/RR³13.00.00   ³ KR 1.000,00    ³;º
º015FH (351)³Portugalsko   ³      ³DD/MM/RR³13:00:00   ³    1.000$00    ³;º
º  22H ( 34)³æpanØlsko     ³keybSP³DD/MM/RR³13:00:00   ³    1.000,00 ü  ³;º
º  2CH ( 44)³Spojen‚ kr l. ³keybUK³DD-MM-RR³13:00:00   ³   •1,000.00    ³,º
º  01H (  1)³Spojen‚ st ty ³      ³MM-DD-RR³01:00:00 PM³   $1,000.00    ³,º
º  2EH ( 46)³æv‚dsko       ³      ³RR-MM-DD³13.00.00   ³SEK 1.000,00    ³;º
º  29H ( 41)³ævìcarsko     ³      ³DD.MM.RR³13.00.00   ³ Fr 1,000.00    ³,º
ÈÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÁÍ¼
 d = oddØlovaŸ vìpisu dat

Pozn.: Verze operaŸn¡ho syst‚mu DOS 2.00 nemØla tuto funkci plnØ obsazenou,
       poskytovala  pouze n rodnostnØ z vislØ informace pro implicitn¡ zemi
       (s  omezenou  tabulkou).  Verze  DOS  2.01  ji§  umo§åuje poskytnut¡
       n rodnostn¡ch informac¡ i o jinìch zem¡ch. Verze > DOS 3.00 umo§åuje
       pou§¡vat  Ÿ¡sla  k¢d… zem¡ vØtç¡ ne§ 255 a nastavovat implicitn¡ k¢d
       zemØ.






ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿ9ÿHÿ ÿ(ÿ5ÿ7ÿ) - vytvoýen¡ adres ýe (MKDIR)

    vstup:    AH = 39H
              DS:DX = ukazatel na jm‚no adres ýe k vytvoýen¡ (ýet. ASCIIZ)

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   03H - cesta nenalezena
                   05H - po§adavek odm¡tnut nebo adres ý ji§ existuje

    Funkce  39H  (MKDIR)  vytv ý¡  podadres ý, jeho§ cesta je specifikov na
pomoc¡  ýetØzce  ASCIIZ  na  adrese  DS:DX.  D‚lka ýetØzce je omezena na 64
znak….  Pokud funkce nen¡ schopna vytvoýit adres ý, nastav¡ pý¡znak pýenosu
CF a navr t¡ chybovì k¢d v registru AX.

   Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va vytv ýen¡ CREATE.

Pozn.: Jm‚no adres ýe m…§e obsahovat oznaŸen¡ disku.

       Pokud nØkterì z adres ý… v cestØ neexistuje, adres ý se nevytvoý¡.

       Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).




ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿAÿHÿ ÿ(ÿ5ÿ8ÿ) - zruçen¡ adres ýe (RMDIR)

    vstup:    AH = 3AH
              DS:DX = ukazatel na jm‚no adres ýe k zruçen¡ (ýetØzec ASCIIZ)

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   03H ( 3) - cesta nenalezena
                   05H ( 5) - po§adavek odm¡tnut (adres ý nen¡ pr zdnì)
                   10H (16) - nelze zruçit aktivn¡ adres ý

    Funkce 3AH (RMDIR) ruç¡ podadres ý, jeho§ cesta je specifikov na pomoc¡
ýetØzce ASCIIZ na adrese DS:DX. D‚lka ýetØzce je omezena na 64 znak…. Pokud
funkce  nen¡  schopna  zruçit adres ý, nastav¡ pý¡znak pýenosu CF a navr t¡
chybovì k¢d v registru AX.

   Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va vytv ýen¡ CREATE.

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).





ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿBÿHÿ ÿ(ÿ5ÿ9ÿ) - zmØna adres ýe (CHDIR)

    vstup:    AH = 3BH
              DS:DX = ukazatel na jm‚no nov‚ho adres ýe (ýetØzec ASCIIZ)

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   03H ( 3) - cesta nenalezena

    Funkce  3BH  (CHDIR) zmØn¡ aktivn¡ adres ý na novì adres ý, jeho§ cesta
je  specifikov na  pomoc¡  ýetØzce ASCIIZ na adrese DS:DX. D‚lka ýetØzce je
omezena na 64 znak…. Pokud funkce nen¡ schopna nal‚zt novì adres ý, nastav¡
pý¡znak  pýenosu  CF a navr t¡ chybovì k¢d v registru AX (a adres ý z…stane
nezmØnØn).

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       OznaŸen¡  nov‚  cesty  m…§e obsahovat oznaŸen¡ disku (zmØn¡ se cesta
       pro danì disk).





ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿCÿHÿ ÿ(ÿ6ÿ0ÿ) - vytvoýen¡ souboru (CREAT)

    vstup:    AH = 3CH
              CX = atributy souboru
              DS:DX = ukazatel na jm‚no nov‚ho souboru (ýetØzec ASCIIZ)

    vìstup:   AX = identifik tor souboru (pokud nen¡ CF nastaven)
                 = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   03H ( 3) - cesta nenalezena
                   04H ( 4) - nen¡  volnì  § dnì identifik tor souboru (tj.
                              je otevýeno pý¡liç mnoho soubor…)
                   05H ( 5) - po§adavek  odm¡tnut  (soubor m  ochranu proti
                              z pisu nebo je z kladn¡ adres ý plnì)

    Funkce  3CH  otevýe soubor, jeho§ jm‚no je specifikov no pomoc¡ ýetØzce
ASCIIZ  na  adrese DS:DX. Pokud soubor jeçtØ neexistuje, vytvoý¡ jej. Pokud
soubor  se specifikovanìm jm‚nem ji§ existuje, zkr t¡ jej na nulovou d‚lku,
tj.  zruç¡ vçechna star  data ze souboru (!). Soubor je otevýen pro Ÿten¡ i
z pis.

   Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va vytv ýen¡ CREATE.

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       OznaŸen¡  nov‚  cesty  m…§e obsahovat oznaŸen¡ disku (zmØn¡ se cesta
       pro danì disk).

       Registr CX specifikuje atributy vytv ýen‚ho souboru:
         ÉÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
         º    CX    ³ specifikovan‚ atributy        º
         ÌÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
         º  00H (0) ³ norm ln¡ soubor               º
         º  01H (1) ³ soubor pouze pro Ÿten¡ (R/O)  º
         º  02H (2) ³ skrytì soubor (HID)           º
         º  04H (4) ³ syst‚movì soubor              º
         ÈÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼
         - souŸtem hodnot m…§ete atributy kombinovat (bl¡§e viz "Adres ýov 
           polo§ka")

       Informace m…§e bìt zapisov na i do souboru vytvoýen‚ho v m¢du "pouze
       Ÿten¡".  Ovçem  pýi  pou§it¡  t‚to  funkce  k  otevýen¡ existuj¡c¡ho
       souboru s nastavenìm pý¡znakem "pouze Ÿten¡" bude generov na chyba.

       Ke zmØnØ atribut… souboru lze pou§¡t funkci CHMOD (43H).




ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿDÿHÿ ÿ(ÿ6ÿ1ÿ) - otevýen¡ souboru

    vstup:    AH = 3DH
              AL = m¢d otevýen¡
              DS:DX = ukazatel na jm‚no souboru (ýetØzec ASCIIZ)

    vìstup:   AX = identifik tor souboru (pokud nen¡ CF nastaven)
                 = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H ( 1) - neplatn‚ Ÿ¡slo funkce
                   02H ( 2) - soubor nenalezen
                   03H ( 3) - cesta nenalezena
                   04H ( 4) - nen¡   volnì   § dnì   identifik tor  souboru
                              (pý¡liç mnoho otevýenìch soubor…)
                   05H ( 5) - po§adavek  odm¡tnut
                   0CH (12) - m¢d otevýen¡ neplatnì

    Funkce  3DH  otevýe  soubor  (a  pýiýad¡ mu identifikaŸn¡ slovo), jeho§
jm‚no  je  specifikov no  pomoc¡  ýetØzce ASCIIZ na adrese DS:DX s pou§it¡m
bajtu  "m¢d  otevýen¡"  k  urŸen¡,  jakìm  zp…sobem bude prov dØn k souboru
pý¡stup.  Funkce otevýe jakìkoliv existuj¡c¡ soubor vŸetnØ skrytìch soubor…
a nastav¡ velikost z znamu na 1úbajt.

K¢dov n¡ m¢d… otevýen¡ v AL:
 ÉÍÍÍÂÍÍÍÂÍÍÍÂÍÍÍÂÍÍÍÂÍÍÍÂÍÍÍÂÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
 º 7 ³ 6 ³ 5 ³ 4 ³ 3 ³ 2 ³ 1 ³ 0 ³  m¢d otevýen¡   ³       pozn mka      º
 ÌÍÍÍÅÍÍÍÅÍÍÍÅÍÍÍÅÍÍÍÅÍÍÍÅÍÍÍÅÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
 º . ³ . ³ . ³ . ³ . ³ A ³ A ³ A ³  m¢d pý¡stupu   ³ pý¡stup Ÿten¡/z pis º
 º . ³ . ³ . ³ . ³ R ³ . ³ . ³ . ³  rezervov no    ³ v§dy 0              º
 º . ³ S ³ S ³ S ³ . ³ . ³ . ³ . ³  m¢d sd¡len¡    ³ v DOS 2 mus¡ bìt 0  º
 º I ³ . ³ . ³ . ³ . ³ . ³ . ³ . ³  pý¡znak pod¡lu ³ v DOS 2 mus¡ bìt 0  º
 ÈÍÍÍÁÍÍÍÁÍÍÍÁÍÍÍÁÍÍÍÁÍÍÍÁÍÍÍÁÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

M¢d pý¡stupu (nejni§ç¡ týi bity registru AL):
 ÉÍÍÍÂÍÍÍÂÍÍÍÂÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
 º 2 ³ 1 ³ 0 ³ hex ³             m¢d pý¡stupu              º
 ÌÍÍÍÅÍÍÍÅÍÍÍÅÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
 º 0 ³ 0 ³ 0 ³  0  ³  pý¡stup pouze ke Ÿten¡ souboru       º
 º 0 ³ 0 ³ 1 ³  1  ³  pý¡stup pouze k z pisu do souboru    º
 º 0 ³ 1 ³ 0 ³  2  ³  pý¡stup ke Ÿten¡ i z pisu do souboru º
 ÈÍÍÍÁÍÍÍÁÍÍÍÁÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

M¢d sd¡len¡ (bity 4, 5 a 6 registru AL) - pouze DOS 3.0 a vyçç¡:

    Tyto  bity  ý¡d¡ zp…sob, jakìm mohou ostatn¡ u§ivatel‚ v s¡ti otevý¡t a
pou§¡vat soubor pokud jej otevýete. Jsou povolen  n sleduj¡c¡ nastaven¡:

 ÉÍÍÍÂÍÍÍÂÍÍÍÂÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
 º 6 ³ 5 ³ 4 ³ hex ³         m¢d sd¡len¡          º
 ÌÍÍÍÅÍÍÍÅÍÍÍÅÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
 º 0 ³ 0 ³ 0 ³  0  ³  kompatibiln¡ m¢d            º
 º 0 ³ 0 ³ 1 ³  1  ³  zam¡tnut¡ m¢du Ÿten¡/z pis  º
 º 0 ³ 1 ³ 0 ³  2  ³  zam¡tnut¡ m¢du pouze z pis  º
 º 0 ³ 1 ³ 1 ³  3  ³  zam¡tnut¡ m¢du pouze Ÿten¡  º
 º 1 ³ 0 ³ 0 ³  4  ³  nezam¡tnut § dnì m¢d        º
 ÈÍÍÍÁÍÍÍÁÍÍÍÁÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

Pý¡znak pod¡lu (bit 7 registru AL) - pouze DOS 3.0 a vyçç¡:

    Pý¡znak  pod¡lu  (bit  7)  specifikuje,  zda se budou pod¡let podýazen‚
procesy  na  pou§¡v n¡  tohoto  souboru.  Pokud  je  bit  7 vynulov n, maj¡
podýazen‚  procesy  automaticky  pý¡stup  k  tomuto souboru. Pokud je bit 7
nastaven,  soubor  se  automaticky neovolåuje pro podý¡zenì proces. Avçak ,
jako  jakìkoliv  jinì  proces,  m…§e  po§adovat pý¡stup k souboru podý¡zenì
proces na b zi sd¡len¡.

 ÉÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
 º 7 ³              pý¡znak pod¡lu              º
 ÌÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
 º 0 ³  na souboru se pod¡l¡ podý¡zenì proces   º
 º 1 ³  podý¡zenì proces se na souboru nepod¡l¡ º
 ÈÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

Zpý¡stupnØn¡ otevýen‚ho souboru podýazenìm proces…m:

    Je-li  soubor  jednou  otevýen hlavn¡m procesem, je zpý¡stupnØn¡ tohoto
souboru  jinìm  proces…m  urŸeno  m¢dem sd¡len¡m i m¢dem pý¡stupu p…vodn¡ho
procesu,  stejnØ  tak  jako  m¢dem  sd¡len¡m  a  m¢dem pý¡stupu podýazen‚ho
procesu.

    1.- Soubor  je  poprv‚  otevýen  v kompatibiln¡m m¢du sd¡len¡, pokud je
        otevýen:

         - pýes funkce pou§¡vaj¡c¡ FCB
         - pýes funkce vy§aduj¡c¡ pr va vytv ýen¡ CREATE
         - pýes volanou funkci, ve kter‚ je kompatibiln¡ m¢d specifikov n

        Soubor  v  kompatibiln¡m  m¢du  m…§e  bìt  otevýen  jedn¡m procesem
        libovolnØkr t,  pokud  soubor  nen¡  dosud  otevýen  pod nØkterìm z
        ostatn¡ch Ÿtyý m¢d… sd¡len¡. Avçak pokud m  soubor nastaven atribut
        "pouze  Ÿten¡"  a  je  v  souŸasnosti  otevýen  v  m¢du  sd¡len¡ se
        zam¡tnut¡m  z pisu,  m…§e  bìt tento soubor otevýen v kompatibiln¡m
        m¢du s pý¡stupem Ÿten¡.

    2.- Soubor je otevýen v jednom z jinìch m¢d… sd¡len¡.

ÉÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
º soubor je poprv‚ otevýen v m¢du ³ m…§e bìt opakovanØ otevýen v m¢du    º
ÌÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
º zam¡tnut¡ m¢du "Ÿten¡/z pis",   ³ nem…§e bìt opakovanØ otevýen         º
º pý¡stup "pouze Ÿten¡"           ³                                      º
º    (AL = X0010000)              ³                                      º
ÌÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
º zam¡tnut¡ m¢du "Ÿten¡/z pis",   ³ nem…§e bìt opakovanØ otevýen         º
º pý¡stup "pouze z pis"           ³                                      º
º    (AL = X0010001)              ³                                      º
ÌÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
º zam¡tnut¡ m¢du "Ÿten¡/z pis",   ³ nem…§e bìt opakovanØ otevýen         º
º pý¡stup "Ÿten¡/z pis"           ³                                      º
º    (AL = X0010010)              ³                                      º
ÌÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
º zam¡tnut¡ m¢du "z pis",         ³ zam¡tnut¡ m¢du "z pis", pouze Ÿten¡  º
º pý¡stup "pouze Ÿten¡",          ³       (AL = X0100000)                º
º    (AL = X0100000)              ³ nezam¡tnut § dnì m¢d, pouze Ÿten¡    º
º                                 ³       (AL - X1000000)                º
ÌÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
º zam¡tnut¡ m¢du "z pis",         ³ zam¡tnut¡ m¢du "Ÿten¡", pouze Ÿten¡  º
º pý¡stup "pouze z pis",          ³       (AL = X0110000)                º
º    (AL = X0100001)              ³ nezam¡tnut § dnì m¢d, pouze Ÿten¡    º
º                                 ³       (AL = X1000000)                º
ÌÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
º zam¡tnut¡ m¢du "z pis",         ³ nezam¡tnut § dnì m¢d, pouze Ÿten¡    º
º pý¡stup "Ÿten¡/z pis"           ³       (AL = X1000000)                º
º    (AL = X0100010)              ³                                      º
ÌÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
º zam¡tnut¡ m¢du "Ÿten¡",         ³ zam¡tnut¡ m¢du "z pis", pouze z pis  º
º pý¡stup "pouze Ÿten¡",          ³       (AL = X0100001)                º
º    (AL = X0110000)              ³ nezam¡tnut § dnì m¢d, pouze z pis    º
º                                 ³       (AL - X1000001)                º
ÌÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
º zam¡tnut¡ m¢du "Ÿten¡",         ³ zam¡tnut¡ m¢du "Ÿten¡", pouze z pis  º
º pý¡stup "pouze z pis",          ³       (AL = X0110001)                º
º    (AL = X0110001)              ³ nezam¡tnut § dnì m¢d, pouze z pis    º
º                                 ³       (AL - X1000001)                º
ÌÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
º zam¡tnut¡ m¢du "Ÿten¡",         ³ nezam¡tnut § dnì m¢d, pouze z pis    º
º pý¡stup "Ÿten¡/z pis"           ³       (AL = X1000001)                º
º    (AL = X0110010)              ³                                      º
ÌÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
º nezam¡tnut § dnì m¢d,           ³ zam¡tnut¡ m¢du "z pis", pouze Ÿten¡  º
º pý¡stup "pouze Ÿten¡"           ³       (AL = X0100000)                º
º    (AL = X1000000)              ³ zam¡tnut¡ m¢du "z pis", pouze z pis  º
º                                 ³       (AL = X0100001)                º
º                                 ³ zam¡tnut¡ m¢du "z pis", Ÿten¡/z pis  º
º                                 ³       (AL = X0100010)                º
º                                 ³ nezam¡tnut § dnì m¢d, pouze Ÿten¡    º
º                                 ³       (AL = X1000000)                º
º                                 ³ nezam¡tnut § dnì m¢d, pouze z pis    º
º                                 ³       (AL = X1000001)                º
º                                 ³ nezam¡tnut § dnì m¢d, Ÿten¡/z pis    º
º                                 ³       (AL = X1000010)                º
ÌÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
º nezam¡tnut § dnì m¢d,           ³ zam¡tnut¡ m¢du "Ÿten¡", pouze Ÿten¡  º
º pý¡stup "pouze z pis"           ³       (AL = X0110000)                º
º    (AL = X1000001)              ³ zam¡tnut¡ m¢du "Ÿten¡", pouze z pis  º
º                                 ³       (AL = X0110001)                º
º                                 ³ zam¡tnut¡ m¢du "Ÿten¡", Ÿten¡/z pis  º
º                                 ³       (AL = X0110010)                º
º                                 ³ nezam¡tnut § dnì m¢d, pouze Ÿten¡    º
º                                 ³       (AL = X1000000)                º
º                                 ³ nezam¡tnut § dnì m¢d, pouze z pis    º
º                                 ³       (AL = X1000001)                º
º                                 ³ nezam¡tnut § dnì m¢d, Ÿten¡/z pis    º
º                                 ³       (AL = X1000010)                º
ÌÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
º nezam¡tnut § dnì m¢d,           ³ § dn‚ zam¡tnut¡, pouze Ÿten¡         º
º pý¡stup "Ÿten¡/z pis"           ³       (AL = X1000000)                º
º    (AL = X1000010)              ³ § dn‚ zam¡tnut¡, pouze z pis         º
º                                 ³       (AL = X1000001)                º
º                                 ³ § dn‚ zam¡tnut¡, Ÿten¡/z pis         º
º                                 ³       (AL = X1000010)                º
ÈÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼


Pozn.: Soubory  konŸ¡c¡  dvojteŸkou  (zaý¡zen¡)  nelze  vol n¡m t‚to funkce
       otevý¡t.

       Pro  m¢dy  sd¡len¡  mus¡ bìt pro tuto funkci, aby pracovala, naŸtena
       obsluha sd¡len¡ soubor….

       Podý¡zen‚  procesy, kter‚ se pod¡lej¡ na souborech, se tak‚ pod¡lej¡
       na jejich omezen¡ch sd¡len¡ a pý¡stup….



ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿEÿHÿ ÿ(ÿ6ÿ2ÿ) - uzavýen¡ identifik toru souboru

    vstup:    AH = 3EH
              BX = identifik tor souboru

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   06H (6) - neplatnì identifik tor souboru

    Funkce  3EH  vypr zdn¡  vyrovn vac¡ pamØœ souboru, uzavýe soubor, zruç¡
identifik tor souboru a ulo§¡ informace do adres ýe.

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).





ÿFÿuÿnÿkÿcÿeÿ ÿ3ÿFÿHÿ ÿ(ÿ6ÿ3ÿ) - Ÿten¡ ze soub./zaý¡z. s pou§it¡m id. soub.

    vstup:    AH = 3FH
              BX = identifik tor souboru
              CX = poŸet bajt…, kter‚ maj¡ bìt pýeŸteny
              DS:DX = adresa vyrovn vac¡ pamØti, kam jsou data ulo§ena

    vìstup:   AX = poŸet skuteŸnØ pýeŸtenìch bajt… (CF=0)
                 = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   05H (5) - po§adavek odm¡tnut
                   06H (6) - neplatnì identifik tor souboru

    Funkce Ÿte data ze souboru nebo zaý¡zen¡, jeho§ identifik tor je ulo§en
v  registru  BX,  do  pamØti od adresy DS:DX. Data jsou Ÿtena od polohy, na
kterou  ukazuje  ukazatel  souboru.  Ukazatel  souboru  se  zvìç¡  o  poŸet
pýeŸtenìch bajt….

    Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va Ÿten¡ READ.

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Pokud  nen¡ pý¡znak  pýenosu  CF   nastaven  a registr AX = 0, potom
       ukazatel souboru byl nastaven na konec souboru.

       Pokud  nen¡  pý¡znak  pýenosu CF nastaven a poŸet pýeŸtenìch bajt… v
       registru  AX je menç¡ ne§ po§adovanì poŸet bajt… (registr CX), potom
       funkce pýi Ÿten¡ narazila na konec souboru.

       Pomoc¡  funkce  42H  m…§ete  pýed  Ÿten¡m pýem¡stit ukazatel souboru
       jinam, Ÿ¡m§ m…§ete Ÿ¡st data z kter‚hokoliv m¡sta v souboru.

       Pokud je specifikov na kl vesnice, Ÿte tato funkce buÔ specifikovanì
       poŸet bajt… nebo vçechny bajty a§ po pý¡çt¡ znak CR (kl vesa Return,
       Enter),  je-li  poŸet  menç¡.  (pokud je poŸet specifikovanìch bajt…
       alespoå o dvØ vØtç¡ ne§ poŸet zadanìch znak…, bude jako posledn¡ dva
       znaky  navr cen  p r  CR/LF  (k¢dy  0DH,  0AH) a bude poŸ¡t n za dva
       bajt.)






ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ0ÿHÿ ÿ(ÿ6ÿ4ÿ) - z pis do soub./zaý. s pou§it¡m ident.soub.

    vstup:    AH = 40H
              BX = identifik tor souboru
              CX = poŸet bajt…, kter‚ maj¡ bìt zaps ny
              DS:DX = adresa vyrovn vac¡ pamØti, odkud jsou data zapisov na

    vìstup:   AX = poŸet skuteŸnØ zapsanìch bajt… (CF=0)
                 = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   05H (5) - po§adavek odm¡tnut
                   06H (6) - neplatnì identifik tor souboru

    Funkce zapisuje data z pamØti od adresy DS:DX do souboru nebo zaý¡zen¡,
jeho§  identifik tor  je  ulo§en  v  registru  BX.  Data jsou zapisov na od
polohy,  na  kterou  ukazuje  ukazatel souboru. Ukazatel souboru se zvìç¡ o
poŸet zapsanìch bajt….

    Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va z pisu WRITE.

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Pokud  se  zapln¡ disk, nen¡ navr cen § dnì chybovì k¢d (tj. CF nen¡
       nastaven)   avçak   je  zaps no  m‚nØ  bajt…  ne§  bylo  po§adov no.
       Kontrolujte   proto   po   n vratu  z  funkce  vznik  t‚to  situtace
       testov n¡m,  zda  nen¡  obsah registru AX menç¡ ne§ po§adovanì poŸet
       bajt… v CX.

       Pomoc¡  funkce  42H  m…§ete  pýed z pisem pýem¡stit ukazatel souboru
       jinam, Ÿ¡m§ m…§ete zapisovat data do kter‚hokoliv m¡sta v souboru.

       Soubor  m…§ete  zkr tit tak, §e pýesunete ukazatel souboru na pozici
       nov‚ho  konce  souboru  (pomoc¡ funkce 42H) a vyvol te tuto funkci s
       nastavenìm nulovìm poŸtem bajt… k z pisu (CX = 0).

       Pokus  o  z pis  do souboru oznaŸen‚ho jako "pouze Ÿten¡" vygeneruje
       chybovì k¢d 5 "po§adavek odm¡tnut".





ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ1ÿHÿ ÿ(ÿ6ÿ5ÿ) - zruçen¡ souboru (UNLINK)

    vstup:    AH = 41H
              DS:DX = ukazatel na jm‚no souboru (ýetØzec ASCIIZ)

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   02H (2) - soubor nenalezen
                   03H (3) - cesta nenalezena
                   05H (5) - po§adavek odm¡tnut (soubor je R/O)

    Funkce   41H   zruç¡  polo§ku  adres ýe  pro  soubor,  jeho§  jm‚no  je
specifikov no  pomoc¡  ýetØzce ASCIIZ na adrese DS:DX. Ve specifikaci cesty
(jm‚na souboru) nelze pou§¡t (na rozd¡l od funkce 13H) nahrazovac¡ znaky (?
a *).

   Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va vytv ýen¡ CREATE.

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Ke  zruçen¡  souboru  oznaŸen‚ho  atributem  "pouze  Ÿten¡" nejdý¡ve
       zruçte tento atribut pomoc¡ funkce 43H.




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ2ÿHÿ ÿ(ÿ6ÿ6ÿ) - pýem¡stØn¡ ukazatele souboru (LSEEK)

    vstup:    AH = 42H
              BX = identifik tor souboru
              CX:DX = novì offset v bajtech (32-bitov‚ cel‚ Ÿ¡slo se znam.)
              AL = k¢d m¢du
                   00H (0) - pýesunut¡  ukazatele  souboru  CX:DX  bajt… od
                             zaŸ tku souboru
                   01H (1) - pýesunut¡  ukazatele  souboru o CX:DX bajt… od
                             souŸasn‚ pozice
                   02H (2) - pýesunut¡  ukazatele  souboru o CX:DX bajt… od
                             konce souboru

    vìstup:   DX:AX = nov  pozice ukazatele souboru (32-bit.Ÿ¡slo se znam.)
              nebo AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H (1) - neplatnì k¢d m¢du
                   06H (6) - neplatnì identifik tor souboru

    Funkce  zmØn¡  logickou  pozici  ukazatele  pro operace Ÿten¡/z pis pro
specifikovanì  soubor  zvìçen¡m  nebo  sn¡§en¡m  hodnoty ukazatele souboru.
Offset,  kterì se pýiŸ¡t  k ukazateli souboru se pýed v  v registrov‚m p ru
CX:DX  jako  32-bitov‚ cel‚ Ÿ¡slo se znam‚nkem; vìznamnØjç¡ Ÿ st offsetu je
ulo§ena  v  registru  CX.  K¢d  m¢du,  specifikovanì v AL, indikuje, zda se
offset  ulo§enì v CX:DX vztahuje k zaŸ tku souboru (m¢d 0), souŸasn‚ pozici
ukazatele souboru (m¢d 1) nebo ke konci souboru (m¢d 2).

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Nez visle  na tom, kterì m¢d je v AL specifikov n, pozitivn¡ hodnota
       offsetu  v  CX:DX  zp…sob¡  v§dy zvìçen¡ hodnoty ukazatele souboru a
       negativn¡  zp…sob¡ sn¡§en¡ hodnoty. Proto v m¢du 2 pozitivn¡ hodnota
       offsetu CX:DX zp…sob¡ pýesunut¡ ukazatele souboru za konec souboru.

       Chcete-li  pýesunout  ukazatel  na  konec souboru nebo zjistit d‚lku
       souboru, pou§ijte k¢d m¢du 2 a offset CX:DX = 0

       Ukazatel  souboru  je mo§n‚ pýesunout na pozici le§¡c¡ pýed zaŸ tkem
       souboru  nebo  za  koncem  souboru. Pýesunut¡ ukazatele pýed zaŸ tek
       souboru  sice  nezp…sob¡  hl çen¡  chyby,  avçak  bude chybn  pý¡çt¡
       operace Ÿten¡ nebo z pisu.

       Soubor  m…§e  bìt  rozç¡ýen  pýesunut¡m  ukazatele  souboru za konec
       souboru a z pisem jednoho nebo v¡ce bajt… dat na tuto novou pozici.

       Soubor m…§e bìt zkr cen pýesunut¡m ukazatele souboru na novou pozici
       po§adovan‚ho  konce souboru a proveden¡m operace z pisu (funkce 40H)
       s nastavenìm nulovìm poŸtem bajt… k z pisu (CX = 0).





ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ3ÿHÿ ÿ(ÿ6ÿ7ÿ) - poskytnut¡/nastaven¡ atrib. soub. (CHMOD)

    vstup:    AH = 43H
              AL = 00H (0) - poskytnut¡ atribut… souboru
                   01H (1) - nastaven¡ atribut… souboru
              CX = po§adovan‚ atributy (pouze pokud je AL=01H - nastaven¡)
              DS:DX = ukazatel na specifikaci souboru (ýetØzec ASCIIZ)

    vìstup:   CX = atributy souboru (pokud je AL=00H - poskytnut¡ atribut…)
              AX = k¢d chyby (pokud je CF = 1) - viz funkce DOS 59H
                   01H (1) - neplatnì k¢d funkce
                   02H (2) - soubor nenalezen
                   03H (3) - cesta nenalezena
                   05H (5) - po§adavek odm¡tnut

    Funkce  navrac¡  nebo  nastavuje  bajt atribut… souboru specifikovan‚ho
souboru.  K  urŸen¡ souŸasnìch atribut… ulo§te do registru AL hodnotu 00H -
atributy  budou  navr ceny  v  registru  CX. K nastaven¡ atribut… ulo§te do
registru AL hodnotu 01H a do registru CX po§adovan‚ atributy.

    Pokud  je  po§adov na  jin  zmØna ne§ archivn¡ho bitu pýi pr ci v s¡ti,
jsou po§adov na pý¡stupov  pr va pro vytv ýen¡ (CREATE).

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Registr CX specifikuje atributy souboru t¡mto zp…sobem:
           ÉÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
           º    CX     ³   specifikovanì atribut         º
           ÌÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
           º    00H    ³   norm ln¡ soubor               º
           º    01H    ³   pouze Ÿten¡ souboru (R/O)     º
           º    02H    ³   skrytì soubor (HID)           º
           º    04H    ³   syst‚movì soubor (SYS)        º
           º    20H    ³   archivn¡ soubor (ARC)         º
           ÈÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼
           - souŸtem tØchto hodnot lze atributy kombinovat

       Nastaven¡  jinìch  bit…  ne§  kter‚  jsou  uvedeny vygeneruje chybu.
       Atribut  adres ýe  nelze  zmØnit  ,  avçak m…§ete pýidat nebo zruçit
       ostatn¡ bity bajtu atribut… adres ýe. StaŸ¡, kdy§ pomoc¡ t‚to funkce
       specifikujete bajt atribut… maj¡c¡ nastaveny vçechny po§adovan‚ bity
       pro adres ý kromØ bitu 4 (adres ýovì bit).





ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿHÿ ÿ(ÿ6ÿ8ÿ) - vstupnØ/vìstupn¡ ovl d n¡ zaý¡zen¡ (IOCTL)

    vstup:    AH = 44H
              AL = podfunkce
              BX = identifik tor souboru nebo zaý¡zen¡
         nebo BL = Ÿ¡slo disku (je-li AL = 4,5: 0 = aktivn¡; 1 = A; atd.)
              CX = poŸet bajt…, kter‚ maj¡ bìt pýeŸteny nebo zaps ny
              DS:DX = data nebo adresa vyrovn vac¡ pamØti

    vìstup:   podle podfunkce

    Pýi pr ci v s¡ti nejsou podfunkce 4400H a 4408H podporov ny.

    Funkce  44H  (IOCTL)  je  soubor  podfunkc¡ (16 podfunkc¡ v DOS 3.3, 10
podfunkc¡  v DOS 3.0, 8 podfunkc¡ v DOS 2), kter‚ slou§¡ k vìmØnØ informac¡
mezi  aplikaŸn¡m  programem  a  zaý¡zen¡m  (nebo souborem). Pouze podfunkce
4400H,  4406H  a  4407H  jsou definov ny pro soubory. Ve vçech pý¡padech je
po§adovan  podfunkce urŸena obsahem registru AL:
 
ÉÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
º    AL    ³                        podfunkce                             º
ÌÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
º 00H ( 0) ³ poskytnut¡ informac¡ o zaý¡zen¡ (navr ceno v DX)             º
º 01H ( 1) ³ nastaven¡ informac¡ o zaý¡zen¡ (z DX; DH mus¡ bìt 0)         º
º 02H ( 2) ³ Ÿten¡ bajt… z ý¡d¡c¡ho kan lu zaý¡zen¡ do pamØti na          º
º          ³ adresu DS:DX (znakov‚ zaý¡zen¡)                              º
º 03H ( 3) ³ z pis bajt… z pamØti na adrese DS:DX do ý¡d¡c¡ho             º
º          ³ kan lu zaý¡zen¡ (znakov‚ zaý¡zen¡)                           º
º 04H ( 4) ³ Ÿten¡ bajt… z ý¡d¡c¡ho kan lu zaý¡zen¡ do pamØti na          º
º          ³ adresu DS:DX (blokov‚ zaý¡zen¡)                              º
º 05H ( 5) ³ z pis bajt… z pamØti na adrese DS:DX do ý¡d¡c¡ho             º
º          ³ kan lu zaý¡zen¡ (blokov‚ zaý¡zen¡)                           º
º 06H ( 6) ³ poskytnut¡ vstupn¡ho statutu zaý¡zen¡                        º
º 07H ( 7) ³ poskytnut¡ vìstupn¡ho statutu zaý¡zen¡                       º
º 08H ( 8) ³ je blokov‚ zaý¡zen¡ vìmØnn‚ ? (> DOS 3.0)                    º
º 09H ( 9) ³ je logick‚ zaý¡zen¡ lok ln¡ nebo d lkov‚ ? (> DOS 3.1)       º
º 0AH (10) ³ je identifik tor lok ln¡ nebo d lkovì ? (> DOS 3.1)          º
º 0BH (11) ³ zmØna Ÿ¡taŸe opakov n¡ sd¡len¡ (> DOS 3.0)                   º
º 0DH (13) ³ generov n¡ po§adavku IOCTL pro blokov‚ zaý¡zen¡ (> DOS 3.2)  º
º 0EH (14) ³ poskytnut¡ logick‚ho disku (> DOS 3.2)                       º
º 0FH (15) ³ nastaven¡ oznaŸen¡ logick‚ho disku (> DOS 3.2)               º
ÈÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

    Jednotliv‚  podfunkce  jsou  d le  posp ny  podrobnØji  jako samostatn‚
funkce 44xxH.

Pozn.: Pro soubory jsou definov ny pouze podfunkce 4400H, 4406H a 4407H.

       Podfunkce  4400H  a  4408H nejsou podporov ny v s¡œovìch zaý¡zen¡ch.
       Podfunkce  440BH  vy§aduj¡ sd¡len¡ souboru, kter‚ se naŸte do pamØti
       pomoc¡ povelu SHARE.





ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿ0ÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ0ÿ) - IOCTL: poskytnut¡ inf. o zaý¡zen¡

    vstup:    AH = 44H
              AL = 00H
              BX = identifik tor zaý¡zen¡ nebo souboru

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
              DX = informace o zaý¡zen¡

    Podfunkce 4400H navrac¡ v DX informace o zaý¡zen¡. Bit 7 registru DX je
nastaven na 1, pokud je kan lem znakov‚ zaý¡zen¡, a je nastaven na 0, pokud
je kan lem blokov‚ zaý¡zen¡ (diskovì soubor).

    DX pro znakov‚ zaý¡zen¡ (bit 7 registru DX = 1):
   ÉÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
   º  bit ³                          popis                               º
   ÌÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
   º   0  ³   nastaven, pokud je vstupn¡m zaý¡zen¡m standardn¡ konzola   º
   º   1  ³   nastaven, pokud je vìstupn¡m zaý¡zen¡m standardn¡ konzola  º
   º   2  ³   nastaven, pokud jde o nulov‚ zaý¡zen¡                      º
   º   3  ³   nastaven, pokud jsou zaý¡zen¡m hodiny                      º
   º   4  ³   nastaven, pokud se jedn  o speci ln¡ zaý¡zen¡              º
   º   5  ³   nastaven pro bin rn¡ m¢d, nulov n pro ASCII m¢d            º
   º   6  ³   nulov n, pokud je na vstupu konec souboru (EOF)            º
   º   7  ³   nastaven pro indikaci, §e se jedn  o zaý¡zen¡              º
   º 8-13 ³   rezervov no                                                º
   º  14  ³   nastaven, pokud je mo§no zaý¡zen¡ ovl dat ý¡d¡c¡m ýetØzcem º
   º      ³   pýes funkce 4402H, 4403H                                   º
   º  15  ³   rezervov no                                                º
   ÈÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

    DX pro blokov‚ zaý¡zen¡ (bit 7 registru DX = 0):
   ÉÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
   º  bit ³                         popis                                º
   ÌÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
   º  0-5 ³   Ÿ¡slo blokov‚ho zaý¡zen¡ (A = 0; B = 1; atd.)              º
   º   6  ³   nastaven, pokud bylo do kan lu zapisov no                  º
   º   7  ³   nulov n pro indikaci, §e se jedn  o blokov‚ zaý¡zen¡       º
   º 8-13 ³   rezervov no                                                º
   º  14  ³   nastaven, pokud je mo§no zaý¡zen¡ ovl dat ý¡d¡c¡m ýetØzcem º
   º      ³   pýes funkce 4404H a 4405H                                  º
   º  15  ³   rezervov no                                                º
   ÈÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

Pozn.: Stav je definov n v okam§iku vol n¡ syst‚mu. PozdØji, kdy§ je ý¡zen¡
       vr ceno ze syst‚mu, u§ivateli vr cenì stav ji§ nemus¡ pýesnØ odr §et
       skuteŸnì okam§itì stav zaý¡zen¡ nebo souboru.



ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿ1ÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ1ÿ) - IOCTL: nastaven¡ inf. o zaý¡zen¡

    vstup:    AH = 44H
              AL = 01H
              BX = identifik tor zaý¡zen¡ nebo souboru
              DH = 00H
              DL = informace o zaý¡zen¡

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H

    Podfunkce 4401H nastavuje informace o zaý¡zen¡ podle obsahu reg. DX.

   ÉÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
   º  bit ³                          popis                               º
   ÌÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
   º   0  ³   nastaven, pokud je vstupn¡m zaý¡zen¡m standardn¡ konzola   º
   º   1  ³   nastaven, pokud je vìstupn¡m zaý¡zen¡m standardn¡ konzola  º
   º   2  ³   nastaven, pokud jde o nulov‚ zaý¡zen¡                      º
   º   3  ³   nastaven, pokud jsou zaý¡zen¡m hodiny                      º
   º   4  ³   rezervov no                                                º
   º   5  ³   nastaven pro bin rn¡ m¢d, nulov n pro ASCII m¢d            º
   º   6  ³   nulov n, pokud je na vstupu konec souboru (EOF)            º
   º   7  ³   nastaven pro indikaci, §e se jedn  o zaý¡zen¡              º
   º 8-15 ³   mus¡ bìt 0                                                 º
   ÈÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

Pozn.: Podfunkce nen¡ podporov na pro diskov‚ soubory (blokov  zaý¡zen¡).





ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿ2ÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ2ÿ) - IOCTL: Ÿten¡ ze znakov‚ho zaý¡zen¡

    vstup:    AH = 44H
              AL = 02H
              BX = identifik tor zaý¡zen¡
              CX = poŸet bajt…, kter‚ maj¡ bìt pýeŸteny
              DS:DX = data nebo adresa vyrovn vac¡ pamØti

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H (1) - zaý¡zen¡ nepodporuje ý¡d¡c¡ ýetØzce

    Podfunkce  4402H  Ÿte  CX  datovìch  bajt…  z ý¡d¡c¡ho kan lu znakov‚ho
zaý¡zen¡  buÔ  do  registru  DS:DX nebo do pamØti od adresy DS:DX. Jak jsou
data  Ÿtena  je  definov no driverem zaý¡zen¡. Data mohou bìt Ÿtena pouze v
pý¡padØ, §e zaý¡zen¡ m…§e prov dØt ý¡d¡c¡ ýetØzce.




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿ3ÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ3ÿ) - IOCTL: z pis na znakov‚ zaý¡zen¡

    vstup:    AH = 44H
              AL = 03H
              BX = identifik tor zaý¡zen¡
              CX = poŸet bajt…, kter‚ maj¡ bìt zaps ny
              DS:DX = data nebo adresa vyrovn vac¡ pamØti

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H (1) - zaý¡zen¡ nepodporuje ý¡d¡c¡ ýetØzce

    Podfunkce  4403H zapisuje CX datovìch bajt… buÔ z registru DS:DX nebo z
pamØti  od  adresy  DS:DX na ý¡d¡c¡ kan l znakov‚ho zaý¡zen¡. Jak jsou data
zapisov na je definov no driverem zaý¡zen¡. Data mohou bìt zapisov na pouze
v pý¡padØ, §e zaý¡zen¡ m…§e prov dØt ý¡d¡c¡ ýetØzce.





ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿ4ÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ4ÿ) - IOCTL: Ÿten¡ z blokov‚ho zaý¡zen¡

    vstup:    AH = 44H
              AL = 04H
              BL = Ÿ¡slo disku (0 = aktivn¡ disk; 1 = A; 2 = B; atd.)
              CX = poŸet bajt…, kter‚ maj¡ bìt pýeŸteny
              DS:DX = data nebo adresa vyrovn vac¡ pamØti

    vìstup:   AX = poŸet pýeŸtenìch bajt…  (pokud je CF = 0)
                 = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H (1) - zaý¡zen¡ nepodporuje ý¡d¡c¡ ýetØzce
                   05H (5) - disk je neplatnì

    Podfunkce  4404H  Ÿte  CX  datovìch  bajt…  z ý¡d¡c¡ho kan lu blokov‚ho
zaý¡zen¡  buÔ  do  registru  DS:DX nebo do pamØti od adresy DS:DX. Jak jsou
data  Ÿtena  je  definov no driverem zaý¡zen¡. Data mohou bìt Ÿtena pouze v
pý¡padØ, §e zaý¡zen¡ m…§e prov dØt ý¡d¡c¡ ýetØzce.





ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿ5ÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ5ÿ) - IOCTL: z pis na blokov‚ zaý¡zen¡

    vstup:    AH = 44H
              AL = 03H
              BL = Ÿ¡slo disku (0 = aktivn¡ disk; 1 = A; 2 = B; atd.)
              CX = poŸet bajt…, kter‚ maj¡ bìt zaps ny
              DS:DX = data nebo adresa vyrovn vac¡ pamØti

    vìstup:   AX = poŸet zapsanìch bajt…  (pokud je CF = 0)
                 = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H (1) - zaý¡zen¡ nepodporuje ý¡d¡c¡ ýetØzce
                   05H (5) - disk je neplatnì

    Podfunkce  4405H zapisuje CX datovìch bajt… buÔ z registru DS:DX nebo z
pamØti  od  adresy  DS:DX na ý¡d¡c¡ kan l blokov‚ho zaý¡zen¡. Jak jsou data
zapisov na je definov no driverem zaý¡zen¡. Data mohou bìt zapisov na pouze
v pý¡padØ, §e zaý¡zen¡ m…§e prov dØt ý¡d¡c¡ ýetØzce.




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿ6ÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ6ÿ) - IOCTL: poskytnut¡ vstup. statutu

    vstup:    AH = 44H
              AL = 06H
              BX = identifik tor souboru nebo zaý¡zen¡

    vìstup:   AL = FFH - ne§ je konec souboru/pokud je zaý¡zen¡ pýipraveno
              AL = 00H - dosa§eno konce souboru/zaý¡zen¡ nen¡ pýipraveno

    Podfunkce  hl s¡  vstupn¡  statut zaý¡zen¡ nebo souboru. AL navrac¡ buÔ
hodnotu  FFH  (zaý¡zen¡  pýipraveno  nebo  nen¡  jeçtØ  konec souboru) nebo
hodnotu 00H (zaý¡zen¡ nepýipraveno nebo dosa§eno konce souboru).




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿ7ÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ7ÿ) - IOCTL: poskytnut¡ vìstup. statutu

    vstup:    AH = 44H
              AL = 07H
              BX = identifik tor souboru nebo zaý¡zen¡

    vìstup:   AL = FFH - ne§ je konec souboru/pokud je zaý¡zen¡ pýipraveno
              AL = 00H - dosa§eno konce souboru/zaý¡zen¡ nen¡ pýipraveno

    Podfunkce  hl s¡  vìstupn¡ statut zaý¡zen¡ nebo souboru. AL navrac¡ buÔ
hodnotu  FFH  (zaý¡zen¡  pýipraveno  nebo  nen¡  jeçtØ  konec souboru) nebo
hodnotu 00H (zaý¡zen¡ nepýipraveno nebo dosa§eno konce souboru).




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿ8ÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ8ÿ) - IOCTL: je zaý¡zen¡ vìmØnn‚ ?

    vstup:    AH = 44H
              AL = 08H
              BL = Ÿ¡slo disku (0=aktivn¡; 1=A; atd.)

    vìstup:   AX = 00H - zaý¡zen¡ je vìmØnn‚
                   01H - zaý¡zen¡ je pevn‚
                   0FH - neplatn  specifikace disku
                   chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                        01H - je s¡œov‚ zaý¡zen¡

    Tato  podfunkce (pouze DOS 3.0 a vyçç¡ verze) indikuje, zda m  zaý¡zen¡
vìmØnn‚  m‚dium  (jako  je  pru§nì  disk  nebo vìmØnnì kartovì pevnì disk).
Hodnota  00H  registru  AX  znamen ,  §e  zaý¡zen¡  je vìmØnn‚. Hodnota 01H
registru AX znamen , §e jde o pevn‚ zaý¡zen¡. Pokud je v BL zad na neplatn 
specifikace disku, navrac¡ v registru AX chybovì k¢d 0FH.




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿ9ÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ9ÿ) - IOCTL: je log. zaý¡zen¡ d lkov‚ ?

    vstup:    AH = 44H
              AL = 09H
              BL = Ÿ¡slo disku (0=aktivn¡; 1=A; atd.)

    vìstup:   DX = bit 12: 0 - zaý¡zen¡ je lok ln¡
                           1 - zaý¡zen¡ je d lkov‚

    Podfunkce  (pouze DOS 3.1 a vyçç¡ verze) umo§åuje urŸit, zda je blokov‚
zaý¡zen¡  (specifikovan‚  v BL) pýidru§eno k s¡œov‚mu adres ýi. Pro lok ln¡
zaý¡zen¡  navrac¡ DX slovo atribut… ze z hlav¡ zaý¡zen¡ s vynulovanìm bitem
12; pro d lkov  zaý¡zen¡ navrac¡ DX toto slovo s nastavenìm bitem 12.




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿAÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ1ÿ0ÿ) - IOCTL:je ident. d lk. zaý¡zen¡ ?

    vstup:    AH = 44H
              AL = 0AH
              BX = identifik tor zaý¡zen¡

    vìstup:   AX = bit 15: 0 - zaý¡zen¡ je lok ln¡
                           1 - zaý¡zen¡ je d lkov‚

    Podfunkce  (pouze  DOS  3.1  a  vyçç¡  verze)  umo§åuje  urŸit,  zda je
identifik tor  zaý¡zen¡  (specifikovanì  v  BX)  pro  lok ln¡  nebo d lkov‚
zaý¡zen¡.  Pro  lok ln¡  identifik tor navrac¡ DX slovo atribut… ze z hlav¡
zaý¡zen¡ s vynulovanìm bitem 15; pro d lkov  zaý¡zen¡ navrac¡ DX toto slovo
s nastavenìm bitem 15.




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿBÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ1ÿ1ÿ) - IOCTL: Ÿ¡taŸ opakov n¡ sd¡len¡

    vstup:    AH = 44H
              AL = 0BH
              CX = poŸet, kolikr t bude prov dØna smyŸka prodlevy
              DX = poŸet opakov n¡

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H

    Podfunkce  (pouze  pro  DOS 3.0 a vyçç¡) nastavuje dva parametry, kter‚
pou§¡v   DOS  k pokus…m o ýeçen¡ konflikt… pýi sd¡len¡ soubor…. Specifikuje
v  registru  DX  poŸet opakov n¡ a v registru CX poŸet Ÿasovìch prodlev mezi
jednotlivìmi  pr…chody  pýi  opakov n¡ pokus… o pý¡stup. Standardn¡ hodnota
nastaven¡  jsou  3  opakov n¡  a  1  Ÿasov   prodleva.  Pýed  pou§it¡m t‚to
podfunkce mus¡ bìt naŸten v pamØti pý¡kaz SHARE.




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿDÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ1ÿ3ÿ) - IOCTL:generov n¡ po§adavku IOCTL

    vstup:    AH = 44H
              AL = 0DH
              BL = Ÿ¡slo disku (0=aktivn¡; 1=A; atd.)
              CH = 08H (hlavn¡ k¢d)
              CL = vedlejç¡ k¢d:
                        40H - nastaven¡ parametr… zaý¡zen¡
                        60H - poskytnut¡ parametr… zaý¡zen¡
                        41H - z pis stopy na logick‚ zaý¡zen¡
                        61H - Ÿten¡ stopy z logick‚ho zaý¡zen¡
                        42H - form tov n¡ a verifikace stopy na log. zaý.
                        62H - verifikace stopy logick‚ho zaý¡zen¡
              DS:DX = ukazatel na blok parametr…

    Tato  podfunkce (pouze DOS 3.2 a vyçç¡ verze) umo§åuje ý¡zen¡ blokov‚ho
zaý¡zen¡ na n¡zk‚ £rovni.




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿEÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ1ÿ4ÿ) - IOCTL:poskytnut¡ logick‚ho disku

    vstup:    AH = 44H
              AL = 0EH
              BL = Ÿ¡slo disku (0=aktivn¡; 1=A; atd.)

    vìstup:   AL = 00H pokud je blok. zaý¡zen¡ pýiýazen pouze jeden znak
                 = onaŸen¡ disku pou§¡van‚ jako posledn¡ (1=A, atd.)
              AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H

    Podfunkce  (pouze  DOS  verze  3.2  a  vyçç¡)  navrac¡  oznaŸen¡  disku
pou§¡van‚ jako nejposlednØjç¡ pro blokov‚ zaý¡zen¡, kter‚ m  v¡ce ne§ jedno
oznaŸen¡   (logickì  disk).  Napý¡klad  pru§nì  disk  v  syst‚mu  s  jednou
mechanikou  m…§e  bìt  pops n buÔ jako A: nebo jako B:. Tato funkce ozn m¡,
zda m  blokov‚ zaý¡zen¡ v¡ce ne§ jedno oznaŸen¡, a pokud tomu tak je, kter‚
oznaŸen¡  zaý¡zen¡  bylo  pou§ito  jako  nejposlednØjç¡  (to umo§åuje napý.
ozn mit  u§ivateli,  aby  vymØnil  diskety  v mechanice, pokud je v syst‚mu
po§adov n pý¡stup na jinou disketu, ne§ kter  byla dosud pou§¡v na).




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ4ÿ0ÿFÿHÿ ÿ(ÿ6ÿ8ÿ-ÿ1ÿ5ÿ) - IOCTL: nastaven¡ logick‚ho disku

    vstup:    AH = 44H
              AL = 0FH
              BL = Ÿ¡slo disku (0=aktivn¡; 1=A; atd.)

    vìstup:   AL = 00H pokud je blok. zaý¡zen¡ pýiýazen pouze jeden znak
                 = nejvyçç¡ onaŸen¡ blokov‚ho zaý¡zen¡ (1=A, atd.)
              AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H

    Podfunkce  (pouze  DOS  verze  3.2  a  vyçç¡)  nastavuje oznaŸen¡ disku
pou§¡van‚ jako nejposlednØjç¡ pro blokov‚ zaý¡zen¡, kter‚ m  v¡ce ne§ jedno
oznaŸen¡   (logickì  disk).  Napý¡klad  pru§nì  disk  v  syst‚mu  s  jednou
mechanikou  m…§e  bìt  pops n buÔ jako A: nebo jako B:. Tato funkce ozn m¡,
zda  m   blokov‚  zaý¡zen¡  v¡ce  ne§  jedno oznaŸen¡, a pokud tomu tak je,
nastav¡ oznaŸen¡ zaý¡zen¡ jako nejposlednØjç¡.

Pozn.: Pokud  pou§ijete vstupnØ/vìstupn¡ operaci pou§¡vaj¡c¡ oznaŸen¡ disku
       jin‚  ne§  nejposlednØji  pou§¡van‚ (u disku, kterì m  v¡ce mo§nost¡
       oznaŸen¡),  zobraz¡ DOS hl çen¡ "Insert diskette for..." oznamuj¡c¡,
       §e  m  u§ivatel vlo§it novou disketu, kter  pý¡sluç¡ jin‚ po§adovan‚
       logick‚  jednotce,  ne§  s  kterou  byla  jako  s posledn¡ prov dØna
       diskov    operace.   Hl çen¡   m…§ete  odstranit  nastaven¡m  nov‚ho
       logick‚ho  disku  pomoc¡  t‚to  funkce  pýed  dalç¡ vstupnØ/vìstupn¡
       operac¡.




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ5ÿHÿ ÿ(ÿ6ÿ9ÿ) - zdvojen¡ identifik toru souboru (DUP)

    vstup:    AH = 45H
              BX = identifik tor souboru

    vìstup:   AX = zduplikovanì identifik tor souboru (pokud je CF = 0)
                 = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                        04H - nen¡   volnì   § dnì   identifik tor  souboru
                              (pý¡liç mnoho otevýenìch soubor…)
                        06H - neplatnì identifik tor souboru

    Funkce   vytvoý¡   novì   identifik tor   souboru   zduplikov n¡m   ji§
existuj¡c¡ho   identifik toru   otevýen‚ho   souboru  nebo  zaý¡zen¡.  Novì
identifik tor sd¡l¡ existuj¡c¡ ukazatel souboru.

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Pýesunut¡  ukazatele  souboru  jednoho identifik toru souboru pomoc¡
       READ,  WRITE  nebo  LSEEK  zp…sob¡  pýesunut¡  ukazatele  i  druh‚ho
       identifik toru   souboru.   Avçak  uzavýen¡  jednoho  identifik toru
       nezp…sob¡ uzavýen¡ jin‚ho identifik toru souboru.

       Zduplikov n¡m identifik toru souboru a jeho opØtnìm uzavýen¡m m…§ete
       um¡stit  soubor  z  vyrovn vac¡  pamØti  na  disk  a ulo§it adres ý;
       p…vodn¡   identifik tor  pýitom  z…st v   i  nad le  otevýen,  tak§e
       nemus¡te soubor znovu otev¡rat, co§ je ŸasovØ n roŸn  operace.





ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ6ÿHÿ ÿ(ÿ7ÿ0ÿ) - nucen‚ zdvojen¡ identif. souboru (FORCDUP)

    vstup:    AH = 46H
              BX = prvn¡ identifik tor souboru
              CX = identifik tor souboru, kterì m  bìt zmØnØn

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                        04H - nen¡   volnì   § dnì   identifik tor  souboru
                              (otevýeno pý¡liç mnoho soubor…)
                        06H - neplatnì identifik tor souboru

    Funkce   zp…sob¡,   §e   druhì   identifik tor  (v  CX)  bude  nastaven
odpov¡daj¡c¡m  zp…sobem na stejnì soubor a stejnou pozici ukazatele souboru
jako  prvn¡  identifik tor  (v  BX).  Oba  identifik tory  pýitom  mus¡ ji§
existovat. Pokud se druhì identifik tor vztahuje k otevýen‚mu souboru, bude
soubor  nejdý¡ve  uzavýen  a potom teprve bude nastaven druhì identifik tor
stejnØ jako prvn¡.

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Pýesunut¡  ukazatele  souboru  jednoho identifik toru souboru pomoc¡
       READ,  WRITE  nebo  LSEEK  zp…sob¡  pýesunut¡  ukazatele  i  druh‚ho
       identifik toru   souboru.   Avçak  uzavýen¡  jednoho  identifik toru
       nezp…sob¡ uzavýen¡ jin‚ho identifik toru souboru.

       Tato  funkce  je  pou§iteln   pro pýesmØrov n¡. Napý. k pýesmØrov n¡
       standardn¡ho  vìstupu  (pýeddefinovan‚ho  jako  identifik tor  1) na
       soubor  um¡stØte  do  CX  hodnotu  1  a do BX um¡stØte identifik tor
       souboru, na kterì m  bìt pýesmØrov n vìstup.




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ7ÿHÿ ÿ(ÿ7ÿ1ÿ) - poskytnut¡ aktivn¡ho adres ýe

    vstup:    AH = 47H
              DL = Ÿ¡slo disku (0=aktivn¡; 1=A; atd.)
              DS:SI = ukazatel na 64-bajtovou vyrovn vac¡ pamØœ

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   0FH (15) - neplatn  specifikace disku

    Funkce  navrac¡  pln‚  oznaŸen¡ cesty aktivn¡ho adres ýe kromØ oznaŸen¡
disku  a  inicializaŸn¡ho  znaku  lom¡tka  jako  ýetØzec  ASCIIZ ulo§enì ve
vyrovn vac¡ pamØti od adresy DS:SI.

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       OznaŸen¡  cesty  m…§e  bìt  dlouh‚  a§ 63 bajt… (bez inicializaŸn¡ho
       znaku  lom¡tka)  plus  ukonŸuj¡c¡  nulovì  bajt.  Pokud  je aktivn¡m
       adres ýem  z kladn¡  adres ý  disku  (tzv. koýennì adres ý), navrac¡
       funkce  nulovì ýetØzec ASCIIZ (tzn. §e prvn¡ bajt vyrovn vac¡ pamØti
       obsahuje nulu).

       V  nØkterìch  verz¡ch  pýedch zej¡c¡ch  verzi DOS 3.0 mohlo oznaŸen¡
       cesty  adres ýe  obsahovat  Ÿleny  delç¡ ne§ 12 znak… pou§¡van‚ jako
       omezen¡  pro  jm‚na  soubor…. Napý. pokud pod DOS 2.0 u§ivatel zadal
       pý¡kaz  "cd  \jmenoadresare\podadr" a pýitom existuje cesta adres ýe
       "\jmenoadr\podadr",  navr t¡  tato  funkce  "\jmenoadresare\podadr".
       Tato  cesta  je navr cena v malìch p¡smenech a obsahuje pý¡liç mnoho
       znak….  DOS  3.0  a  vyçç¡ v§dy vrac¡ spr vn‚ jm‚no cesty ve velkìch
       p¡smenech - v tomto pý¡padØ "JMENOADR\PODADR".




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ8ÿHÿ ÿ(ÿ7ÿ2ÿ) - pýidØlen¡ pamØti

    vstup:    AH = 48H
              BX = poŸet odstavc… pamØti, kter  m  bìt pýidØlena

    vìstup:   AX = adresa segmentu pýidØlen‚ pamØti (pokud CF = 0)
                 = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   07H (7) - ý¡d¡c¡ blok pamØti zniŸen
                   08H (8) - nepostaŸuj¡c¡ pamØœ
              BX = velikost nejdelç¡ho voln‚ho bloku (pokud je CF = 1)

    Funkce  48H dynamicky pýidØluje pamØœ v n sobc¡ch po 16 bajtech (tj. po
odstavc¡ch).  Velikost  Ÿ steŸnØ pýidØlen‚ pamØti (pokud pamØœ nedostaŸuje)
je  navr cena  pýi chybØ 08H v registru BX (v odstavc¡ch). Pokud je operace
£spØçn ,  ukazuje AX:0000H na zaŸ tek pýidØlen‚ho bloku pamØti (AX obsahuje
adresu segmentu; offset je v§dy 0000H).



Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Pokud  nastav¡te  pýed  vol n¡m  funkce BX=FFFFH, m…§ete tuto funkci
       pou§¡t  k  zjiçtØn¡,  jak velk  Ÿ st pamØti je voln  (je navr cena v
       registru  BX).  To vyvol  chybu, kterou vçak m…§ete ignorovat, neboœ
       DOS nem…§e pýidØlit pamØœ vØtç¡ ne§ 640K.




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿ9ÿHÿ ÿ(ÿ7ÿ3ÿ) - uvolnØn¡ pýidØlen‚ pamØti

    vstup:    AH = 49H
              ES = adresa segmentu pamØti, kter  m  bìt uvolnØna

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   07H (7) - ý¡d¡c¡ blok pamØti zniŸen
                   09H (9) - neplatn  adresa bloku pamØti

    Funkce  49H  navr t¡  do  DOS pamØœ, kter  byla pýidØlena pomoc¡ funkce
48H.  ES  ukazuje na adresu segmentu bloku, kterì je navracen; je to stejn 
hodnota jako ta, kterou navr tila funkce 48H v registru AX.

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿAÿHÿ ÿ(ÿ7ÿ4ÿ) - modifikace pýidØlen¡ pamØti (SETBLOCK)

    vstup:    AH = 4AH
              BX = nov  velikost bloku pamØti (v odstavc¡ch)
              ES = adresa segmentu bloku pamØti, kterì je modifikov n

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   07H (7) - ý¡d¡c¡ blok pamØti je zniŸen
                   08H (8) - nepostaŸuj¡c¡ pamØœ
                   09H (9) - neplatn  adresa bloku

    Funkce  umo§åuje  zvØtçit nebo zmençit velikost bloku pamØti, kterì byl
pýidØlen  funkc¡  48H.  ES  obsahuje  adresu  segmentu  bloku pamØti, jeho§
velikost  m   bìt  zmØnØna. BX obsahuje novou velikost bloku (v odstavc¡ch,
tj. v n sobc¡ch 16 bajt…).

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).



ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿBÿHÿ ÿ(ÿ7ÿ5ÿ) - naŸten¡ nebo proveden¡ programu (EXEC)

    vstup:    AH = 4BH
              AL = 00H - naŸten¡ programu a jeho start
                   03H - naŸten¡ programu, avçak nebude odstartov n
              DS:DX = ukazatel  na  ýetØzec  ASCIIZ  specifikuj¡c¡ oznaŸen¡
                      cesty k podprogramu
              ES:BX = ukazatel na blok parametr…

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H ( 1) - neplatn‚ Ÿ¡slo funkce
                   02H ( 2) - soubor nenalezen
                   03H ( 3) - cesta nenalezena
                   05H ( 5) - po§adavek odm¡tnut
                   08H ( 8) - nepostaŸuj¡c¡ pamØœ
                   0AH (10) - neplatn‚ prostýed¡
                   0BH (11) - neplatnì form t

    Funkce mØn¡ vçechny registry.

    Funkce  4BH  umo§åuje  programu  zav‚st  podprogram z disku do pamØti a
(pokud je to po§adov no) spustit jej. Pýi zaveden¡ programu se z otcovsk‚ho
procesu  zduplikuj¡  do  synovsk‚ho  procesu  vçechny  otevýen‚  soubory  a
prostýed¡  procesu - to umo§åuje, aby otcovskì proces pýesmØroval podle sv‚
potýeby  napý.  vstupn¡  a  vìstupn¡ zaý¡zen¡ a potom vyvolal mapý. tý¡d¡c¡
program.

    Pokud  je  v  AL  zad na  hodnota  00H,  podprogram se naŸte do pamØti,
vytvoý¡  se  jeho prefix programov‚ho segmentu PSP a program se odstartuje.
Vektory ukonŸen¡ a obsluhy Ctrl-Break se nastav¡ na adresu instrukce, kter 
n sleduje za vol n¡m t‚to funkce EXEC v hlavn¡m programu, tak§e po ukonŸen¡
podprogramu  z  disku  se ý¡zen¡ navr t¡ do hlavn¡ho programu, jakoby çlo o
vol n¡ bØ§n‚ho podprogramu.

    Pokud  je  v  AL  zad na  hodnota  03H,  podprogram se naŸte z disku do
pamØti,  nevytvoý¡  se  vçak  prefix  programov‚ho  segmentu  PSP,  ani  se
podprogram  automaticky  nespust¡, avçak hlavn¡ program m…§e do podprogramu
vskoŸit pý¡mo.

    Do registrov‚ho p ru DS:DX ulo§te ukazatel na ýetØzec ASCIIZ obsahuj¡c¡
oznaŸen¡  disku,  cesty  a  jm‚no souboru, kterì se m  zav‚st do pamØti. Do
registr…  ES:BX ulo§te ukazatel na blok parametr…, kter‚ specifikuj¡ bli§ç¡
podm¡nky pro proveden¡ podprogramu. Blok parametr… m  tuto strukturu:

    Pro podfunkci 00H (naŸti a spusti):
ÉÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
º  offset  ³ velikost (bajt…) ³                 popis                   º
ÌÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
º 00H ( 0) ³        2         ³ adresa segmentu ýetØzc… prostýed¡       º
º 02H ( 2) ³        4         ³ segment a offset pý¡kazov‚ho ý dku      º
º 06H ( 6) ³        4         ³ segment a offset prvn¡ho aktivn¡ho FCB  º
º 0AH (10) ³        4         ³ segment a offset druh‚ho aktivn¡ho FCB  º
ÈÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

    Pro podfunkci 03H (naŸti ale nespouçtØj):
ÉÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
º  offset  ³ velikost (bajt…) ³                 popis                   º
ÌÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
º 00H ( 0) ³        2         ³ adresa segmentu kam bude soubor naŸten  º
º 02H ( 2) ³        2         ³ relokaŸn¡ faktor programu (aplikuje se  º
º          ³                  ³     pouze pro form ty program… EXE)     º
ÈÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

Prostýed¡: üetØzce  prostýed¡,  kter‚  mus¡  bìt  seýazeny  po  odstavc¡ch,
           obsahuj¡  posloupnosti  ýetØzc… ASCIIZ n sledovan‚ bajtem 00H po
           vçech   ýetØzc¡ch.   Ka§dì   ýetØzec  ASCIIZ  m   typicky  formu
           parametr=hodnota. Celkovì ýetØzec prostýed¡ mus¡ bìt svou d‚lkou
           menç¡  ne§  32K. Pokud je segment pro ýetØzec prostýed¡ nastaven
           na   00H,  sd¡l¡  podprogram  prostýed¡  programu,  kterì  tento
           podprogram vyvolal.

           Podprogram  v§dy  pýij¡m   kopii  ýetØzce prostýed¡, tak§e § dn 
           zmØna  proveden  v prostýed¡ podprogramu se neodraz¡ v prostýed¡
           hlavn¡ho programu.

Soubory:   Pokud  je  podprogram  naŸten  do  pamØti  a  vykon v n, vçechny
           otevýen‚  identifik tory  soubor…  se  uvoln¡ pro podprogram. To
           znamen , §e volaj¡c¡ program m…§e pýesmØrovat standardn¡ vstup a
           vìstup  pro  podprogram. Nejsou uvolnØny pro podprogram pouze ty
           identifik tory  soubor…,  kter‚ byly otevýeny s nastavenìm bitem
           pý¡znaku pod¡lu (bit 7 registru AL - viz funkce 3DH).

PamØœ:     Pýed  pou§it¡m  funkce  4BH  mus¡te  uvolnit dostatek pamØti pro
           naŸten¡ podprogramu resp. pro jeho provoz (voz funkce 4AH).

Varov n¡:  Tato  funkce  mØn¡  vçechny  registry vŸetnØ registru z sobn¡ku.
           Proto  pýed  vol n¡m  podprogramu  ulo§te  registry  SS  a SP do
           promØnnìch  (tj.  na  urŸit   pamØœov   m¡sta)  uvnitý  hlavn¡ho
           programu  a  po n vratu z podprogramu nejdý¡ve navraœte tyto dva
           registry a potom teprve m…§ete opØt pou§¡vat z sobn¡k.

Pozn.:     Funkce EXEC vol  zav dØc¡ Ÿ st COMMAND.COM k zaveden¡ programu.




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿCÿHÿ ÿ(ÿ7ÿ6ÿ) - ukonŸen¡ procesu (EXIT)

    vstup:    AH = 4CH
              AL = n vratovì k¢d

    vìstup:   § dnì - neexistuje n vrat

    Tato  funkce  je  spr vn   metoda  ukonŸen¡  programu v DOS verze 2.0 a
vyçç¡.  Funkce  uzavýe  vçechny  soubory  a navr t¡ ý¡zen¡ zpØt do hlavn¡ho
(otcovsk‚ho)  procesu  (obvykle  COMMAND.COM).  Pýitom  lze  v  registru AL
specifikovat  n vratovì  k¢d,  kterì  slou§¡ hlavn¡mu procesu k informaci o
Ÿinnosti ukonŸen‚ho procesu.

Pozn.: N vratovì  k¢d m…§e bìt testov n pomoc¡ funkce 4DH nebo v pý¡kazov‚m
       souboru syst‚mu pomoc¡ pý¡kazu ERRORLEVEL.

       Tato  metoda  ukonŸen¡  procesu je vìhodnØjç¡ ne§ pýeruçen¡ INTú20H,
       neboœ CS nemus¡ obsahovat adresu prefixu z hlav¡ programu PSP.

Pý¡klad: N sleduj¡c¡ kr tkì program je velmi u§iteŸnou maliŸkost¡ pýi pr ci
         v  operaŸn¡m  syst‚mu. Umo§åuje vØtvit u§ivatelsk‚ volby v syst‚mu
         podle zad n¡ z kl vesnice. Program Ÿek  na znak z kl vesnice (znak
         se nezobrazuje, tato Ÿinnost se ponech v  na pý¡kazov‚m souboru) a
         pokud  je  to  p¡smeno,  navr t¡ k¢d odpov¡daj¡c¡ poýadov‚mu Ÿ¡slu
         p¡smene (A=0, ..., Z=25) nez visle na tom, zda jde o velk‚ Ÿi mal‚
         p¡smeno.  D le  je uveden kr tkì pý¡kazovì soubor ukazuj¡c¡ zp…sob
         pr ce s t¡mto programem (program je zde pojmenov n PISMENO.EXE).

         cyklus:   mov       ah,8
                   int       21h            ; Ÿek n¡ na zad n¡ znaku
                   sub       al,"A"         ; odeŸten¡ znaku "A"
                   jc        cyklus         ; menç¡ ne§ "A"
                   cmp       al,27
                   jl        konec          ; je platnì znak
                   sub       al,32          ; korekce malìch p¡smen
                   jc        cyklus         ; nen¡ mal‚ p¡smeno
                   cmp       al,26          ; je p¡smeno ?
                   jg        cyklus         ; nen¡ mal‚ p¡smeno
         konec:    mov       ah,4ch
                   int       21h            ; ukonŸen¡ programu

Pý¡klad povelov‚ho souboru:

         echo off
         echo Zadejte vaçi volbu (ANO/NE)
         :start
         PISMENO.EXE
         if errorlevel == 14 goto start
         if errorlevel == 13 goto ne
         if errorlevel == 1 goto start
         echo ANO !
         goto start
         :ne
         echo NE !
         goto start




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿDÿHÿ ÿ(ÿ7ÿ7ÿ) - poskytnut¡ n vrat. k¢du podprocesu (WAIT)

    vstup:    AH = 4DH

    vìstup:   AX = n vratovì k¢d

    Funkce  poskytne n vratovì k¢d procesu, kterì byl ukonŸen pomoc¡ funkce
4CH  (EXIT)  nebo funkce 31H (pýeruçen¡ a ponech n¡ rezidentn¡m). N vratovì
k¢d  se  skl d   ze  dvou  Ÿ st¡: AL obsahuje n vratovì k¢d, kterì nastavil
pýeruçen¡  proces;  AH  obsahuje zp…sob, jakìm byl podproces ukonŸen.

    Mo§n‚ hodnoty registru AH jsou:
   ÉÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
   º 00H (0) ³ norm ln¡ pýeruçen¡                                       º
   º 01H (1) ³ pýeruçen¡ kl vesami <Ctrl>-<Break> (<Ctrl>-C)            º
   º 02H (2) ³ pýeruçen¡ z DOS z d…vodu kritick‚ chyby zaý¡zen¡         º
   º 03H (3) ³ pýeruçen¡ funkc¡ 31H (pýeruçen¡ a ponech n¡ rezidentn¡m) º
   ÈÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼





ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿEÿHÿ ÿ(ÿ7ÿ8ÿ) - nalezen¡ 1.vyhovuj¡c¡ho soub. (FIND FIRST)

    vstup:    AH = 4EH
              CX = atributy souboru
              DS:DX = ukazatel na specifikaci souboru (ýetØzec ASCIIZ)

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   02H ( 2) - soubor nenalezen
                   03H ( 3) - cesta nenalezena
                   12H (18) - nelze nal‚zt dalç¡ soubory

    Funkce  nalezne  prvn¡  soubor,  kterì vyhovuje specifikaci (udan‚ jako
ýetØzec  ASCIIZ na adrese DS:DX). Specifikace m…§e obsahovat oznaŸen¡ disku
a cestu, jm‚no souboru m…§e obsahovat maskovac¡ znaky (* a ?).

    Funkce  navrac¡  informace  v  43-bajtov‚  oblasti pamØti na adrese DTA
(adresa diskovìch pýenos…). Informace jsou form tovany takto:
ÉÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
º  offset  ³ velikost ³             popis                                º
ÌÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
º 00H ( 0) ³    21    ³ pou§¡v  DOS pro funkci 4FH (nalezen¡ dalç¡ho)    º
º 15H (21) ³     1    ³ atributy nalezen‚ho souboru                      º
º 16H (22) ³     2    ³ Ÿas posledn¡ho z znamu souboru                   º
º 18H (24) ³     2    ³ datum posledn¡ho z znamu souboru                 º
º 1AH (26) ³     4    ³ velikost souboru v bajtech                       º
º 1EH (30) ³    13    ³ jm‚no souboru a rozç¡ýen¡ jm‚na souboru (ASCIIZ) º
ÈÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

    Jm‚no  souboru  a  rozç¡ýen¡  jm‚na  souboru  jsou hl çeny v konvenŸn¡m
tvaru,  s  vymazanìmi  mezerami a s teŸkou mezi jm‚nem souboru a rozç¡ýen¡m
jm‚na souboru. Pokud soubor neobsahuje § dn‚ rozç¡ýen¡ jm‚na souboru, teŸka
je potlaŸena.

Pozn.: Dalç¡  vyhovuj¡c¡  soubor  m…§ete hledat pomoc¡ funkce 4FH (nalezen¡
       dalç¡ho vyhovuj¡c¡ho souboru).

       Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Adresu diskovìch pýenos… (DTA) m…§ete nastavit pomoc¡ funkce 1AH.

       Rozsah  hled n¡  m…§ete ý¡dit zad n¡m bajtu atribut… do registru CX.
       Pokud  je  CX  nastaven  na 00H, hled  funkce pouze norm ln¡ soubory
       (tj.   mohou   m¡t  nastaven  pouze  atribut  "pouze  Ÿten¡"  a/nebo
       "archivn¡").  Pokud  je v CX specifikov na nØjak  kombinace atribut…
       "skrytì   soubor",  "syst‚movì  soubor"  nebo  "adres ý",  budou  se
       vyhled vat   norm ln¡  soubory  a  tak‚  vçechny  soubory  s  tØmito
       atributy.  Pokud  je v CX specifikov n atribut "n vØçt¡ disku", bude
       funkce  hledat  pouze  polo§ku s atributem "n vØçt¡ disku". Atributy
       "pouze Ÿten¡" a "archivn¡" nemaj¡ vliv na hled n¡.

         Struktura bajtu atribut… souboru:
        ÚÄÂÄÂÄÂÄÂÄÂÄÂÄÂÄ¿
        ³7 6 5 4 3 2 1 0³
        ÀÂÁÂÁÂÁÂÁÂÁÂÁÂÁÂÙ bit
         ³ ³ ³ ³ ³ ³ ³ ÀÄ> 0 (  1): pouze Ÿten¡ souboru (Read-only "R/O")
         ³ ³ ³ ³ ³ ³ ÀÄÄÄ> 1 (  2): skrytì soubor (Hidden "HID")
         ³ ³ ³ ³ ³ ÀÄÄÄÄÄ> 2 (  4): syst‚movì soubor (System "SYS")
         ³ ³ ³ ³ ÀÄÄÄÄÄÄÄ> 3 (  8): n vØçt¡ disku (Volume Label "VOL")
         ³ ³ ³ ÀÄÄÄÄÄÄÄÄÄ> 4 ( 16): adres ý (Directory "DIR")
         ³ ³ ÀÄÄÄÄÄÄÄÄÄÄÄ> 5 ( 32): archivn¡ soubor (Archive "ARC")
         ³ ÀÄÄÄÄÄÄÄÄÄÄÄÄÄ> 6 ( 64): rezervov no (mus¡ bìt nastaven na 0)
         ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ> 7 (128): rezervov no (mus¡ bìt nastaven na 0)

            - bli§ç¡ popis atribut… viz "Adres ýov  polo§ka"

       ¬as  posledn¡ho z znamu ud v  Ÿas, kdy byl soubor naposledy vytvoýen
       nebo  aktualizov n.  Hodina,  minuta  a sekunda jsou zaps ny ve dvou
       bajtech takto:

        15  14  13  12  11  10   9   8      7   6   5   4   3   2   1   0
       ÚÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄ¿  ÚÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄ¿
       ³ H ³ H ³ H ³ H ³ H ³ M ³ M ³ M ³  ³ M ³ M ³ M ³ S ³ S ³ S ³ S ³ S ³
       ÀÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÙ  ÀÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÙ
        ³                 ³ ³                        ³ ³                 ³
        ÀÄ hodina (0-23) ÄÙ ÀÄÄÄÄ minuta (0-59) ÄÄÄÄÄÙ ÀÄ sekunda (0-58) Ù
                                                      (£daj se vyn sob¡ 2*)

       Datum  posledn¡ho  z znamu  ud v   den,  kdy  byl  soubor  naposledy
       vytvoýen  nebo  aktualizov n.  Rok, mØs¡c a den jsou zaps ny ve dvou
       bajtech takto:

        15  14  13  12  11  10   9   8      7   6   5   4   3   2   1   0
       ÚÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄ¿  ÚÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄ¿
       ³ R ³ R ³ R ³ R ³ R ³ R ³ R ³ M ³  ³ M ³ M ³ M ³ D ³ D ³ D ³ D ³ D ³
       ÀÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÙ  ÀÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÙ
        ³                         ³ ³                ³ ³                 ³
        ÀÄÄÄ rok (1980 a§ 2099) ÄÄÙ ÀÄ mØs¡c (1-12) ÄÙ ÀÄÄÄ den (1-31) ÄÄÙ
         (k £daji se pýiŸte 1980)




ÿFÿuÿnÿkÿcÿeÿ ÿ4ÿFÿHÿ ÿ(ÿ7ÿ9ÿ) - nalezen¡ dalç¡ho vyhov.souboru (FIND NEXT)

    vstup:    AH = 4FH

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   12H (18) - nejsou § dn‚ dalç¡ vyhovuj¡c¡ soubory

    Funkce  pokraŸuje  v  hled n¡  dalç¡ho  souboru,  kterì se zaŸal hledat
pomoc¡  funkce  4EH  (nalezen¡  prvn¡  vyhovuj¡c¡ho souboru). Informace pro
hled n¡  souboru  se  pýed  z funkce 4EH v 43-bajtov‚ polo§ce na adrese DTA
(adresa diskovìch pýenos…). Informace pro hled n¡ m  tuto strukturu:

ÉÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
º  offset  ³ velikost ³             popis                                º
ÌÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
º 00H ( 0) ³    21    ³ pou§¡v  DOS pro proces nalezen¡ dalç¡ho souboru  º
º 15H (21) ³     1    ³ atributy nalezen‚ho souboru                      º
º 16H (22) ³     2    ³ Ÿas posledn¡ho z znamu souboru                   º
º 18H (24) ³     2    ³ datum posledn¡ho z znamu souboru                 º
º 1AH (26) ³     4    ³ velikost souboru v bajtech                       º
º 1EH (30) ³    13    ³ jm‚no souboru a rozç¡ýen¡ jm‚na souboru (ASCIIZ) º
ÈÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

    Jm‚no  souboru  a  rozç¡ýen¡  jm‚na  souboru  jsou hl çeny v konvenŸn¡m
tvaru,  s  vymazanìmi  mezerami a s teŸkou mezi jm‚nem souboru a rozç¡ýen¡m
jm‚na souboru. Pokud soubor neobsahuje § dn‚ rozç¡ýen¡ jm‚na souboru, teŸka
je potlaŸena.

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Pro  nalezen¡  prvn¡ho vyhovuj¡c¡ho souboru pou§ijte funkci 4EH, kde
       jsou t‚§ podrobnØji pops ny jednotliv‚ polo§ky informaŸn¡ho pole.



ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿ0ÿHÿ ÿ(ÿ8ÿ0ÿ) - rezervov no

ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿ1ÿHÿ ÿ(ÿ8ÿ1ÿ) - rezervov no

ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿ2ÿHÿ ÿ(ÿ8ÿ2ÿ) - rezervov no

ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿ3ÿHÿ ÿ(ÿ8ÿ3ÿ) - rezervov no



ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿ4ÿHÿ ÿ(ÿ8ÿ4ÿ) - poskytnut¡ informace o nastaven¡ VERIFY

    vstup:    AH = 54H

    vìstup:   AL = 00H - pýep¡naŸ VERIFY je vypnut
                   01H - pýep¡naŸ VERIFY je zapnut

    Funkce  54H navrac¡ v registru AL informaci o souŸasn‚m stavu nastaven¡
syst‚mov‚ho  pýep¡naŸe VERIFY. Pý¡zak VERIFY lze nastavit pomoc¡ funkce 2EH
nebo  pomoc¡  povelu  VERIFY  ON  nebo OFF. Pokud je pýep¡naŸ VERIFY zapnut
(ON), prov d¡ se pýi diskovìch operac¡ch ovØýov n¡ zapsanìch dat kontroln¡m
Ÿten¡m (nikoliv vçak porovn n¡m se zapisovanìmi daty).




ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿ5ÿHÿ ÿ(ÿ8ÿ5ÿ) - rezervov no



ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿ6ÿHÿ ÿ(ÿ8ÿ6ÿ) - pýejmenov n¡ souboru

    vstup:    AH = 56H
              DS:DX = ukazatel na ýetØzec ASCIIZ obsahuj¡c¡ p…vodn¡ cestu a
                      jm‚no souboru
              ES:DI = ukazatel  na  ýetØzec ASCIIZ obsahuj¡c¡ novou cestu a
                      jm‚no souboru

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   02H ( 2) - soubor nenalezen
                   03H ( 3) - cesta nenalezena
                   05H ( 5) - po§adavek odm¡tnut
                   11H (17) - nen¡ stejn‚ zaý¡zen¡

    Funkce  pýejmenuje  soubor,  pýem¡st¡ jej do jin‚ho adres ýe na stejn‚m
disku nebo jej pýejmenuje i pýem¡st¡.

   Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va vytv ýen¡ CREATE.

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Pokud  je  v popisu nov‚ho souboru obsa§eno oznaŸen¡ disku, mus¡ bìt
       toto oznaŸen¡ shodn‚ s oznaŸen¡m disku v popisu p…vodn¡ho souboru.

       Jm‚no souboru nem…§e obsahovat maskovac¡ znaky (? a *).




ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿ7ÿHÿ ÿ(ÿ8ÿ7ÿ) - poskytnut¡/nastaven¡ data a Ÿasu souboru

    vstup:    AH = 57H
              AL = 00H - poskytnut¡ data a Ÿasu souboru
                   01H - nastaven¡ data a Ÿasu souboru
              BX = identifik tor souboru
              CX = Ÿas (pouze je-li AL = 01H - nastaven¡)
              DX = datum (pouze je-li AL = 01H - nastaven¡)

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H (1) - neplatn‚ Ÿ¡slo funkce v AL
                   06H (6) - neplatnì identifik tor souboru
              CX = Ÿas (pouze je-li AL = 00H - poskytnut¡)
              DX = datum (pouze je-li AL = 00H - poskytnut¡)

    Funkce  navrac¡  nebo  nastavuje datum a Ÿas posledn¡ho z pisu souboru,
kterì byl otevýen pomoc¡ identifik toru souboru (napý. pomoc¡ funkce 3DH).

    Datum a Ÿas jsou definov ny n sleduj¡c¡m zp…sobem:

               DX (datum) = (rok-1980)*512 + mØs¡c*32 + den

       15  14  13  12  11  10   9   8       7   6   5   4   3   2   1   0
      ÚÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄ¿   ÚÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄ¿
      ³ R ³ R ³ R ³ R ³ R ³ R ³ R ³ M ³   ³ M ³ M ³ M ³ D ³ D ³ D ³ D ³ D ³
      ÀÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÙ   ÀÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÙ
       ³                         ³ ³                 ³ ³                 ³
       ÀÄÄÄ rok (1980 a§ 2099) ÄÄÙ ÀÄÄ mØs¡c (1-12) ÄÙ ÀÄÄÄ den (1-31) ÄÄÙ
      (k £daji se pýiŸte hodnota 1980)


               CX (Ÿas) = hodina*2048 + minuta*32 + sekunda/2

       15  14  13  12  11  10   9   8       7   6   5   4   3   2   1   0
      ÚÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄ¿   ÚÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄÂÄÄÄ¿
      ³ H ³ H ³ H ³ H ³ H ³ M ³ M ³ M ³   ³ M ³ M ³ M ³ S ³ S ³ S ³ S ³ S ³
      ÀÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÙ   ÀÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÁÄÄÄÙ
       ³                 ³ ³                         ³ ³                 ³
       ÀÄ hodina (0-23) ÄÙ ÀÄÄÄÄÄ minuta (0-59) ÄÄÄÄÄÙ ÀÄ sekunda (0-58) Ù
                                                     (£daj je vyn soben 2*)




ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿ9ÿHÿ ÿ(ÿ8ÿ9ÿ) - poskytnut¡ rozç¡ýenìch chybovìch informac¡

    vstup:    AH = 59H
              BX = 0000H pro DOS 3.00 a vyçç¡

    vìstup:   AX = rozçiýuj¡c¡ chybovì k¢d
              BH = tý¡da chyby
              BL = n vrh dalç¡ akce
              CH = um¡stØn¡ chyby (zdroj chyby)

    zniŸen‚ registry: CL, DX, SI, DI, ES a DS

    Funkce  59H navrac¡ detailnØjç¡ diagnostick‚ informace o vznikl‚ chybØ.
Tato  funkce  m…§e  bìt  pou§ita  zevnitý obsluhy kritick‚ chyby (pýeruçen¡
INTú24H),  po  vol n¡  funkce  DOS  kter   hl s¡  chybu nastaven¡m pý¡znaku
pýenosu  CF  nebo  po  operaci  se  souborem  s  pou§it¡m  FCB, kter  hl s¡
n vratovì k¢d FFH. Tato funkce je mo§n  pouze pro DOS 3.00 a vyçç¡.

    Vçechny  funkce  pracuj¡c¡ s FCB (tj. chybov‚ k¢dy navracen‚ v DOS 1.x)
navrac¡  chybovì  k¢d  operace v registru AL - pýi bezchybn‚ funkci navr t¡
k¢d  0,  pýi  chybØ navr t¡ k¢d 0FFH. Ostatn¡ funkce hl s¡ chybu nastaven¡m
pý¡znaku  pýenosu  CF  a  um¡stØn¡m  chybov‚ho  k¢du  do  registru  AX (viz
n sleduj¡c¡  tabulka). DOS 2.x navrac¡ chybov‚ k¢dy 01H - 12H (18). Pod DOS
3.x  je  lepç¡  volat  tuto  funkci 59H, pomoc¡ n¡§ lze obdr§et podrobnØjç¡
informace o chyb ch.

    Chyby  13H  (19)  a§  1FH (31) odpov¡daj¡ chyb m 00H a§ 0CH, kter‚ jsou
pýed v ny  v  registru  DI pýi vyvol n¡ pýeruçen¡ INT 24H (obsluha kritick‚
chyby).

    Hodnoty navr cen‚ v registru AX (rozç¡ýenì chybovì k¢d):
 
ÉÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
º   K¢d    ³                       Vìznam                                 º
ÌÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
º 00H ( 0) ³ § dn  chyba                                                  º
º 01H ( 1) ³ neplatn‚ Ÿ¡slo funkce                                        º
º 02H ( 2) ³ soubor nenalezen                                             º
º 03H ( 3) ³ cesta nenalezena                                             º
º 04H ( 4) ³ otevýeno pý¡liç mnoho soubor… (nen¡ volnì ident.s.)          º
º 05H ( 5) ³ po§adavek odm¡tnut                                           º
º 06H ( 6) ³ neplatnì identifik tor souboru                               º
º 07H ( 7) ³ ý¡d¡c¡ blok pamØti zniŸen                                    º
º 08H ( 8) ³ nepostaŸuj¡c¡ pamØœ                                          º
º 09H ( 9) ³ neplatn  adresa bloku pamØti                                 º
º 0AH (10) ³ neplatn‚ prostýed¡                                           º
º 0BH (11) ³ neplatnì form t                                              º
º 0CH (12) ³ neplatnì pý¡stupovì k¢d                                      º
º 0DH (13) ³ neplatn  data                                                º
º 0EH (14) ³ rezervov no                                                  º
º 0FH (15) ³ neplatn  specifikace disku                                   º
º 10H (16) ³ pokus o zruçen¡ aktivn¡ho adres ýe                           º
º 11H (17) ³ nen¡ stejn‚ zaý¡zen¡                                         º
º 12H (18) ³ nejsou § dn‚ dalç¡ soubory                                   º
ÌÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
º 13H (19) ³ pokus o z pis na disk chr nØnì proti z pisu    INT 24H/00H   º
º 14H (20) ³ nezn m  jednotka                               INT 24H/01H   º
º 15H (21) ³ diskov  mechanika nen¡ pýipravena              INT 24H/02H   º
º 16H (22) ³ nezn mì povel                                  INT 24H/03H   º
º 17H (23) ³ chyba dat disku (kontroln¡ souŸet CRC)         INT 24H/04H   º
º 18H (24) ³ chybn  d‚lka struktury po§adavku               INT 24H/05H   º
º 19H (25) ³ chyba vystaven¡ disku                          INT 24H/06H   º
º 1AH (26) ³ nezn mì typ m‚dia                              INT 24H/07H   º
º 1BH (27) ³ sektor nenalezen                               INT 24H/08H   º
º 1CH (28) ³ v tisk rnØ nen¡ pap¡r                          INT 24H/09H   º
º 1DH (29) ³ operace z pisu byla chybn                      INT 24H/0AH   º
º 1EH (30) ³ operace Ÿten¡ byla chybn                       INT 24H/0BH   º
º 1FH (31) ³ celkov  chyba                                  INT 24H/0CH   º
ÌÄÄÄÄÄÄÄÄÄÄÅÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¹
º 20H (32) ³ poruçen¡ sd¡len¡ soubor…                                     º
º 21H (33) ³ poruçen¡ uzamyk n¡ soubor…                                   º
º 22H (34) ³ neplatn  vìmØna disku                                        º
º 23H (35) ³ ý¡d¡c¡ blok souboru FCB nepý¡stupnì (pý¡liç mnoho FCB)       º
º 24H (36) ³ pýeteŸen¡ vyrovn vac¡ pamØti pro sd¡len¡                     º
º 25H - 31H³ rezervov no                                                  º
º 32H (50) ³ po§adavek pro pr ci v s¡ti nen¡ podporov n                   º
º 33H (51) ³ vzd lenì poŸ¡taŸ nepýij¡m                                    º
º 34H (52) ³ zdvojen‚ s¡œov‚ jm‚no                                        º
º 35H (53) ³ s¡œov‚ jm‚no nenalezeno                                      º
º 36H (54) ³ s¡œ zanepr zdnØna                                            º
º 37H (55) ³ s¡œov‚ zaý¡zen¡ ji§ nad le neexistuje                        º
º 38H (56) ³ omezen¡ povelu s¡œov‚ho BIOSu pýekroŸeno                     º
º 39H (57) ³ chyba hardware adapt‚ru pro pr ci v s¡ti                     º
º 3AH (58) ³ nespr vn  odpovØÔ ze s¡tØ                                    º
º 3BH (59) ³ neoŸek van  chyba s¡œØ                                       º
º 3CH (60) ³ nekompatibiln¡ adapt‚r pro d lkov‚ pýenosy                   º
º 3DH (61) ³ tiskov  fronta pln                                           º
º 3EH (62) ³ nen¡ dostatek voln‚ho m¡sta pro tiçtØnì soubor               º
º 3FH (63) ³ tiçtØnì soubor byl zruçen                                    º
º 40H (64) ³ s¡œov‚ jm‚no bylo zruçeno                                    º
º 41H (65) ³ po§adavek odm¡tnut                                           º
º 42H (66) ³ typ s¡œov‚ho zaý¡zen¡ nespr vnì                              º
º 43H (67) ³ s¡œov‚ jm‚no nenalezeno                                      º
º 44H (68) ³ pýekroŸeno omezen¡ s¡œov‚ho jm‚na                            º
º 45H (69) ³ pýekroŸeno omezen¡ citlivosti s¡œov‚ho BIOSu                 º
º 46H (70) ³ doŸasn  pauza                                                º
º 47H (71) ³ po§adavek pro pr ci v s¡ti nepýijat                          º
º 48H (72) ³ pauza tiskov‚ho nebo diskov‚ho pýesmØrov n¡                  º
º 49H - 4FH³ rezervov no                                                  º
º 50H (80) ³ soubor ji§ existuje                                          º
º 51H (81) ³ rezervov no                                                  º
º 52H (82) ³ nelze vytvoýit polo§ku adres ýe                              º
º 53H (83) ³ chyba - pýeruçen¡ pro obsluhu kritick‚ chyby INT 24H         º
º 54H (84) ³ pý¡liç mnoho pýesmØrov n¡                                    º
º 55H (85) ³ zdvojen‚ pýesmØrov n¡                                        º
º 56H (86) ³ neplatn‚ heslo                                               º
º 57H (87) ³ neplatnì parametr                                            º
º 58H (88) ³ chyba zaý¡zen¡ pro pr ci v s¡ti                              º
ÈÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

    Hodnoty navr cen‚ v registru BH (tý¡da chyby):
 
ÉÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
º   K¢d    ³                       Vìznam                                 º
ÌÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
º 01H ( 1) ³ pýekroŸeno pýesmØrov n¡ (nejsou FCB, pamØœ, kan ly, ident.)  º
º 02H ( 2) ³ doŸasn  situace; zkuste opØt pozdØji (napý. uzamŸenì soubor) º
º 03H ( 3) ³ probl‚my opr vnØn¡ (mus¡te m¡t vyçç¡ pý¡stupov  pr va)       º
º 04H ( 4) ³ vnitýn¡ chyba v syst‚mov‚m software (chyba v DOS)            º
º 05H ( 5) ³ chyba hardware                                               º
º 06H ( 6) ³ chyba syst‚mu; tj. çpatnì nebo chyb¡ CONFIG.SYS              º
º 07H ( 7) ³ chyba aplikaŸn¡ho programu (chybn  informace do DOS atd.)    º
º 08H ( 8) ³ po§adovanì prvek nenalezen                                   º
º 09H ( 9) ³ chybnì form t (tj. nerozpoznatelnì disk nebo soubor)         º
º 0AH (10) ³ prvek vnitýnØ uzamŸen                                        º
º 0BH (11) ³ chyba m‚dia (tj. chyba CRC, çpatnì disk)                     º
º 0CH (12) ³ prvek ji§ existuje                                           º
º 0DH (13) ³ jin‚ chyby (neklasifikovan‚)                                 º
ÈÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

    Hondoty navr cen‚ v registru BL (n vrh dalç¡ akce):
 
ÉÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
º   K¢d    ³                       Vìznam                                 º
ÌÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
º 01H ( 1) ³ zkuste nØkolikr t (a pak se zeptejte u§ivatele, co d l)      º
º 02H ( 2) ³ zkuste   opØt  (nØkolikr t)  po  pýest vce,  potom  zobrazte º
º          ³ u§ivateli nab¡dku k pokraŸov n¡ nebo k abortov n¡ procesu    º
º 03H ( 3) ³ po§ dejte u§ivatele o opraven¡ vstupu, potom opakujte        º
º 04H ( 4) ³ ý dnØ pýeruçte; uzavýete soubory a potom ukonŸete aplikaci   º
º 05H ( 5) ³ pý¡mo pýeruçte; nepokouçejte se ji§ uzavý¡t soubory          º
º 06H ( 6) ³ ignorujte                                                    º
º 07H ( 7) ³ po§ dejte  u§ivatele,  aby  nØco udØlal (jako vlo§it spr vnì º
º          ³ disk) a potom operaci opakujte                               º
ÈÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼

    Hodnoty navr cen‚ v registru CH (um¡stØn¡ chyby, zdroj chyby):
 
ÉÍÍÍÍÍÍÍÍÍÍÂÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
º   K¢d    ³                       Vìznam                                 º
ÌÍÍÍÍÍÍÍÍÍÍÅÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¹
º 01H ( 1) ³ nezn mì zdroj chyby                                          º
º 02H ( 2) ³ blokov‚ zaý¡zen¡ (tj. disk)                                  º
º 03H ( 3) ³ komunikaŸn¡ s¡œ                                              º
º 04H ( 4) ³ znakov‚ zaý¡zen¡, s‚riov‚ zaý¡zen¡                           º
º 05H ( 5) ³ pamØœ                                                        º
ÈÍÍÍÍÍÍÍÍÍÍÁÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼




ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿAÿHÿ ÿ(ÿ9ÿ0ÿ) - vytvoýen¡ jedineŸn‚ho souboru

    vstup:    AH = 5AH
              CX = atributy souboru
              DS:DX = ukazatel na cestu konŸ¡c¡ znakem \ (ýetØzec ASCIIZ)

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   03H (3) - cesta nenalezena
                   05H (5) - po§adavek odm¡tnut
              DS:DX = ukazatel na jm‚no souboru (ýetØzec ASCIIZ)

    Funkce 5AH vytvoý¡ ve specifikovan‚m adres ýi jedineŸnì soubor a otevýe
jej  v  kompatibiln¡m  m¢du s pý¡stupem "Ÿten¡/z pis". Tato funkce se Ÿasto
pou§¡v  k vytvoýen¡ doŸasnìch soubor…, avçak DOS pýi ukonŸen¡ programu tyto
soubory automaticky neruç¡. Tato slu§ba je mo§n  pouze v DOS 3.0 a vyçç¡m.

   Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va vytv ýen¡ CREATE.

Pozn.: Jm‚no cesty k adres ýi mus¡ konŸit znakem obr cen‚ho lom¡tka "\".

       Rezervujte  za  ýetØzcem oznaŸen¡ cesty 13 bajt… tak, aby DOS mohl k
       cestØ pýipojit jm‚no novØ vytvoýen‚ho souboru.



ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿBÿHÿ ÿ(ÿ9ÿ1ÿ) - vytvoýen¡ nov‚ho souboru

    vstup:    AH = 5BH
              CX = atributy souboru
              DS:DX = ukazatel na oznaŸen¡ souboru (ýetØzec ASCIIZ)

    vìstup:   AX = identifik tor souboru
                 = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   03H (3) - cesta nenalezena
                   04H (4) - nen¡ volnì § dnì identifik tor souboru
                   05H (5) - po§adavek odm¡tnut
                   80H (128) - soubor ji§ existuje

    Tato  funkce  vytvoý¡  soubor podle specifikovan‚ho oznaŸen¡ souboru za
podm¡nky,  §e  tento  soubor dosud neexistuje. Tato funkce je mo§n  pouze v
DOS 3.0 a vyçç¡m.

   Pýi pr ci v s¡ti vy§aduje tato funkce pý¡stupov  pr va vytv ýen¡ CREATE.

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Tato  funkce  je identick  funkci 3CH (vytvoýen¡ souboru) v pý¡padØ,
       §e  vytv ýenì  soubor  dosud  jeçtØ  neexistuje.  Pokud  soubor  ji§
       existuje,  ohl s¡  tato  funkce  chybu,  zat¡mco  funkce 3CH v tomto
       pý¡padØ  zkr t¡  existuj¡c¡  soubor  na  nulovou  d‚lku  a potom jej
       otevýe.




ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿCÿHÿ ÿ(ÿ9ÿ2ÿ) - zamknut¡/odemknut¡ pý¡stupu k souboru

    vstup:    AH = 5CH
              AL = 00H - uzamŸen¡ souboru
                   01H - odemknut¡ souboru
              BX = identifik tor souboru
              CX = relativn¡ adresa zaŸ tku oblasti (vyçç¡ slovo)
              DX = relativn¡ adresa zaŸ tku oblasti (ni§ç¡ slovo)
              SI = d‚lka oblasti (vyçç¡ slovo)
              DI = d‚lka oblasti (ni§ç¡ slovo)

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H ( 1) - neplatnì k¢d funkce
                   06H ( 6) - neplatnì identifik tor souboru
                   21H (33) - poruçen¡   uzamŸen¡   souboru  (specifikovan 
                              oblast je ji§ uzamŸena nebo je ji§ odemŸena)

    Tato  funkce  se  pou§¡v  k uzamŸen¡ nebo odemŸen¡ vybran‚ Ÿ sti disku,
Ÿ¡m§  zabraåuje  nebo  umo§åuje  pý¡stup  k  t‚to oblasti jinìm proces…m ve
v¡ce£lohov‚m  re§imu  nebo v prostýed¡ s¡tØ. Tato funkce je mo§n  pouze pro
DOS 3.00 a vyçç¡.

Pozn.: Registry  CX  a DX spoleŸnØ (jako 4-bajtov‚ cel‚ Ÿ¡slo bez znam‚nka)
       urŸuj¡  relativn¡  adresu  (offset;  v  bajtech)  od zaŸ tku souboru
       oblasti  uvnitý  souboru,  kter   m   bìt  uzamŸena  nebo odemknuta;
       registry  SI  a DI spoleŸnØ (jako 4-bajtov‚ cel‚ Ÿ¡slo bez znam‚nka)
       specifikuj¡ d‚lku t‚to chr nØn‚ oblasti.

       Pýeruçen¡  procesu,  kterì m  otevýen‚ soubory s uzamŸenìmi oblastmi
       nebo  uzavýen¡  souboru s uzavýenou oblast¡ bude m¡t nedefinovateln‚
       n sledky.  Pokud  v ç  program  m…§e  bìt  pýeruçen pomoc¡ pýeruçen¡
       INTú23H  nebo INTú24H, mus¡te pýed pýeruçen¡m programu zajistit, aby
       vçechny z mky byly odemŸeny.

       Operace  odemknut¡  mus¡  specifikovat pýesnØ stejnou oblast souboru
       jako uzamykac¡ operace.

       Podý¡zen‚ procesy (tj. proces vytvoýenì vol n¡m funkce EXEC) nesd¡l¡
       pý¡stup  k  oblastem  souboru,  kter‚  byly  uzamŸeny jeho otcovskìm
       procesem.

       Pou§ijte tuto funkci v n sleduj¡c¡ch m¢dech souboru:
        m¢d sd¡len¡ se zam¡tnut¡m Ÿten¡
        m¢d sd¡len¡ bez § dn‚ho zam¡tnut¡
        m¢d sd¡len¡ se zam¡tnut¡m z pisu, soubor je otevýen pro Ÿten¡/z pis
        m¢d sd¡len¡ se zam¡tnut¡m z pisu, soubor je otevýen pouze pro z pis




ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿDÿHÿ ÿ(ÿ9ÿ3ÿ) - rezervov no



ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿEÿ0ÿ0ÿHÿ ÿ(ÿ9ÿ4ÿ-ÿ0ÿ) - poskytnut¡ jm‚na zaý¡zen¡

    vstup:    AH = 5EH
              AL = 00H (Ÿ¡slo podfunkce)
              DS:DX = ukazatel  na  vyrovn vac¡  pamØœ (16 bajt…), kde bude
                      navr ceno jm‚no poŸ¡taŸe
    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H (1) - program obsluhy pro pr ci v s¡ti nen¡ naŸten
              CH = 00H (0) - jm‚no nen¡ definov no
                   nen¡ 00H (0) - jm‚no je definov no
              CL = Ÿ¡slo jm‚na NETBIOS (doplnØk BIOS pro pr ci v s¡ti)
                   (pokud nen¡ CH = 0)
              DS:DX = ukazatel na jm‚no poŸ¡taŸe (ýetØzec ASCIIZ)

    V  syst‚mech vybavenìch prostýedky pro pr ci v s¡ti IBM PC Network nebo
Microsoft Networks navrac¡ tato funkce jm‚no lok ln¡ho poŸ¡taŸe. Toto jm‚no
navrac¡  jako  ýetØzec ASCIIZ, kterì je doplnØn mezerami na d‚lku 15 znak….
Tato  funkce  je  mo§n   pouze  pro DOS 3.10 a vyçç¡ a vy§aduje, aby bØ§ely
programy IBM PC Network nebo Microsoft Networks.

Pozn.: Pokud  nebylo  jm‚no  nikdy definov no, CH navrac¡ 00H a obsah CL je
       nedefinovanì.  V opaŸn‚m pý¡padØ navrac¡ CL Ÿ¡slo jm‚na NETBIOS (tj.
       doplåuj¡c¡ Ÿ st k BIOS poŸ¡taŸe, kter  umo§åuje pr ci v s¡ti).




ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿEÿ0ÿ2ÿHÿ ÿ(ÿ9ÿ4ÿ-ÿ2ÿ) - nastaven¡ inicial.ýetØzce tisk rny

    vstup:    AH = 5EH
              AL = 02H (podfunkce)
              BX = index vìpisu pýesmØrov n¡
              CX = d‚lka ýetØzce pro nastaven¡ (maxim lnØ 64 bajt…)
              DS:SI = ukazatel  na vyrovn vac¡ pamØœ obsahuj¡c¡ ýetØzec pro
                      nastaven¡ tisk rny

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H (1) - program obsluhy pro pr ci v s¡ti nen¡ naŸten

    Tato  podfunkce  funkce  5EH  umo§åuje  jednotlivìm  u§ivatel…m  v s¡ti
specifikovat  jejich  vlastn¡  ýetØzec  pro  nastaven¡ tisk rny pýi sd¡len¡
tisk rny.  Tento  ýetØzec  nastaven¡  tisk rny bude vysl n na tisk rnu v§dy
pýed  tiskem jednotlivìch soubor… u§ivatele. Tato funkce je mo§n  pouze pro
DOS  3.10  a  vyçç¡  a  vy§aduje,  aby  bØ§ely programy IBM PC Network nebo
Microsoft Networks.

D…le§it‚: Vzhledem  k  tomu,  §e  hodnota  indexu pýesmØrov n¡ se m…§e mezi
          dobou prohl¡§en¡ vìpisu pýesmØrov n¡ a dobou ukonŸen¡ t‚to funkce
          mØnit,  je  vhodn‚  volat  tuto  funkci  bezprostýednØ za vol n¡m
          funkce  5F02H  (poskytnut¡  polo§ky  vìpisu pýesmØrov n¡). (zmØnu
          polo§ky  vìpisu  pýesmØrov n¡  m…§e  zp…sobit vol n¡ funkce 5F03H
          (pýesmØrov n¡    zaý¡zen¡)    nebo    funkce    5F04H    (zruçen¡
          pýesmØrov n¡).)

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Tato  funkce  je  vol na  s  indexem  vìpisu pýesmØrov n¡ v BX; tato
       hodnota  indexu  m…§e  bìt  urŸena  vol n¡m funkce 5F02H (poskytnut¡
       polo§ky vìpisu pýesmØrov n¡).

       Nastavovac¡ ýetØzec nesm¡ bìt delç¡ ne§ 64 bajt….




ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿEÿ0ÿ3ÿHÿ ÿ(ÿ9ÿ4ÿ-ÿ3ÿ) - poskytnut¡ inic. ýetØzce tisk rny

    vstup:    AH = 5EH
              AL = 03H (podfunkce)
              BX = index vìpisu pýesmØrov n¡
              ES:DI = ukazatel na 64-bajtovou vyrovn vac¡ pamØœ

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H (1) - program obsluhy pro pr ci v s¡ti nen¡ naŸten

    Tato   funkce  navrac¡  inicializaŸn¡  ýetØzec  pro  nastaven¡  sd¡len‚
tisk rny  lok ln¡ho u§ivatele. Funkce je mo§n  pouze pro DOS 3.10 a vyçç¡ a
vy§aduje, aby bØ§ely programy IBM PC Network nebo Microsoft Networks.

D…le§it‚: Vzhledem  k  tomu,  §e  hodnota  indexu pýesmØrov n¡ se m…§e mezi
          dobou prohl¡§en¡ vìpisu pýesmØrov n¡ a dobou ukonŸen¡ t‚to funkce
          mØnit,  je  vhodn‚  volat  tuto  funkci  bezprostýednØ za vol n¡m
          funkce  5F02H  (poskytnut¡  polo§ky  vìpisu pýesmØrov n¡). (zmØnu
          polo§ky  vìpisu  pýesmØrov n¡  m…§e  zp…sobit vol n¡ funkce 5F03H
          (pýesmØrov n¡    zaý¡zen¡)    nebo    funkce    5F04H    (zruçen¡
          pýesmØrov n¡).)

Pozn.: Pou§ijte  funkci 59H k z¡sk n¡ rozç¡ýen‚ho chybov‚ho k¢du (DOS 3.0 a
       vyçç¡).

       Tato  funkce  je  vol na  s  indexem  vìpisu pýesmØrov n¡ v BX; tato
       hodnota  indexu  m…§e  bìt  urŸena  vol n¡m funkce 5F02H (poskytnut¡
       polo§ky vìpisu pýesmØrov n¡).

       Nastavovac¡ ýetØzec nesm¡ bìt delç¡ ne§ 64 bajt….





ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿFÿ0ÿ2ÿHÿ ÿ(ÿ9ÿ5ÿ-ÿ2ÿ) - poskytnut¡ polo§ky vìpisu pýesmØr.

    vstup:    AH = 5FH
              AL = 02H
              BX = index pro vìpis pýesmØrov n¡
              DS:SI = ukazatel na 128-bajtovou vyrovn vac¡ pamØœ obsahuj¡c¡
                      jm‚no lok ln¡ho zaý¡zen¡
              ES:DI = ukazatel na 128-bajtovou vyrovn vac¡ pamØœ obsahuj¡c¡
                      jm‚no pro pr ci v s¡ti

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H ( 1) - program pro obsluhu pr ce v s¡ti nen¡ naŸten
                   12H (18) - nen¡ v¡ce soubor…
              BH = pý¡znak stavu zaý¡zen¡
                   bit 0 = 0 - zaý¡zen¡ plat¡
                           1 - zaý¡zen¡ neplat¡
              BL = typ zaý¡zen¡ (3=tisk rna; 4=mechanika disku)
              CX = parametr ulo§enì funkc¡ 5F03H

    zniŸen‚ registry: DX a BP

    Tato  funkce  navrac¡ polo§ku vìpisu pýesmØrov n¡ v s¡ti. Vìpis samotnì
se  vytv ý¡  pomoc¡  podfunkce  5F03H. Funkce je mo§n  pouze pro DOS 3.10 a
vyçç¡  a  vy§aduje,  aby  bØ§ely  programy  IBM  PC  Network nebo Microsoft
Networks.

    Pýi  vol n¡  podfunkce  5F02H  um¡stØte  do registru BX hodnotu indexu,
kterou  si pýejete ovØýit. V 16-bajtov‚ oblasti na kterou ukazuje p r DS:SI
bude  navr ceno  jm‚no lok ln¡ho zaý¡zen¡, jeho jm‚no pro pr ci v s¡ti bude
navr ceno v p ru ES:DI. BL navr t¡ k¢d tyou zaý¡zen¡ (3 pro tisk rnu, 4 pro
mechaniku  disku)  a  CX  navr t¡  parametr (specifikovanì pomoc¡ podfunkce
5F03H).

    Pokud  chcete  z¡skat vìpis vçech zaý¡zen¡ pro pr ci v s¡ti, prov dØjte
tuto  funkci  opakovanØ,  poŸ¡naje  indexem (BX) nastavenìm na 00H, hodnotu
indexu  v  BX  postupnØ zvØtçujte o 1 a§ bude registr AX hl sit chybovì k¢d
12H (18).



ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿFÿ0ÿ3ÿHÿ ÿ(ÿ9ÿ5ÿ-ÿ3ÿ) - pýesmØrov n¡ zaý¡zen¡

    vstup:    AH = 5FH
              AL = 03H
              BL = typ zaý¡zen¡ (3=tisk rna, 4=diskov  mechanika)
              CX = ulo§enì parametr (vçechny hodnoty kromØ 0 jsou rezerv.)
              DS:SI = ukazatel na ýetØzec ASCIIZ obsahuj¡c¡ jm‚no lok ln¡ho
                      zaý¡zen¡
              ES:DI = ukazatel na ýetØzec ASCIIZ obsahuj¡c¡ cestu pro pr ci
                      v s¡ti n sledovanou ýetØzcem ASCIIZ obsahuj¡c¡m heslo

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H
                   01H (1) - program pro obsluhu pr ce v s¡ti nen¡ naŸten
                   03H (3) - cesta nenalezena
                   05H (5) - po§adavek odm¡tnut
                   08H (8) - nepostaŸuj¡c¡ pamØœ

    Funkce  5F03H umo§åuje pýesmØrovat vstup/vìstup z lok ln¡ tisk rny nebo
diskov‚  mechaniky  na  s¡œov‚  zaý¡zen¡.  M…§ete  tak‚  ovl dat  pý¡stup k
s¡œov‚mu  zaý¡zen¡  pou§it¡m  hesla.  Funkce  je mo§n  pouze pro DOS 3.10 a
vyçç¡  a  vy§aduje,  aby  bØ§ely  programy  IBM  PC  Network nebo Microsoft
Networks.

Pozn.: Volejte   tuto   funkci  s  nastavenìm  k¢dem  typu  zaý¡zen¡  v  BL
       (3=tisk rna,  4=diskov   mechanika)  a  s  0  v CX. P r DS:SI by mØl
       ukazovat na jm‚no zaý¡zen¡, kter‚ si pýejete pýesmØrovat a p r ES:DI
       by  mØl  ukazovat  na  ýetØzec  ASCIIZ  ud vaj¡c¡  jm‚no  pý¡jmov‚ho
       s¡œov‚ho  zaý¡zen¡.  Jm‚no  s¡œov‚ho  zaý¡zen¡  mus¡ bìt n sledov no
       druhìm ýetØzcem ASCIIZ specifikuj¡c¡m heslo. Heslo m…§e bìt dlouh‚ 0
       a§  8  znak…; nechcete-li specifikovat § dn‚ heslo, pou§ijte ýetØzec
       ASCIIZ s nulovou d‚lkou (prvn¡m bajtem je bajt 0).

       Pokud  je  pýesmØrov vanìm zaý¡zen¡m tisk rna, jsou pýijateln  jm‚na
       PRN, LPT1, LPT2 a LPT3. Pokud je pýesmØrov vanìm zaý¡zen¡m mechanika
       disku,  mØl byt zdrojovì ýetØzec ASCIIZ obsahovat p¡smeno oznaŸuj¡c¡
       disk n sledovan‚ dvojteŸkou.

       Zdrojovì  ýetØzec  m…§e bìt i nulovì; v tomto pý¡padØ se DOS pokouç¡
       prov‚st pý¡stup na jm‚no s¡œov‚ho zaý¡zen¡ se specifikovanìm heslem.




ÿFÿuÿnÿkÿcÿeÿ ÿ5ÿFÿ0ÿ4ÿHÿ ÿ(ÿ9ÿ5ÿ-ÿ4ÿ) - zruçen¡ pýesmØrov n¡

    vstup:    AH = 5FH
              AL = 04H
              DS:SI = ukazatel  na ýetØzec ASCIIZ specifikuj¡c¡ buÔ lok ln¡
                      zaý¡zen¡,  jeho§  pýesmØrov n¡  m   bìt zruçeno, nebo
                      jemu pýiýazen‚ jm‚no s¡œov‚ho zaý¡zen¢.

    vìstup:   AX = chybovì k¢d (pokud je CF = 1) - viz funkce DOS 59H

    Tato funkce ruç¡ dý¡ve nastaven  pýesmØrov n¡ na s¡œov  zaý¡zen¡. DS:SI
ukazuje  na  jm‚no zaý¡zen¡, jeho§ pýesmØrov n¡ m  bìt zruçeno, to m…§e bìt
buÔ  jm‚no  tisk rny (PRN, LPT1, LPT2 nebo LPT3), oznaŸen¡ disku nebo jm‚no
s¡œov‚ho zaý¡zen¡ (v posledn¡m pý¡padØ by mØl bìt ýetØzec ASCIIZ oznaŸuj¡c¡
jm‚no  s¡œov‚ho  zaý¡zen¡  n sledov n druhìm ýetØzcem, kterì obsahuje heslo
spojen‚  s ruçen¡m). Funkce je mo§n  pouze pro DOS 3.10 a vyçç¡ a vy§aduje,
aby bØ§ely programy IBM PC Network nebo Microsoft Networks.





ÿFÿuÿnÿkÿcÿeÿ ÿ6ÿ0ÿHÿ ÿ(ÿ9ÿ6ÿ) - rezervov no



ÿFÿuÿnÿkÿcÿeÿ ÿ6ÿ1ÿHÿ ÿ(ÿ9ÿ7ÿ) - rezervov no




ÿFÿuÿnÿkÿcÿeÿ ÿ6ÿ2ÿHÿ ÿ(ÿ9ÿ8ÿ) - poskytnut¡ adresy prefixu program.segmentu

    vstup:    AH = 62H

    vìstup:   BX = segment prefixu programov‚ho segmentu PSP

    Funkce  navrac¡  v BX adresu segmentu prefixu programov‚ho segmentu PSP
souŸasn‚ho procesu (tj. program, kterì pr vØ prob¡h ). Tato funkce je mo§n 
pouze pro DOS 3.00 a vyçç¡.
