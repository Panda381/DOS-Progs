

                              R O M   B I O S
                           (c) Miroslav Nìmeèek


Základní rozdìlení vektorù pøerušení:

INT 00H a INT 0FH - hardwarová pøerušení
INT 10H a INT 1FH - pouívá modul BIOS
INT 20H a INT 3FH - pouívá modul DOS
INT 40H a INT 5FH - doplòující sluby modulu BIOS
INT 60H a INT 7FH - uivatelská a zvláštní pøerušení
INT 80H a INT FFH - BASIC, doplòující pøerušení



Pøidìlení vektorù pøerušení:

INT 00H (INT  0; 0:0000H) - dìlení nulou
INT 01H (INT  1; 0:0004H) - krok programu
INT 02H (INT  2; 0:0008H) - nemaskovatelné pøerušení (NMI)
INT 03H (INT  3; 0:000CH) - bod pøerušení ladìného programu
INT 04H (INT  4; 0:0010H) - pøeteèení
INT 05H (INT  5; 0:0014H) - tisk obrazovky
INT 06H (INT  6; 0:0018H) - (rezervováno)
INT 07H (INT  7; 0:001CH) - (rezervováno)
INT 08H (INT  8; 0:0020H) - systémové hodiny
INT 09H (INT  9; 0:0024H) - pøerušení od klávesnice
INT 0AH (INT 10; 0:0028H) - pøerušení pøi vertikálním zpìtném bìhu EGA
INT 0BH (INT 11; 0:002CH) - sériovı port UART 1
INT 0CH (INT 12; 0:0030H) - sériovı port UART 2
INT 0DH (INT 13; 0:0034H) - pøerušení od øadièe pevného disku XT/LPT2
INT 0EH (INT 14; 0:0038H) - pøerušení od øadièe prunıch diskù
INT 0FH (INT 15; 0:003CH) - pøerušení od tiskárny LPT1

BIOS:
INT 10H (INT 16; 0:0040H) - obsluha displeje
INT 11H (INT 17; 0:0044H) - ètení tabulky vybavení
INT 12H (INT 18; 0:0048H) - hlášení o velikosti pamìti
INT 13H (INT 19; 0:004CH) - diskové vstupnì/vıstupní operace
INT 14H (INT 20; 0:0050H) - sluby sériovıch (komunikaèních) I/O portù
INT 15H (INT 21; 0:0054H) - rozšiøující a kazetové sluby
INT 16H (INT 22; 0:0058H) - sluby pro vstup z klávesnice
INT 17H (INT 23; 0:005CH) - sluby pro vıstup na tiskárnu
INT 18H (INT 24; 0:0060H) - sluba zavadìèe BASIC
INT 19H (INT 25; 0:0064H) - sluba zavadìèe operaèního systému
INT 1AH (INT 26; 0:0068H) - systémovı èasovaè a sluby hodin
INT 1BH (INT 27; 0:006CH) - pøerušení klávesnicí
INT 1CH (INT 28; 0:0070H) - uivatelskı èasovaè
INT 1DH (INT 29; 0:0074H) - ukazatel videoparametrù
INT 1EH (INT 30; 0:0078H) - ukazatel disketovıch parametrù
INT 1FH (INT 31; 0:007CH) - ukazatel tabulky graf. znakù (INT 10H/sl.12H)

DOS:
INT 20H (INT 32; 0:0080H) - pøerušení programu (DOS)
INT 21H (INT 33; 0:0084H) - volání slueb DOS (DOS)
INT 22H (INT 34; 0:0088H) - adresa ukonèení programu (DOS)
INT 23H (INT 35; 0:008CH) - adresa obsluhy klávesy <Break> (DOS)
INT 24H (INT 36; 0:0090H) - adresa obsluhy kritickıch chyb (DOS)
INT 25H (INT 37; 0:0094H) - absolutní ètení z disku (DOS)
INT 26H (INT 38; 0:0098H) - absolutní zápis na disk (DOS)
INT 27H (INT 39; 0:009CH) - pøerušení a ponechání rezidentním (DOS)
INT 28H (INT 40; 0:00A0H) - seznam (DOS)
INT 29H (INT 41; 0:00A4H) - uloení obrazovky (DOS)
INT 2AH (INT 42; 0:00A8H) - síové zaøízení (DOS)
INT 2BH (INT 43; 0:00ACH) - rezervováno (DOS)
INT 2CH (INT 44; 0:00B0H) - rezervováno (DOS)
INT 2DH (INT 45; 0:00B4H) - rezervováno (DOS)
INT 2EH (INT 46; 0:00B8H) - rezervováno (DOS)
INT 2FH (INT 47; 0:00BCH) - multiplexované pøerušení (DOS)
INT 30H (INT 48; 0:00C0H) - rezervováno - skok (DOS)
INT 31H (INT 49; 0:00C4H) - rezervováno - skok (DOS)
INT 32H (INT 50; 0:00C8H) - rezervováno (DOS)
INT 33H (INT 51; 0:00CCH) - rezervováno (DOS)
INT 34H (INT 52; 0:00D0H) - rezervováno (DOS)
INT 35H (INT 53; 0:00D4H) - rezervováno (DOS)
INT 36H (INT 54; 0:00D8H) - rezervováno (DOS)
INT 37H (INT 55; 0:00DCH) - rezervováno (DOS)
INT 38H (INT 56; 0:00E0H) - rezervováno (DOS)
INT 39H (INT 57; 0:00E4H) - rezervováno (DOS)
INT 3AH (INT 58; 0:00E8H) - rezervováno (DOS)
INT 3BH (INT 59; 0:00ECH) - rezervováno (DOS)
INT 3CH (INT 60; 0:00F0H) - rezervováno (DOS)
INT 3DH (INT 61; 0:00F4H) - rezervováno (DOS)
INT 3EH (INT 62; 0:00F8H) - rezervováno (DOS)
INT 3FH (INT 63; 0:00FCH) - rezervováno (DOS)

INT 40H (INT 64; 0:0100H) - pøerušení od øadièe floppy diskù
INT 41H (INT 65; 0:0104H) - ukazatel na parametry pevného disku 0
INT 42H (INT 66; 0:0108H) - vstupní bod EGA
INT 43H (INT 67; 0:010CH) - ukazatel na inicializaci EGA
INT 44H (INT 68; 0:0110H) - ukazatel na grafické znaky EGA
INT 45H (INT 69; 0:0114H) - rezervováno (BIOS)
INT 46H (INT 70; 0:0118H) - ukazatel na parametry pevného disku 1
INT 47H (INT 71; 0:011CH) - rezervováno (BIOS)
INT 48H (INT 72; 0:0120H) - klávesnice PC Jr
INT 49H (INT 73; 0:0124H) - orientaèní kód klávesy PC Jr
INT 4AH (INT 74; 0:0128H) - uivatelskı èasovı alarm
INT 4BH (INT 75; 0:012CH) - rezervováno (BIOS)
INT 4CH (INT 76; 0:0130H) - rezervováno (BIOS)
INT 4DH (INT 77; 0:0134H) - rezervováno (BIOS)
INT 4EH (INT 78; 0:0138H) - rezervováno (BIOS)
INT 4FH (INT 79; 0:013CH) - rezervováno (BIOS)
INT 50H (INT 80; 0:0140H) - pøerušení èasovaèem CMOS
INT 51H (INT 81; 0:0144H) - rezervováno (BIOS)
INT 52H (INT 82; 0:0148H) - rezervováno (BIOS)
INT 53H (INT 83; 0:014CH) - rezervováno (BIOS)
INT 54H (INT 84; 0:0150H) - rezervováno (BIOS)
INT 55H (INT 85; 0:0154H) - rezervováno (BIOS)
INT 56H (INT 86; 0:0158H) - rezervováno (BIOS)
INT 57H (INT 87; 0:015CH) - rezervováno (BIOS)
INT 58H (INT 88; 0:0160H) - rezervováno (BIOS)
INT 59H (INT 89; 0:0164H) - rezervováno (BIOS)
INT 5AH (INT 90; 0:0168H) - adaptér blokù (cluster) BIOS
INT 5BH (INT 91; 0:016CH) - rezervováno (BIOS)
INT 5CH (INT 92; 0:0170H) - síovı adapter - BIOS
INT 5DH (INT 93; 0:0174H) - rezervováno (BIOS)
INT 5EH (INT 94; 0:0178H) - rezervováno (BIOS)
INT 5FH (INT 95; 0:017CH) - rezervováno (BIOS)
INT 60H (INT 96; 0:0180H) - uivatelské pøerušení
INT 61H (INT 97; 0:0184H) - uivatelské pøerušení
INT 62H (INT 98; 0:0188H) - uivatelské pøerušení
INT 63H (INT 99; 0:018CH) - uivatelské pøerušení
INT 64H (INT 100; 0:0190H) - uivatelské pøerušení
INT 65H (INT 101; 0:0194H) - uivatelské pøerušení
INT 66H (INT 102; 0:0198H) - uivatelské pøerušení
INT 67H (INT 103; 0:019CH) - driver rozšíøené pamìti EMM
INT 68H (INT 104; 0:01A0H) - nepouito
INT 69H (INT 105; 0:01A4H) - nepouito
INT 6AH (INT 106; 0:01A8H) - nepouito
INT 6BH (INT 107; 0:01ACH) - nepouito
INT 6CH (INT 108; 0:01B0H) - pokraèování systému
INT 6DH (INT 109; 0:01B4H) - nepouito
INT 6EH (INT 110; 0:01B8H) - nepouito
INT 6FH (INT 111; 0:01BCH) - nepouito
INT 70H (INT 112; 0:01C0H) - hodiny reálného èasu
INT 71H (INT 113; 0:01C4H) - øadiè pøerušení - IRQ 9/2
INT 72H (INT 114; 0:01C8H) - øadiè pøerušení
INT 73H (INT 115; 0:01CCH) - øadiè pøerušení
INT 74H (INT 116; 0:01D0H) - øadiè pøerušení
INT 75H (INT 117; 0:01D4H) - koprocesor
INT 76H (INT 118; 0:01D8H) - pøerušení od øadièe pevného disku AT
INT 77H (INT 119; 0:01DCH) - øadiè pøerušení
INT 78H (INT 120; 0:01E0H) - nepouito
INT 79H (INT 121; 0:01E4H) - nepouito
INT 7AH (INT 122; 0:01E8H) - nepouito
INT 7BH (INT 123; 0:01ECH) - nepouito
INT 7CH (INT 124; 0:01F0H) - nepouito
INT 7DH (INT 125; 0:01F4H) - nepouito
INT 7EH (INT 126; 0:01F8H) - nepouito
INT 7FH (INT 127; 0:01FCH) - nepouito

BASIC:
INT 80H (INT 128; 0:0200H)
  a
INT F0H (INT 240; 0:03C0H) - rezervováno BASIC

INT F1H (INT 241; 0:03C4H)
  a
INT FFH (INT 255; 0:03FCH) - nepouito








                   Podrobnı popis jednotlivıch pøerušení
                   -------------------------------------


 I N T    0 0 H (INT 0; 0:0000H)  - dìlení nulou

    Pøerušení  je  vygenerováno  procesorem vdy, kdy je poadováno dìlení
èísla  nulou  nebo  vısledek  operace  není mono uloit celı do pøíjmového
operandu (pøíkaz IDIV nebo DIV). Standardní obsluha pøerušení zpùsobí vıpis
hlášení "Divide by Zero" a navrátí øízení do DOSu.

Pozn.: Pøi psaní programu obsluhujícího pøerušení pro dìlení nulou je tøeba
       mít  na  zøeteli,  e procesory 8088, 8086, V20 a V30 ukládají CS:IP
       instrukce  následující  za  instrukcí DIV nebo IDIV, která zpùsobila
       stav  chyby  dìlení  nulou, zatímco procesory 80286 a 80386 ukládají
       CS:IP tìchto instrukcí DIV resp. IDIV.

Pøíklady:     mov       ax,4000h  ; dìlenec
              mov       bl,2      ; dìlitel
              div       bl        ; chyba, 4000h/2=2000h - nevejde se do AL






 I N T    0 1 H (INT 1; 0:0004H)  - krok programu

    Pøerušení   je   generováno  po  kadé  instrukci,  pokud  je  nastaven
pøíznakovı  bit  pro  krokování  programu (TF). Pøíznak TF je vypínán vdy,
kdy je vyvoláno pøerušení libovolného typu. Take uvnitø obsluhy pøerušení
INT  01H se ji krokování programu neprovádí. Po ukonèení pøerušení INT 01H
jsou  všechny pøíznaky navráceny vèetnì pøíznaku krokování, take krokování
programu   bude   pokraèovat.  Toto  pøerušení  je  pouíváno  odlaïovacími
programy,  jako je napø. DEBUG. Jednoduchı zpùsob jak nastavit krokování je
uloit   pomocí  instrukce  PUSH  do  zásobníku  slovo  obsahující  všechny
odpovídající  pøíznakové  bity (vèetnì TF=1), uloit pomocí PUSH poadované
adresy  CS  a  IP  (adresa programu, kterı má bıt provádìn) a potom provést
instrukcí  IRET.  Po  této  instrukci se ji provede jeden krok krokovaného
programu  a provede se opìt pøerušení INT 01H, kterım bude navráceno øízení
do odlaïovacího programu.




 I N T    0 2 H (INT 2; 0:0008H)  - nemaskovatelné pøerušení (NMI)

    Nemaskovatelné  pøerušení  je  generováno  pøi  vzniku stavu v systému,
kterı  neumoòuje jeho další bezchybnou funkci. Tímto stavem mùe bıt napø.
chyba  parity  pamìti,  vıpadek  napájecího  napìtí.  Standardní  nastavení
pøerušení  v  systému zpùsobí zobrazení chybového hlášení "PARITY ERROR 1",
pokud  nastane  chyba  parity  pamìti  na  systémové desce, nebo se zobrazí
hlášení  "PARITY  ERROR  2",  pokud  nastane  chyba  parity pamìti v pamìti
vstupnì/vıstupního  kanálu. Potom se obsluha pøerušení pokusí nalézt polohu
chyby.  Pokud  je  chyba  nalezena,  zobrazí  se adresa segmentu. V opaèném
pøípadì  se  zobrazí  "?????".  V obou pøípadech pøejde poèítaè do uzavøené
smyèky,  ze  které  není  moné pøerušení. Jediná monost odstranìní tohoto
stavu je vypnout a zapnout poèítaè (poznámka k zamyšlení: Cítíte se jistìji
s  vìdomím, e budou ztracena veškerá vaše data z pamìti radìji ne nìkolik
bitù ?). V nìkterıch systémech se po pøerušení NMI snaí systém uloit data
z pamìti RAM na disk, aby je tak zachránil, ne budou úplnì ztracena.


    Nemaskovatelné  pøerušení  INT  02H  je  jediné  pøerušení, které nelze
zamaskovat instrukcí CLI (vynulování pøíznaku povolení pøerušení).

Pozn.: Zamìnitelné  poèítaèe  PC  mají nemaskovatelné pøerušení pouito pro
       diskety,  hodiny  reálného  èasu,  klávesnici a pøerušení odskoku do
       systému.

       Poèítaèe  PCjr  mají  nemaskovatelné pøerušení pouito pro pøerušení
       klávesnicí.

       Matematickı  koprocesor  generuje toto pøerušení pøi objevení chyby.
       Koprocesor  8087  provádí  toto  pøerušení pøímo vdy kdy se objeví
       chyba,  zatímco  koprocesory  80287 a 80387 - pro vìtší sluèitelnost
       software  s  8087 - volají pøerušení IRQ 13, které v závìru vyvolává
       pøerušení INT 2. K rozlišení dùvodu, proè pøerušení NMI nastalo (zda
       nastala chyba pamìti), proveïte operaci ètení z portu 0064H




 I N T    0 3 H (INT 3; 0:000CH)  - bod pøerušení ladìného programu

    Odlaïovací programy pouívají toto pøerušení k instalaci bodù pøerušení
do  odlaïovaného  programu.  Toto  je  normálnì  provádìno tím zpùsobem, e
instrukce  INT  03H  (která  je  jeden  bajt dlouhá - má operaèní kód 0C0H)
nahradí  jeden bajt v odlaïovaném programu v místì, kde má nastat pøerušení
programu.  Pøi  stanovení  bodu pøerušení je nutno tento bod volit uváenì,
aby instrukce INT 03H nebyla umístìna do jiného ne prvního bajtu instrukce
v  programu,  co  by  mohlo zpùsobit chybnou funkci odlaïovaného programu,
nikoliv  však  jeho  pøerušení.  Po návratu øízení programu pøes INT 03H do
odlaïovacího programu je pùvodní obsah bajtu navrácen na pùvodní hodnotu.



 I N T    0 4 H (INT 4; 0:0010H)  - pøeteèení

    Pøerušení  je  vyvoláno  buï  instrukcí  INTO (pøerušení pøi pøeteèení)
pokud je nastaven pøíznak pøeteèení OF nebo pomocí instrukce INT 04H.

    Tento servis dává programátoru monost vytvoøit obsluhu chyby pøeteèení
spoleènì  pro  všechny  aritmetické  operace.  Provádìním instrukce INTO po
aritmetické  operaci v programu lze zajistit, e bude pøeteèení vdy právnì
obsloueno.



 I N T    0 5 H (INT 5; 0:0014H)  - tisk obsahu obrazovky

    Obsluha vytiskne obsah obrazovky na první paralelní tiskárnu (LP1).

    Toto pøerušení mùe bıt voláno z programu stejnì jako kdy je stisknuta
klávesa  <Print  Screen>  (resp.  spolu  s  klávesou <Shift>) (tj. volání z
pøerušení  INT  09H).  Tato  obsluha  nevrací  ádnou hodnotu registrù, ale
nastavuje  stavovı  kód na pamìové lokaci 0:0500H. Moné hodnoty stavového
kódu a jejich vıznamy jsou:

     +---------+-------------------------------------------------------+
     | hodnota |                  vıznam                               |
     +---------+-------------------------------------------------------+
     |   00H   | obsluha Print Screen nevyvolána nebo operace ukonèena |
     |   01H   | obsluha tisku obrazovky právì probíhá                 |
     |   FFH   | bìhem posledního vyvolání nastala chyba               |
     +---------+-------------------------------------------------------+

Pozn.: Pozice kurzoru je pøed provádìním Print Screen uloena, po provedení
       operace je opìt navrácena.

       Obsluha tisku obrazovky se provádí s nastavením povolení pøerušení.

       Pokud je provádìn tisk obrazovky, další poadavky pro tisk obrazovky
       jsou ignorovány.

       Program operaèního systému GRAPHICS nahrazuje standardní obsluhu INT
       05H  a  instaluje obslunı program, kterı umoòuje navíc tisk obsahu
       obrazovky v grafickém módu (øídící kódy tiskárny EPSON).

       BIOS  karty  EGA obsahuje funkci nahrazující normální obsluhu Print-
       Screen  s tím, e umoòuje více formátù vzhledu znakù obrazovky (viz
       INT10H/sluba 12H)



 I N T    0 6 H (INT 6; 0:0018H)  - rezervováno




 I N T    0 7 H (INT 7; 0:001CH)  - rezervováno




 I N T    0 8 H (INT 8; 0:0020H)  - systémové hodiny

    Toto  pøerušení  je  hardwarové pøerušení (IRQ 0) aktivované systémovım
èasovaèem  18,2  krát  za  sekundu  (tj. kadıch 55 ms). Standardní obsluha
provádí následující èinnosti:

    - Provádí  èítání  poètu  impulsù  na  pamìovém  místì  0:046CH (èítaè
      systémového  èasu - délka 4 bajty). Po 24. hodinì èítání je nastaveno
      návìští na pamìovém místì 0:0470H (hodnota 0 nebo 1 - délka 1 bajt),
      které  slouí  jako  signál informující o pøekroèení pùlnoci, a èítaè
      systémového èasu 0:046CH je vynulován.

    - Dekrementuje   èítaè   pro  vypnutí  motoru  disketové  mechaniky  na
      pamìovém  místì  0:0440H  (doba vypnutí motoru asi 2 sekundy), pokud
      není  nastaven  na  0.  Pokud  tento èítaè dosáhne 0, motor disketové
      mechaniky  je  vypnut  a  stavovı  bajt motoru disketové mechaniky na
      pamìovém  místì  0:043FH  je zmìnìn na hodnotu informující o vypnutí
      motoru disketové mechaniky.

    - Generuje pøerušení INT 1CH.

    - U  konvertabilních poèítaèù PC je generováno pøerušení INT 4AH, pokud
      nastane poplachové pøerušení.

    - Pokud  chcete  pouít  toto  pøerušení pro vlastní aktivace klíèování
      èasovıch  událostí,  musíte  vloit  do  progamu  obsluhy posloupnost
      instrukcí,  kterımi oznámíte systému, e pøerušení se ukonèilo. To se
      provede  vysláním  bajtu  20H  na  port 20H (vyslání signálu k øadièi
      pøerušení  8259  o ukonèení pøerušení). Mnoho programù ponechává tuto
      èinnost  na  standardní  obsluze  pøerušení.  Napøíklad: po instalaci
      vlastního  programu  pro  obsluhu je pùvodní vektor uloen v promìnné
      oznaèené  jako  cs:[adresa_int8].  Pøi  kadém  pøerušení  INT 08H je
      vykonávána následující posloupnost instrukcí:

         pushf                                   ; simulace pøerušení INT
         call      dword ptr cs:[adresa_int8]    ; vyvolání pùvodní obsluhy
           ........                              ; nyní následuje vlastní
           ........                              ; èást obsluného programu
         iret                                    ; návrat z pøerušení

    - Celkovı  poèet  impulsù  za  den je 1573040, tj. impulsy mají periodu
      0.05492549 sekundy = frekvence 18.20648 za sekundu.



 I N T    0 9 H (INT 9; 0:0024H)  - pøerušení od klávesnice

    Klávesnice  generuje  pøerušení  INT 09H (pomocí hardwarového pøerušení
IRQ  1)  pokadé,  kdy  je  stisknuta nebo uvolnìna libovolná klávesa. Pøi
drení  klávesy  se po urèité prodlevì generuje opakovanì pøerušení s kódem
klávesy jako stisknutá klávesa.

    Standardní   obsluha  INT  09H  umístìná  v  ROM  ète  orientaèní  kódy
stisknutıch  a  uvolnìnıch kláves z klávesnice a pøevádí je na akce nebo na
jejich klávesové kódy podle následujícího:

    - Pro  ASCII  klávesy, pokud je klávesa stisknuta, je umístìn ASCII kód
      klávesy  a  její  rozšíøenı kód do 32-bajtového vyrovnávacího bufferu
      klávesnice.  Tento  buffer je umístìn na adresách 0:041EH a 0:043DH.
      ASCII  kód  klávesy a orientaèní kód klávesy jsou umístìny do bufferu
      na   pozici  adresovanou  ukazatelem  fronty  klávesnicového  bufferu
      0:041CH  (ASCII kód na niší adrese, orientaèní kód na vyšší adrese).
      Poté  je  ukazatel  fronty klávesnicového bufferu inkrementován o 2 a
      pokud  ukazuje  za  konec  bufferu,  je  pøemìnìn  na zaèátek bufferu
      klávesnice.

    - Pokud  jsou  stisknuty  nebo  uvolnìny  klávesy  <Ctrl>,  <Alt>  nebo
      <Shift>, jsou nastaveny patøiènım zpùsobem registr pøesmykaèù 0:0417H
      a rozšíøenı registr pøesmykaèù 0:0418H.

    - Pokud  je  stisknuta kombinace kláves <Ctrl>-<Alt>-<Del>, je nastaven
      resetovı pøíznak 0:0472H na hodnotu 1234H a øízení je pøedáno na POST
      (vnitøní  test  pøi  zapnutí).  Protoe  je  resetovı pøíznak 0:0472H
      nastaven na 1234H, neprovádí POST vnitøní testy pamìtí.

    - Pokud  je  stisknuta  klávesa  <Pause>,  je  vyvolána uzavøená smyèka
      programu  (veškeré  operace  provádìné  v  poèítaèi se zastaví). Tato
      smyèka   je   pøerušena   stiskem  libovolné  platné  ASCII  klávesy.
      Pozn.:Konvertabilní  poèítaèe  PC  vycházejí  na  pøerušení  INT 15H,
      servis  41H  (èekání  na  vnìjší  událost)  k provádìní èekací smyèky
      pauzy.

    - Pokud  je  stisnuta  klávesa  <Print  Screen>  (resp.  <Shift>-<Print
      Screen>), je provedeno pøerušení INT 05H (tisk obsahu obrazovky).

    - Pokud  je  stisknuta  kombinace  kláves  <Ctrl>-<Break>, je provedeno
      pøerušení INT 1BH (pøerušení klávesnicí). Pøedtím je nastaven bajt na
      adrese   0:0417H  signalizující,  e  byla  zadána  kombinace  kláves
      <Ctrl>-<Break>.

    - Pro poèítaèe XT data 10.1.1986 a pozdìjší, AT, XT-286 a konvertabilní
      PC   generuje   INT·09H  pøerušení  INT·15H,  funkci  91H  (pøerušení
      ukonèeno)  slouící  jako signál, e klávesa je platná. Podobnì je na
      tìchto   zaøízeních   pøi   stisku  nebo  uvolnìní  klávesy  <Sys·Rq>
      generováno   pøerušení   INT·15H,   funkce   85H  (stisknuta  klávesa
      <Sys·Rq>).

    - Pro  poèítaèe AT data 10.6.1985 a pozdìjší, XT-286 a konvertabilní PC
      je  po  ètení  rozšíøeného  kódu klávesy z klávesnicového portu (60H)
      provedeno  pøerušení  INT 15H, funkce 4FH (klávesnice obslouena). To
      umoòuje uivateli pøedefinovat nebo zrušit klávesu.

    Znaky  uloené  do klávesnicového bufferu obsluhou pøerušení INT·09H je
moné opìt pøeèíst z bufferu pomocí pøerušení INT 16H.

    Rezidentní   programy  v  RAM,  které  pouívají  "horkou"  klávesu  ke
spouštìní  speciálních  funkcí  se  obvykle  zaøazují  do  cesty standardní
obsluhy pøerušení INT·09H a testují zadanou klávesu pomocí podobné sekvence
instrukcí:

         push      ax
         in        al,60h              ; ètení stisknuté klávesy
         cmp       al,KLAVESA          ; je to "horká" klávesa ?
         je        obsluha             ; ano je, proveï obsluhu
                                       ; není, skoè do pùvodního driveru
         pop       ax
         jmp       cs:[vektor_int9]    ; skok do pùvodní obsluhy INT 09H

obsluha:                               ; následující instrukce jsou
                                       ; potøebné k pøijetí hardwarového
                                       ; pøerušení
         in        al,61h              ; ètení souèasné hodnoty øídících
                                       ; signálù klávesnice
         mov       ah,al               ; uloení stavu klávesnice
         or        al,80h              ; nastav. bitu "uvolnìní klávesnice"
         out       61h,al              ; vyslání signálu k uvolnìní kláv.
         xchg      ah,al               ; návrat pùvodní hodnoty portu
         out       61h,al              ; zápis zpìt na port

         mov       al,20h              ; vyslání signálu ukonèení pøerušení
         out       20h,al              ;   k øadièi pøerušení 8259
                                       ; následuje vlastní obsluha programu

Pozn.: U  klávesnice  AT  -  101,102 kláves je po pøijetí prefixového bajtu
       (kód  E0H  a  pod.)  nutno  pøijmout  samotnı kód klávesy pøi dalším
       pøerušení z portu 64H (zdvojené mapování kláves).

       Orientaèní  kódy  kláves,  které  jsou èteny z portù, jsou uvedeny v
       popisu portù klávesnice.


     Kódy kláves uloené do bufferu klávesnice standardní obsluhou INT 09H:

+------------------------+----------+---------+---------+--------+
|       klávesa          | normálnì |  SHIFT  |  CTRL   |   ALT  |
+------------------------+----------+---------+---------+--------+
|          Esc           |   011BH  |  011BH  |  011BH  |  01F0H |
|          1 !           |   0231H  |  0221H  |    -    |  7800H |
|          2 @           |   0332H  |  0340H  |  0300H  |  7900H |
|          3 #           |   0433H  |  0423H  |    -    |  7A00H |
|          4 $           |   0534H  |  0524H  |    -    |  7B00H |
|          5 %           |   0635H  |  0625H  |    -    |  7C00H |
|          6 ^           |   0736H  |  075EH  |  071EH  |  7D00H |
|          7 &           |   0837H  |  0826H  |    -    |  7E00H |
|          8 *           |   0938H  |  092AH  |    -    |  7F00H |
|          9 (           |   0A39H  |  0A28H  |    -    |  8000H |
|          0 )           |   0B30H  |  0B29H  |    -    |  8100H |
|          - _           |   0C2DH  |  0C5FH  |  0C1FH  |  8200H |
|          = +           |   0D3DH  |  0D2BH  |    -    |  8300H |
|        Back Space      |   0E08H  |  0E08H  |  0E7FH  |  0EF0H |
|          Tab           |   0F09H  |  0F00H  |  9400H  |  A500H |
|           Q            |   1071H  |  1051H  |  1011H  |  1000H |
|           W            |   1177H  |  1157H  |  1117H  |  1100H |
|           E            |   1265H  |  1245H  |  1205H  |  1200H |
|           R            |   1372H  |  1352H  |  1312H  |  1300H |
|           T            |   1474H  |  1454H  |  1414H  |  1400H |
|           Y            |   1579H  |  1559H  |  1519H  |  1500H |
|           U            |   1675H  |  1655H  |  1615H  |  1600H |
|           I            |   1769H  |  1749H  |  1709H  |  1700H |
|           O            |   186FH  |  184FH  |  180FH  |  1800H |
|           P            |   1970H  |  1950H  |  1910H  |  1900H |
|          [ {           |   1A5BH  |  1A7BH  |  1A1BH  |  1AF0H |
|          ] }           |   1B5DH  |  1B7DH  |  1B1DH  |  1BF0H |
|         Enter          |   1C0DH  |  1C0DH  |  1C0AH  |  1CF0H |
|           A            |   1E61H  |  1E41H  |  1E01H  |  1E00H |
|           S            |   1F73H  |  1F53H  |  1F13H  |  1F00H |
|           D            |   2064H  |  2044H  |  2004H  |  2000H |
|           F            |   2166H  |  2146H  |  2106H  |  2100H |
|           G            |   2267H  |  2247H  |  2207H  |  2200H |
|           H            |   2368H  |  2348H  |  2308H  |  2300H |
|           J            |   246AH  |  244AH  |  240AH  |  2400H |
|           K            |   256BH  |  254BH  |  250BH  |  2500H |
|           L            |   266CH  |  264CH  |  260CH  |  2600H |
|          ; :           |   273BH  |  273AH  |    -    |  27F0H |
|          ' "           |   2827H  |  2822H  |    -    |  28F0H |
|          ` ~           |   2960H  |  297EH  |    -    |  29F0H |
|          \ |           |   2B5CH  |  2B7CH  |  2B1CH  |  2BF0H |
|           Z            |   2C7AH  |  2C5AH  |  2C1AH  |  2C00H |
|           X            |   2D78H  |  2D58H  |  2D18H  |  2D00H |
|           C            |   2E63H  |  2E43H  |  2E03H  |  2E00H |
|           V            |   2F76H  |  2F56H  |  2F16H  |  2F00H |
|           B            |   3062H  |  3042H  |  3002H  |  3000H |
|           N            |   316EH  |  314EH  |  310EH  |  3100H |
|           M            |   326DH  |  324DH  |  320DH  |  3200H |
|          , <           |   332CH  |  333CH  |    -    |  33F0H |
|          . >           |   342EH  |  343EH  |    -    |  34F0H |
|          / ?           |   352FH  |  353FH  |    -    |  35F0H |
|      Print Screen      |     -    |    -    |  7200H  |    -   |
|          [*]           |   372AH  |  372AH  |  9600H  |  37F0H |
|        mezerník        |   3920H  |  3920H  |  3920H  |  3920H |
|          F1            |   3B00H  |  5400H  |  5E00H  |  6800H |
|          F2            |   3C00H  |  5500H  |  5F00H  |  6900H |
|          F3            |   3D00H  |  5600H  |  6000H  |  6A00H |
|          F4            |   3E00H  |  5700H  |  6100H  |  6B00H |
|          F5            |   3F00H  |  5800H  |  6200H  |  6C00H |
|          F6            |   4000H  |  5900H  |  6300H  |  6D00H |
|          F7            |   4100H  |  5A00H  |  6400H  |  6E00H |
|          F8            |   4200H  |  5B00H  |  6500H  |  6F00H |
|          F9            |   4300H  |  5C00H  |  6600H  |  7000H |
|          F10           |   4400H  |  5D00H  |  6700H  |  7100H |
|          [7]           |   4737H  |  4700H  |  7700H  |    -   |
|         Home           |   47E0H  |  47E0H  |  77E0H  |  9700H |
|          [8]           |   4838H  |  4800H  |  8D00H  |    -   |
|     kurzor nahoru      |   48E0H  |  48E0H  |  8DE0H  |  9800H |
|          [9]           |   4939H  |  4900H  |  8400H  |    -   |
|       Page Up          |   49E0H  |  49E0H  |  84E0H  |  9900H |
|          [-]           |   4A2DH  |  4A2DH  |  8E00H  |  4AF0H |
|          [4]           |   4B34H  |  4B00H  |  7300H  |    -   |
|      kurzor vlevo      |   4BE0H  |  4BE0H  |  73E0H  |  9B00H |
|          [5]           |   4C35H  |  4CF0H  |  8F00H  |    -   |
|          [6]           |   4D36H  |  4D00H  |  7400H  |    -   |
|      kurzor vpravo     |   4DE0H  |  4DE0H  |  74E0H  |  9D00H |
|          [+]           |   4E2BH  |  4E2BH  |  9000H  |  4EF0H |
|          [1]           |   4F31H  |  4F00H  |  7500H  |    -   |
|          End           |   4FE0H  |  4FE0H  |  75E0H  |  9F00H |
|          [2]           |   5032H  |  5000H  |  9100H  |    -   |
|      kurzor dolù       |   50E0H  |  50E0H  |  91E0H  |  A000H |
|          [3]           |   5133H  |  5100H  |  7600H  |    -   |
|       Page Down        |   51E0H  |  51E0H  |  76E0H  |  A100H |
|          [0]           |   5230H  |  5200H  |  9200H  |    -   |
|        Insert          |   52E0H  |  52E0H  |  92E0H  |  A200H |
|          [.]           |   532EH  |  5300H  |  9300H  |    -   |
|        Delete          |   53E0H  |  53E0H  |  93E0H  |  A300H |
|          F11           |   8500H  |  8700H  |  8900H  |  8B00H |
|          F12           |   8600H  |  8800H  |  8A00H  |  8C00H |
+------------------------+----------+---------+---------+--------+

Pozn.: Klávesy  ohranièené  lomenımi závorkami [] jsou klávesy v numerickém
       poli klávesnice.

       Kódy kláves s ASCII hodnotou E0H jsou generovány pouze klávesnicí AT
       101(102) kláves, funkcí pro ètení standardních kódù kláves jsou tyto
       kódy vypuštìny (nebo pøedefinovány na normální kódy s ASCII hodnotou
       00H).

       Klávesnice AT - 101(102) kláves se liší od pùvodní klávesnice
















 I N T    0 A H (INT 10; 0:0028H) - pøerušení pøi zpìtném bìhu EGA

    Pøi vertikálním zpìtném bìhu paprsku displeje generuje karta EGA pomocí
IRQ 2 pøerušení INT 0AH. Pøi pouití tohoto pøerušení mìjte na mysli, e AT
pouívá IRQ 2 jako kaskádní poadavek pro celou tøídu pøerušení (IRQ 8-15).




 I N T    0 B H (INT 11; 0:002CH) - pøerušení od sériového portu COM2

    Pøerušení  INT 0BH je generováno pomocí hardwarového pøerušení IRQ 3 ze
sériového portu COM2.



 I N T    0 C H (INT 12; 0:0030H) - pøerušení od sériového portu COM1

    Pøerušení  INT 0CH je generováno pomocí hardwarového pøerušení IRQ 4 ze
sériového portu COM1.



 I N T    0 D H (INT 13; 0:0034H) - pøerušení od øadièe pevného disku XT

    Souèasnì té pøerušení od tiskárny LPT2 (IRQ 5).



 I N T    0 E H (INT 14; 0:0038H) - pøerušení od øadièe prunıch diskù

    Pøerušení je vyvoláno pomocí hardwarového pøerušení úrovnì 6 (IRQ 6) po
kadé  operaci  s  prunım  diskem  (ètení,  zápis, vystavení, rekalibrace,
atd.).



 I N T    0 F H (INT 15; 0:003CH) - pøerušení od tiskárny LPT1

    Pøerušení vyvolané tiskárnou LPT1 (IRQ 7).



 I N T    1 0 H (INT 16; 0:0040H) - obsluha displeje

    Rutina  pro  obsluhu  displeje  je  rozšíøena  do  více  funkcí.  Èíslo
poadované funkce je uloeno v registru AH.

    Pøi vyvolání pøerušení INT 10H jsou znièeny obsahy registrù AX, SP, BP,
SI a registru DI.


         Souhrn slueb pøerušení  I N T  1 0 H :

Sluba:  00H (AH =  0) - nastavení videomódu
         01H (AH =  1) - nastavení velikosti kurzoru
         02H (AH =  2) - nastavení pozice kurzoru
         03H (AH =  3) - ètení pozice kurzoru a jeho velikosti
         04H (AH =  4) - ètení pozice svìtelného pera
         05H (AH =  5) - nastavení aktivní stránky displeje
         06H (AH =  6) - rolování okna nahoru
         07H (AH =  7) - rolování okna dolù
         08H (AH =  8) - ètení znaku a atributu z pozice kurzoru
         09H (AH =  9) - zápis znaku a atributu na poz. kurzoru
         0AH (AH = 10) - zápis znaku na pozici kurzoru
         0BH (AH = 11) - nastavení palety barev
         0CH (AH = 12) - zápis bodu
         0DH (AH = 13) - ètení bodu
         0EH (AH = 14) - zápis znaku v telegrafním (TTY) módu
         0FH (AH = 15) - dotaz na souèasnì nastavenı videomód
         10H (AH = 16) - nastavení registrù palet (PCjr, EGA)
         11H (AH = 17) - generátor znakù (EGA)
         12H (AH = 18) - alternativní nastavení (EGA)
         13H (AH = 19) - zápis øetìzce znakù (nìkteré poèítaèe)
         14H (AH = 20) - ovladaè LCD (konvertabilní PC)
         15H (AH = 21) - navrácení fyzic. charakterist. displeje






 I N T    1 0 H / 0 0 H (AH = 0)  - nastavení videomódu

    Vstup:    AH = 00H
              AL = videomód

    Vıstup:   ádnı

    Funkce nastaví jeden z následujících videomódù (podle obsahu reg. AL):
 
+---------+----------+-------------+------------------+----------+--------+
|   Mód   |   Typ    |  Rozlišení  |  Grafická karta  |   Barvy  | Adresa |
|         |          |             |                  |          |bufferu |
+---+-----+----------+-------------+------------------+----------+--------+
| 0 | 00H |    text  |   40 x 25   |všechny kromì MDA | 16 šedé  | B8000H |
| 1 | 01H |    text  |   40 x 25   |všechny kromì MDA | 16 f/8 b | B8000H |
| 2 | 02H |    text  |   80 x 25   |všechny kromì MDA | 16 šedé  | B8000H |
| 3 | 03H |    text  |   80 x 25   |všechny kromì MDA | 16 f/8 b | B8000H |
| 4 | 04H |  grafika |  320 x 200  |všechny kromì MDA |     4    | B8000H |
| 5 | 05H |  grafika |  320 x 200  |všechny kromì MDA |  4 šedé  | B8000H |
| 6 | 06H |  grafika |  640 x 200  |všechny kromì MDA |     2    | B8000H |
| 7 | 07H |    text  |   80 x 25   |    MDA, EGA      |    è/b   | B0000H |
| 8 | 08H |  grafika |  160 x 200  |      PCjr        |    16    | B0000H |
| 9 | 09H |  grafika |  320 x 200  |      PCjr        |    16    | B0000H |
|10 | 0AH |  grafika |  640 x 200  |      PCjr        |     4    | B0000H |
|11 | 0BH |rezerováno|(interní EGA)|                  |          |        |
|12 | 0CH |rezerováno|(interní EGA)|                  |          |        |
|13 | 0DH |  grafika |  320 x 200  |      EGA         |    16    | A0000H |
|14 | 0EH |  grafika |  640 x 200  |      EGA         |    16    | A0000H |
|15 | 0FH |  grafika |  640 x 350  |      EGA         |    è/b   | A0000H |
|16 | 10H |  grafika |  640 x 350  |      EGA         |    16    | A0000H |
+---+-----+----------+-------------+------------------+----------+--------+
 (Pozn.: f oznaèuje popøedí textu, b pozadí textu)

Pozn.: Pokud  je  videomód  zmìnìn, obrazovka se vymae. Nepouívejte ovšem
       tuto  slubu  k  vymazávání  obrazovky,  nebo  èas  potøebnı k této
       operaci je ponìkud delší ne normální vymazání obrazovky (servis 06H
       nebo 07H).

       K odstranìní vymazání obrazovky (pouze PCjr, EGA a konvertabilní PC)
       lze nastavit pøi volání funkce nejvyšší bit AL na 1.

       V grafickém módu se kurzor nezobrazuje (je nutno øešit programovì).

       Zmìna videomódu také zmìní velikost kurzoru.

       Pro  PCjr,  CGA  a  EGA  jsou módy 0, 2 a 5 identické módùm 1, 3 a 4
       vyjma  toho,  e  není  monı  "Color  Burst"  ("Color  Burst"  øídí
       zobrazování  barev  na  slokovém  monitoru:  pokud je "Color Burst"
       zapnut,  barvy  se  zobrazují,  v  opaèném  pøípadì  se nezobrazují.
       Zobrazení RGB není ovlivnìno stavem "Color Burst".)

       Pouijte  slubu INT 10H - funkce 0FH k získání informací o·souèasnì
       nastaveném videomódu.





 I N T    1 0 H / 0 1 H (AH = 1)  - nastavení velikosti kurzoru

    Vstup:    AH = 01H
              CH = poèáteèní linka kurzoru (bity 4 a 0 = 0 a 31)
              CL = koneèná linka kurzoru (bity 4 a 0 = 0 a 31)

    Vıstup:   ádnı

    Hodnoty poèáteèní a koneèné linky kurzoru (CH a CL):
    +------------+-------------------------+-------------------------+
    |   Adaptér  |    Povolené hodnoty     |   Standardní hodnoty    |
    |            |  zaèátek   |   konec    |  zaèátek   |    konec   |
    +------------+------------+------------+------------+------------+
    |    CGA     |      0     |      7     |      6     |     7      |
    |    MDA     |      0     |     13     |     11     |    12      |
    |    EGA     |      0     |     13     |   6(11)    |   7(12)    |
    |            |            |            |      (podle módu)       |
    +------------+------------+------------+-------------------------+

Pozn.: Èíslování   linky   zaèíná  na  horním  okraji  bloku  znaku  (0)  a
       inkrementuje  se  smìrem dolù. Pokud specifikujete konec linky niší
       ne  poèáteèní  linky  (tj.  konec  je vıše ne zaèátek), rozdìlí se
       kurzor na dvì èásti na horním a dolním okraji znaku.

       Pro všechny videomódy je pouze jedna velikost kurzoru.

       Blikání   kurzoru  nemùe  bıt  zablokováno  (nebo  je  realizováno
       hardwarovì),  avšak  kurzor  mùete  uèinit neviditelnım. K dosaení
       toho  umístìte  kurzor  (pomocí  sluby  INT 10H - funkce 02H) ven z
       obrazovky na netisknutelnou pozici (napø. øádek 25).

       Nastavení  bitù 5 nebo 6 zpùsobí chybnou funkci kurzoru - od silného
       blikání   a  po  zneviditelnìní  kurzoru.  Nepouívejte  však  tuto
       techniku  k  zneviditelnìní  kurzoru. Na nìkterıch poèítaèích nemusí
       fungovat.

       Tato  sluba  má  úèinek  pouze v textovém módu. V grafickém módu se
       ádnı kurzor nezobrazuje.

       Sluba 03H navrací souèasnì nastavenou velikost kurzoru.



 I N T    1 0 H / 0 2 H (AH = 2)  - nastavení pozice kurzoru

    Vstup:    AH = 02H
              BH = èíslo stránky displeje
              DH = øádek
              DL = pozice

    Vıstup:   ádnı

Pozn.: Tato  sluba mùe umísovat kurzor na aktivnì zobrazené stránce nebo
       na neaktivní stránce.

       V  grafickıch  módech  tato  sluba nastaví logickou pozici kurzoru,
       aèkoliv   kurzor   samotnı  se  nezobrazuje  (v  grafickém  módu  se
       nezobrazuje ádnı kurzor, kurzor je nutno vytvoøit programovì).

       Aby se stal kurzor neviditelnı, umístìte jej na øádek èíslo 25.

       Horní  levı  roh  displeje má souøadnice DH = 0, DL = 0, pravı dolní
       roh  má  souøadnice  DH = 18H (24), DL = 27H (39) pro 40-znakovı mód
       nebo DL = 4FH (79) pro 80-znakovı mód.

       Viz  té  sluba 05H - vıpis povolenıch èísel stránek pro rùzné módy
       displeje.  Protoe  sluba  neprovádí  kontrolu èísla stránky, mohou
       nastat  chybové  stavy,  pokud specifikujete neplatné èíslo stránky.
       Èíslo stránky pro grafické módy je 0.



 I N T    1 0 H / 0 3 H (AH = 3)  - ètení pozice kurzoru a jeho velikosti

    Vstup:    AH = 03H
              BH = èíslo stránky displeje

    Vıstup:   CH = poèáteèní linka kurzoru
              CL = koneèná linka kurzoru
              DH = øádek
              DL = pozice

    Hodnoty poèáteèní a koneèné linky kurzoru (CH a CL):
    +------------+-------------------------+-------------------------+
    |   Adaptér  |    Povolené hodnoty     |   Standardní hodnoty    |
    |            |  zaèátek   |   konec    |  zaèátek   |    konec   |
    +------------+------------+------------+------------+------------+
    |    CGA     |      0     |      7     |      6     |     7      |
    |    MDA     |      0     |     13     |     11     |    12      |
    |    EGA     |      0     |     13     |   6(11)    |   7(12)    |
    |            |            |            |      (podle módu)       |
    +------------+------------+------------+-------------------------+

Pozn.: Tato  sluba  mùe  poskytovat  pozici  kurzoru  na  aktivní stránce
       displeje  nebo  na  neaktivní  stránce. Protoe existuje pouze jeden
       hardwarovı kurzor, bude poèáteèní linka (CH) a koneèná linka (CL) (a
       tím  i  velikost  kurzoru)  stejná  nezávisle  na tom, která stránka
       displeje je specifikována.

       V  grafickıch  módech tato sluba poskytuje logickou pozici kurzoru,
       aèkoliv samotnı kurzor se nezobrazuje.

       Horní  levı  roh  displeje má souøadnice DH = 0, DL = 0, pravı dolní
       roh  má  souøadnice  DH = 18H (24), DL = 27H (39) pro 40-znakovı mód
       nebo DL = 4FH (79) pro 80-znakovı mód.

       Viz  té  sluba 05H - vıpis povolenıch èísel stránek pro rùzné módy
       displeje.  Protoe  sluba  neprovádí  kontrolu èísla stránky, mohou
       nastat  chybové  stavy,  pokud specifikujete neplatné èíslo stránky.
       Èíslo stránky pro grafické módy je 0.

       Pouijte slubu 02H k nastavení pozice kurzoru.

       Pouijte slubu 01H k nastavení velikosti kurzoru.

       Døívìjší  verze  monochromatického  adaptéru (MDA) a displeje Compaq
       mají  chybu.  Nesprávnì  hlásí poèáteèní a koneènou linku kurzoru po
       inicializaci  video  adaptéru  (po  zmìnì  videomódu nebo po zapnutí
       poèítaèe).  MDA  by  mìl  hlásit velikost kurzoru CH = 06H, CL = 07H
       namísto  CH = 0BH, CL = 0CH. Compaq hlásí velikost kurzoru CH = 00H,
       CL  =  67H  pro  libovolnı  mód displeje. Nutno poznamenat, e tento
       problém  se  vyskytuje  pouze  po  zmìnì  videomódu  nebo po zapnutí
       napájení.  Po prvním nastavení velikosti kurzoru (sluba 01H) je ji
       hlášena správná velikost kurzoru.


 I N T    1 0 H / 0 4 H (AH = 4)  - ètení pozice svìtelného pera

    Vstup:    AH = 04H

    Vıstup:   AH = stav (0=neaktivní, 1=aktivní)
              BX = èíslo sloupce bodu (0 - 639)
              CH = èíslo øádku bodu (0 - 199)
              CX = èíslo øádku bodu pro videomódy 0FH - 10H (0 - nnn)
              DH = èíslo øádku znaku (0 - 24)
              DL = èíslo pozice znaku (0 - 39 nebo 0 - 79)

Pozn.: Pozice  je hlášena ve dvou formách: pozice znaku (øádek v DH, pozice
       v DL) a pozice bodu (linka v CH, bod na lince v BX).

       Pro konvertabilní PC - pokud je AH pøi návratu 0, svìtelné pero není
       systémem podporováno.

       Souøadnice   bodu  pozice  svìtelného  pera  nejsou  pøíliš  pøesné.
       Souøadnice  Y je vdy násobkem 2, zatímco souøadnice X je násobkem 4
       pro grafickı mód 320 x 200 a násobkem 8 pro grafickı mód 640 x 200.


 I N T    1 0 H / 0 5 H (AH = 5)  - nastavení aktivní stránky displeje

    Vstup:    AH = 05H
              AL = èíslo stránky displeje

    Vıstup:   ádnı


            Povolené hodnoty èísla stránky displeje (AL):
    +---------+----------+-------------+-------------------------+
    |   Mód   |   Typ    |  Rozlišení  |    Povolené stránky     |
    |         |          |             |                         |
    +---+-----+----------+-------------+-------------------------+
    | 0 | 00H |    text  |   40 x 25   |         0 - 7           |
    | 1 | 01H |    text  |   40 x 25   |         0 - 7           |
    | 2 | 02H |    text  |   80 x 25   |         0 - 3           |
    | 3 | 03H |    text  |   80 x 25   |         0 - 3           |
    | 4 | 04H |  grafika |  320 x 200  |           0             |
    | 5 | 05H |  grafika |  320 x 200  |           0             |
    | 6 | 06H |  grafika |  640 x 200  |           0             |
    | 7 | 07H |    text  |   80 x 25   |           0             |
    | 8 | 08H |  grafika |  160 x 200  |           0             |
    | 9 | 09H |  grafika |  320 x 200  |           0             |
    |10 | 0AH |  grafika |  640 x 200  |           0             |
    |11 | 0BH |rezerováno|(interní EGA)|           -             |
    |12 | 0CH |rezerováno|(interní EGA)|           -             |
    |13 | 0DH |  grafika |  320 x 200  |         0 - 7           |
    |14 | 0EH |  grafika |  640 x 200  |         0 - 3           |
    |15 | 0FH |  grafika |  640 x 350  |         0 - 1           |
    |16 | 10H |  grafika |  640 x 350  |         0 - 1           |
    +---+-----+----------+-------------+-------------------------+

Pozn.: Obsah  stránek  displeje  není  znièen  pøi  zmìnì aktivnì zobrazené
       stránky   displeje.   Díky  této  skuteènosti  mùete  zapisovat  do
       neaktivní  stránky  a potom pøepnout zobrazení na tuto stránku - tím
       je moné provádìt rychlé zmìny obsahu obrazovky.

       Pouijte  slubu  0FH  k  obdrení  souèasnì nastavené (tj. aktivní)
       stránky displeje.



 I N T    1 0 H / 0 6 H (AH = 6) - rolování okna nahoru

    Vstup:    AH = 06H
              AL = poèet øádek k rolování (pokud = 0, vymae se celé okno)
              BH = atribut barev pro novì vzniklé prázdné øádky
              CH = èíslo øádku horního levého rohu okna (horní okraj)
              CL = èíslo pozice levého horního rohu okna (levı okraj)
              DH = èíslo øádku spodního pravého rohu okna (dolní okraj)
              DL = èíslo pozice pravého spodního rohu okna (pravı okraj)

    Vıstup:   ádnı

    V  definovaném  oknì  jsou  všechny  øádky  posunuty o danı poèet øádkù
nahoru.  Novì  vzniklé  øádky  jsou  zaplnìny  mezerami  se specifikovanımi
atributy  (hodnota  v  BH).  Øádky,  které  zmizely  na  vrcholu okna, jsou
ztraceny.

Pozn.: Pokud  poèet  øádkù k rolování je nastaven na nulu, je specifikované
       okno vyplnìno celé mezerami (tj. je vymazáno).

       Pouijte slubu 07H k rolování okna dolù.

       Tato sluba má úèinek pouze pro souèasnì nastavenou stránku displeje
       (tj. aktivní stránka).



 I N T    1 0 H / 0 7 H (AH = 7)  - rolování okna dolù

    Vstup:    AH = 07H
              AL = poèet øádek k rolování (pokud = 0, vymae se celé okno)
              BH = atribut barev pro novì vzniklé prázdné øádky
              CH = èíslo øádku horního levého rohu okna (horní okraj)
              CL = èíslo pozice levého horního rohu okna (levı okraj)
              DH = èíslo øádku spodního pravého rohu okna (dolní okraj)
              DL = èíslo pozice pravého spodního rohu okna (pravı okraj)

    Vıstup:   ádnı

    V definovaném oknì jsou všechny øádky posunuty o danı poèet øádkù dolù.
Novì  vzniklé  øádky  jsou  zaplnìny  mezerami  se specifikovanımi atributy
(hodnota v BH). Øádky, které zmizely na spodním okraji okna, jsou ztraceny.

Pozn.: Pokud  poèet  øádkù k rolování je nastaven na nulu, je specifikované
       okno vyplnìno celé mezerami (tj. je vymazáno).

       Pouijte slubu 06H k rolování okna nahoru.

       Tato sluba má úèinek pouze pro souèasnì nastavenou stránku displeje
       (tj. aktivní stránka).



 I N T    1 0 H / 0 8 H (AH = 8)  - ètení znaku a atributu z pozice kurzoru

    Vstup:    AH = 08H
              BH = èíslo stránky displeje (pouze pro textové módy)

    Vıstup:   AX = atributy znaku (pouze v textovém módu)
              AL = ASCII hodnota znaku

Pozn.: V grafickıch módech není tøeba zadávat èíslo stránky displeje.

       Lze  obdret  bìnı  znak  a atribut pro libovolnou stránku, dokonce
       i·kdy stránka není aktivní (tj. zobrazená) stránka.

       V  grafickém módu sluba vrací v AL 00H, pokud není rozpoznán symbol
       znaku.

       Pouijte slubu 09H k zápisu znaku se specifikovanım atributem.



 I N T    1 0 H / 0 9 H (AH = 9)  - zápis znaku a atributu na poz. kurzoru

    Vstup:    AH = 09H
              AL = ASCII hodnota znaku
              BH = èíslo stránky displeje (pouze v textovém módu)
              BL = atributy/barva
              CX = poèet zápisù znaku (kolikrát je zapsán)

    Vıstup:   ádnı

Pozn.: Ukládání  znaku zaèíná na souèasné pozici kurzoru a na specifikované
       stránce displeje, avšak kurzor samotnı se nepøemisuje.

       V  textovém  módu  se znaky po pøekroèení pravého okraje ukládají od
       zaèátku nového øádku. V grafickém módu jsou znaky ignorovány.

       Tato  sluba  zobrazuje  všechny znaky - i øídící - jako tisknutelné
       znaky.  Napø. pokud je AL = 13 (ASCII ekvivalent CR = øídící kód pro
       pøesun kurzoru na zaèátek øádku), zobrazí se znak noty.

       V  grafickıch  módech  -  pokud  je atribut (BL) pøedán s nastavenım
       bitem·7  (v textovém reimu blikání textu nebo zvıraznìní podkladu),
       je  mezi bity barev zobrazovaného znaku a bity barev ji zobrazeného
       znaku  (resp. grafického symbolu) provedena operace XOR (v normálním
       stavu bity barev symbolu pøekrıvají souèasnı obsah displeje). To lze
       pouít  k  zápisu  znaku  pøes  grafické symboly a k jeho opìtovnému
       zrušení,  ani  by  došlo  ke  zmìnì pùvodního obsahu displeje. Tato
       funkce  slouí  té  ke  zviditelnìní  textu v místech, kde se barva
       podkladu mìní a celı znak nebo jeho èást by splynul s podkladem.

       Rozdíly  mezi  touto  slubou  a  slubou 0AH je ten, e tato sluba
       dovoluje uivateli specifikovat atributy znaku.

       Viz té tabulka znakù displeje.



 I N T    1 0 H / 0 A H (AH = 10)  - zápis znaku na pozici kurzoru

    Vstup:    AH = 0AH
              AL = ASCII hodnota znaku
              BH = èíslo stránky displeje (pouze v textovém módu)
              CX = poèet zápisù znaku (kolikrát je zapsán)

    Vıstup:   ádnı

Pozn.: Ukládání  znaku zaèíná na souèasné pozici kurzoru a na specifikované
       stránce displeje, avšak kurzor samotnı se nepøemisuje.

       Pouijte slubu 09H pro grafické módy, nebo dovoluje zmìnu barev.

       V  textovém  módu  se znaky po pøekroèení pravého okraje ukládají od
       zaèátku nového øádku. V grafickém módu jsou znaky ignorovány.

       Tato  sluba  zobrazuje  všechny znaky - i øídící - jako tisknutelné
       znaky.  Napø. pokud je AL = 13 (ASCII ekvivalent CR = øídící kód pro
       pøesun kurzoru na zaèátek øádku), zobrazí se znak noty.

       Rozdíly  mezi  touto  slubou  a  slubou 09H je ten, e tato sluba
       nedovoluje  uivateli specifikovat atributy znaku. Jako atributy pro
       zobrazení  znaku  pouívá  sluba  souèasné  atributy, které jsou na
       pozici, kam je znak zapisován.

       Viz té tabulka znakù displeje.



 I N T    1 0 H / 0 B H (AH = 11) - nastavení palety barev

    Vstup:    AH = 0BH
              BH = identifikátor palety barev (0 nebo 1 - viz níe)
              BL = barva   nebo   hodnota   palety,   která   bude  pouita
                   s·identifikátorem palety barev (0 a 31)

    Vıstup:   ádnı

    Pokud je identifikátor palety barev (BH) = 0 :

    - nastavení barev pozadí pro grafickı mód 320 x 200
    - nastavení barvy okolí (borderu) pro textové módy
    - nastavení barvy popøedí pro grafickı mód 640 x 200

    BL obsahuje barvu, která bude pouita. Pro EGA se nastaví :
    - barva pozadí pro grafickı mód 640 x 200.

    Pokud  je  nastavována  barva okolí pro textové módy, barvy 16-31 zvolí
    nastavení pozadí se zvıšenou intenzitou.

    Pokud je identifikátor palety barev (BH) = ù :

    - nastavení palety pro grafickı mód 320 x 200.

    Hodnota v BL urèuje, která kombinace palety bude pouita:

                   Paleta 0 (BL = 0):
   +---------------------------+-----------------------------------------+
   |        Hodnota bodu       |                 barva                   |
   +---------------------------+-----------------------------------------+
   |              0            |  souèasnì nastavená barva pozadí        |
   |              1            |  zelená                                 |
   |              2            |  èervená                                |
   |              3            |  hnìdá                                  |
   +---------------------------+-----------------------------------------+

                   Paleta 1 (BL = 1):
   +---------------------------+-----------------------------------------+
   |        Hodnota bodu       |                 barva                   |
   +---------------------------+-----------------------------------------+
   |              0            |  souèasnì nastavená barva pozadí        |
   |              1            |  tyrkysová (modrozelená)                |
   |              2            |  purpurová (fialová)                    |
   |              3            |  bílá                                   |
   +---------------------------+-----------------------------------------+



 I N T    1 0 H / 0 C H (AH = 12) - zápis bodu

    Vstup:    AH = 0CH
              AL = barva bodu
              CX = horizontální pozice bodu
              DX = vertikální pozice bodu
              BH = èíslo  stránky  displeje (pouze grafické módy s více ne
                   1·stránkou)

    Vıstup:   ádnı

    Povolené kombinace:
 
+---------+-----------+-------+-------+-------+-------+-------+---------+
|   Mód   | Rozlišení | barvy | moné |   CX  |  DX   |   AL  |   BH    |
|         |           |       |stránky| horiz.| vert. | barva | stránka |
+---+-----+-----------+-------+-------+-------+-------+-------+---------+
| 4 | 04H | 320 x 200 |   4   |   0   | 0-319 | 0-199 |  0-3  |    -    |
| 5 | 05H | 320 x 200 | 4 šedá|   0   | 0-319 | 0-199 |  0-3  |    -    |
| 6 | 06H | 640 x 200 |   2   |   0   | 0-639 | 0-199 |  0-1  |    -    |
|13 | 0DH | 320 x 200 |  16   | 0 - 7 | 0-319 | 0-199 |  0-15 |   0-7   |
|14 | 0EH | 640 x 200 |  16   | 0 - 3 | 0-639 | 0-199 |  0-15 |   0-3   |
|15 | 0FH | 640 x 350 |  è/b  | 0 - 1 | 0-639 | 0-349 |  0-1  |   0-1   |
|16 | 10H | 640 x 350 |  16   | 0 - 1 | 0-639 | 0-349 |  0-15 |   0-1   |
+---+-----+-----------+-------+-------+-------+-------+-------+---------+

Pozn.: Pokud  je  barva bodu (AL) specifikována s nastavenım 7. bitem, bude
       provedena operace XOR mezi bity barvy zapisovaného bodu a bity barvy
       zapsaného  bodu  na  danıch souøadnicích. To lze pouít k zapisování
       obrazcù a jejich opìtovnému rušení, ani by došlo ke zmìnì pùvodního
       obsahu displeje.

       Pro  módy  0DH  a  10H  je  nutné  uvádìt  èíslo  stránky  displeje
       v·registru BH.



 I N T    1 0 H / 0 D H (AH = 13) - ètení bodu

    Vstup:    AH = 0DH
              CX = horizontální pozice bodu
              DX = vertikální pozice bodu
              BH = èíslo  stránky  displeje (pouze grafické módy s více ne
                   1·stránkou)

    Vıstup:   AL = barva bodu

    Povolené kombinace:
 
+---------+-----------+-------+-------+-------+-------+-------+---------+
|   Mód   | Rozlišení | barvy | moné |   CX  |  DX   |   AL  |   BH    |
|         |           |       |stránky| horiz.| vert. | barva | stránka |
+---+-----+-----------+-------+-------+-------+-------+-------+---------+
| 4 | 04H | 320 x 200 |   4   |   0   | 0-319 | 0-199 |  0-3  |    -    |
| 5 | 05H | 320 x 200 | 4 šedá|   0   | 0-319 | 0-199 |  0-3  |    -    |
| 6 | 06H | 640 x 200 |   2   |   0   | 0-639 | 0-199 |  0-1  |    -    |
|13 | 0DH | 320 x 200 |  16   | 0 - 7 | 0-319 | 0-199 |  0-15 |   0-7   |
|14 | 0EH | 640 x 200 |  16   | 0 - 3 | 0-639 | 0-199 |  0-15 |   0-3   |
|15 | 0FH | 640 x 350 |  è/b  | 0 - 1 | 0-639 | 0-349 |  0-1  |   0-1   |
|16 | 10H | 640 x 350 |  16   | 0 - 1 | 0-639 | 0-349 |  0-15 |   0-1   |
+---+-----+-----------+-------+-------+-------+-------+-------+---------+

Pozn.: Pro  módy  0DH  a  10H  je  nutné  uvádìt  èíslo  stránky  displeje
       v·registru BH.



 I N T    1 0 H / 0 E H (AH = 14) - zápis znaku v telegrafním (TTY) módu

    Vstup:    AH = 0EH
              AL = zapisovanı znak
              BL = barva popøedí (pouze grafické módy)
              BH = èíslo stránky displeje (pouze textové módy)

    Vıstup:   ádnı

Pozn.: V  textovém  módu  jsou  znaky zapisovány s atributy, které mìl znak
       pùvodnì   zapsanı   na  dané  pozici.  V  grafickém  módu  je  nutno
       specifikovat  barvy  popøedí  znaku  (BL)  pøi  kadém vyvolání této
       sluby.

       V  textovıch módech mohou bıt znaky zapisovány i do stránek displeje
       jinıch ne je zobrazená (aktivní) stránka displeje.

       Tato  sluba  reaguje  na ASCII vıznam znakù 07H (zvonek - pípnutí),
       08H  (backspace  -  krok  zpìt),  0AH  (posun  na další øádek) a 0DH
       (kurzor   na  zaèátek  øádku).  Všechny  ostatní  znaky  ASCII  jsou
       zobrazovány  jako  znaky  s  tím,  e  se kurzor posune vdy o jednu
       pozici vpøed.

       Pokud  byl kurzor na konci øádku, pøeskoèí ma zaèátek dalšího øádku.
       Pokud  byl  kurzor  na  konci  posledního øádku obrazovky, obrazovka
       roluje  nahoru  o  jeden  øádek a jako atributy displeje pro vloenı
       novı  øádek jsou pouity atributy posledního znaku na pøedcházejícím
       øádku.



 I N T    1 0 H / 0 F H (AH = 15) - dotaz na souèasnì nastavenı videomód

    Grafické karty EGA a PCjr mají 16 paletovıch registrù a 1 registr barvy
okolí  (borderu).  Tato  sluba  dává  uivateli monost ovládání zobrazení
displeje pomocí tìchto registrù.

    Vstup:    AH = 0FH

    Vıstup:   AL = videomód
              AH = poèet pozic znakù na øádek
              BH = èíslo aktivnì zobrazené stránky displeje

Pozn.: Viz sluba 00H - tabulka videomódù a nastavení videomódù.



 I N T    1 0 H / 1 0 H (AH = 16) - nastavení registrù palet (PCjr, EGA)

    Vstup:    AH = 10H
              AL = podsluba:
                   00H - nastavení paletového registru
                         BL = paletovı registr
                         BH = hodnota pro nové nastavení

                   01H - nastavení registru barvy okolí (borderu)
                         BH = nová hodnota k nastavení

                   02H - nastavení paletovıch registrù a registru okolí
                         ES:DX = ukazatel na tabulku barev

                   03H - vıznam bitu intenzita/blikání
                         BL = 0    - zvıšená intenzita podkladu
                         BL = 1    - blikající text

    Vıstup:   ádnı


Podsluba 00H (nastavení paletovıch registrù):

    Kadı ze 16 paletovıch registrù mùe bıt nastaven na jednu z 64 hodnot.
Hodnota registru BH (nové nastavení paletového registru) má formát:

         bit 7 - rezervováno
         bit 6 - rezervováno
         bit 5 - sekundární èervená
         bit 4 - sekundární zelená
         bit 3 - sekundární modrá
         bit 2 - èervená
         bit 1 - zelená
         bit 0 - modrá

    Sekundární  barvy  mají  intenzitu  1/3,  zatímco  normální  barvy mají
intenzitu  2/3.  Napø.  pøi  BH  = 02H se zobrazí zelená, BH = 10H je tmavì
zelená a BH = 12H je jasnì zelená barva.

    Standardní nastavení paletovıch registrù je:

+-------------------+-------------------+--------------------------------+
| Paletovı registr  |   hodnota barvy   |             barva              |
+-------------------+-------------------+--------------------------------+
|      0    00H     |     0      00H    |  èerná                         |
|      1    01H     |     1      01H    |  modrá                         |
|      2    02H     |     2      02H    |  zelená                        |
|      3    03H     |     3      03H    |  tyrkysová (cyan, modrozelená) |
|      4    04H     |     4      04H    |  èervená                       |
|      5    05H     |     5      05H    |  purpurová (magenta, fialová)  |
|      6    06H     |    20      14H    |  hnìdá                         |
|      7    07H     |     7      07H    |  bílá                          |
|      8    08H     |    56      38H    |  tmavì šedá                    |
|      9    09H     |    57      39H    |  svìtle modrá                  |
|     10    0AH     |    58      3AH    |  svìtle zelená                 |
|     11    0BH     |    59      3BH    |  svìtle tyrkysová              |
|     12    0CH     |    60      3CH    |  svìtle èervená                |
|     13    0DH     |    61      3DH    |  svìtle purpurová              |
|     14    0EH     |    62      3EH    |  lutá                         |
|     15    0FH     |    63      3FH    |  jasnì bílá                    |
+-------------------+-------------------+--------------------------------+


Podsluba 01H (nastavení registru barvy okolí (borderu):

    Tato  podsluba  nastaví  registr  barvy  okolí.  Displej  EHC umoòuje
nastavení okolí pouze v módu 200 øádek.


Podsluba 02H (nastavení všech paletovıch registrù a registru barvy okolí):

    ES:DX  ukazuje  na  17-ti  bajtovou  tabulku  barev,  ve  které prvních
16·bajtù pøedstavuje nové hodnoty pro 16 paletovıch registrù, poslední bajt
je nová hodnota pro registr okolí.


Podsluba 03H (vıznam bitu intenzita/blikání):

    Normálnì  je  7.  bit  bajtu  atributu  pouíván k indikaci blikajícího
popøedí  znakù.  Pomocí  této  podsluby  lze  zvolit  pouití 7. bitu jako
blikající popøedí textu (BL=1) nebo pro zvıšenou intenzitu podkladu (BL=0).



 I N T    1 0 H / 1 1 H (AH = 17) - generátor znakù (EGA)

    Sluba  umoòuje zmìnu fontù grafické karty EGA. Lze pøedefinovat fonty
nebo nadefinovat své vlastní fonty a to v textovıch i grafickıch módech.

    Vstup:    AH = 11H
              AL = podsluba
                   00H - naètení uivatelskıch fontù (textovı mód)
                             ES:BP = ukazatel na tabulku fontù
                             CX = poèet znakù
                             DX = offset tabulky znakù
                             BL = blok fontu (0-3)
                             BH = bajtù na znak

                   01H - naètení znakového fontu 8 x 14 (monochromní)
                             BL = blok fontu (0-3)

                   02H - naètení dvoubodového fontu 8 x 8 (textové módy)
                             BL = blok fontu (0-3)

                   03H - nastavení specifikovaného bloku (textové módy)
                             BL = bity 3, 2: vıbìr  bloku (0-3), kterı bude
                                             pouit  pøi  nastavení  bitu 3
                                             atributu na·1
                                  bity 1, 0: vıbìr  bloku (0-3), kterı bude
                                             pouit  pøi  nastavení  bitu 3
                                             atributu na 0

                   10H - naètení uivatelskıch textovıch fontù (text. módy)
                             ES:BP = ukazatel na tabulku fontù
                             CX = poèet znakù
                             DX = ofset tabulky znakù
                             BL = blok fontu (0-3)
                             BH = bajtù na znak

                   11H - naètení znakového fontu 8 x 14 (monochromní,text)
                             BL = blok fontu (0-3)

                   12H - naètení dvoubodového fontu 8 x 8 (textové módy)
                             BL = blok fontu (0-3)

                   20H - naètení uivatelskıch fontù znakù 8 x 8 (graf. m.)
                             ES:BP = ukazatel  na  uivatelskou tabulku pro
                                     grafické  znaky  128-255.  INT  1FH je
                                     nastaven na tento ukazatel.

                   21H - naètení uivatelskıch fontù znakù (grafické módy)
                             ES:BP = ukazatel  na  uivatelskou tabulku pro
                                     grafické znaky 0-255.
                             CX = bajtù na znak
                             BL = poèet øádkù znaku
                                  00H = DL obsahuje poèet øádkù (1 a 32)
                                  01H = 14 (0EH) øádkù
                                  02H = 25 (19H) øádkù
                                  03H = 43 (2BH) øádkù

                   22H - naètení znakovıch fontù ROM 8 x 14 (grafické módy)
                             BL = poèet øádkù (stejné jako podsluba 21H)

                   23H - naètení dvoubodovıch znakovıch fontù ROM 8 x 8
                             (grafické módy)
                             BL = poèet øádkù (stejné jako podsluba 21H)

                   30H - navrátí informace o nastavení fontù
                             BH = navrátí typ ukazatele fontù
                                  00H = souèasnı ukazatel je INT 1FH
                                  01H = souèasnı ukazatel je INT 44H
                                  02H = ukazatel fontu ROM 8 x 14
                                  03H = ukazatel dvoubodového fontu ROM 8x8
                                  04H = ukazatel   dvoubodového  fontu  ROM
                                        8·x·8 (vrchol)
                                  05H = ukazatel  na  alternativní ROM text
                                        9·x·14

    Vıstup:   (pouze podsluba 30H - návart informací o fontech)
              ES:BP = ukazatel na tabulku specifikovanou v BH
              CX = poèet linek na znak
              DL = poèet øádkù

Pozn.: Podsluby  00H,  01H  a 02H provádí nastavení módu, kompletnì mìnící
       video  nastavení avšak bez vymazání bufferu displeje (obrazovka není
       vymazána).

       Podsluby   10H,  11H  a  12H  jsou  stejné  jako  00H,  01H  a  02H
       s·následujícími odlišnostmi:
         - podsluby  10H,  11H  a  12H  se  zakládají na stránce 0 jako na
           aktivní stránce
         - poèet bajtù na znak je pøepoèítáván
         - poèet øádkù je pøepoèítáván
         - délka pøegenerovávaného bufferu je pøepoèítávána
         - je pøeprogramováno pìt øídících registrù kurzoru (CRTC)

       Podsluby  10H - 23H by mìly bıt vyvolávány vdy pouze bezprostøednì
       po nastavení videomódu

       Podsluba  03H (nastavení specifikace bloku) umoòuje zobrazení dvou
       nastavení  znakù  souèasnì,  kadé  z  1  bloku  256 znakù. Pokud je
       pouito  512-ti  znakové  zobrazení, je doporuèováno nastavení rovin
       barev  s 8 souhlasnımi barvami provedením sluby 10H / podsluba 00H
       (AX=1000H; nastavení paletovıch registrù) a nastavení BX = 0712H.

       Kadı  pøírustek  o 64K pamìti EGA umoòuje pouít další blok fontù.
       Souèasné  nastavení  dovoluje  pouít 1 blok fontù, rozšíøení pamìti
       EGA  na  256K  umoòuje  pouití  a  ètyø  blokù  fontù. Kadı blok
       obsahuje definici 256·znakù.

       Pokud   definujete  nastavení  znakù  v  grafickém  módu,  musí  bıt
       nahrazeno  plné nastavení všech 256 znakù (porovnejte s definicí pro
       nastavení  znakù  v  textovıch módech, kde mùe bıt naèten libovolnı
       poèet znakù - a po hranici 256 znakù na blok).

       Podsluba 21H naète definici 256 znakù. Videomódy 4, 5 a 6 pouívají
       pouze  prvních  128  znakù. Všechny ostatní módy pouívají všech 256
       znakù.



 I N T    1 0 H / 1 2 H (AH = 18) - alternativní nastavení (EGA)

    Navrací  informace  o EGA a umoòuje vıbìr alternativní rutiny pro tisk
obrazovky EGA.

    Vstup:    AH = 12H
              BL = podsluba:
                   10H - navrátí informace o EGA
                   20H - zvolí alternativní rutinu pro tisk obrazovky EGA

    Vıstup:   (pouze pro podslubu 10H):
              BH = mód displeje
                   00H - barevnı mód (adresovı rozsah 3DxH)
                   01H - monochromatickı mód (adresovı rozsah 3BxH)
              BL = pamì EGA
                   00H - 64K
                   01H - 128K
                   02H - 192K
                   03H - 256K
              CH = bity adaptéru
              CL = nastavení pøepínaèù

Pozn.: Hodnota  navrácená v CL (nastavení pøepínaèù) reprezentuje nastavení
       pøepínaèù DIL na kartì EGA. Bity adaptéru (CH) jsou definovány:

              bity adaptéru (CH):
            +------------------------+-----------------+
            | 7  6  5  4  3  2  1  0 |  vıznam         |
            +------------------------+-----------------+
            | *  *  *  *  .  .  .  . |  nepouito      |
            | .  .  .  .  *  *  .  . |  rezervováno    |
            | .  .  .  .  .  .  *  . |  FEAT1 (pin 17) |
            | .  .  .  .  .  .  .  * |  FEAT0 (pin 19) |
            +------------------------+-----------------+

       K  tisku  obsahu  obrazovky,  pokud  se  poèet  øádkù mìní, pouijte
       podslubu  20H  (nastavení  alternativního tisku obsahu obrazovky) k
       instalaci  rutiny  pro tisk obrazovky, která bude správnì pracovat i
       pøi zmìnách poètu øádkù.



 I N T    1 0 H / 1 3 H (AH = 19) - zápis øetìzce znakù (nìkteré poèítaèe)

    Zapíše  øetìzec  znakù  se specifikovanımi atributy na nìkterou stránku
displeje.

    Vstup:    AH = 13H
              AL = podsluba (0-3)
              BH = èíslo stránky displeje
              BL = atributy (podsluba 0 a 1)
              CX = délka øetìzce
              DH = øádek, na kterı bude øetìzec zapsán
              DL = pozice, na kterou bude øetìzec zapsán
              ES:BP = ukazatel na øetìzec k zápisu

    Vıstup:   ádnı

Pozn.: Tato  sluba  je  moná  pouze  pro  poèítaèe  XT  data  19.1.1986 a
       pozdìjší, AT, EGA a konvertabilní PC.

       Tato sluba má ètyøi podsluby:

         AL = 00H: Pøiøazení atributu v BL všem znakùm; neukládat kurzor
         AL = 01H: Pøiøazení atributu v BL všem znakùm; uloit kurzor
         AL = 02H: Jsou pouity atributy v øetìzci; kurzor není uloen
         AL = 03H: Jsou pouity atributy v øetìzci; kurzor je uloen

       V  podslubách 0 a 1 jsou všechny znaky øetìzce zapsány na obrazovku
       se stejnım atributem, kterı je specifikován v registru BL.

       V  podslubách  2  a  3  jsou bajty atributù uloeny pøímo v øetìzci
       samotném,  kadı  znak  je  následován  svım  atributem.  Øetìzec je
       zkopírován pøímo do videobufferu tak jak je.

       V  podslubách 0 a 2 není pozice kurzoru uloena po provedení zápisu
       øetìzce (kurzor zùstane na pùvodní pozici).

       V  podslubách  1 a 3 je kurzor pøesunut na první pozici následující
       za posledním znakem øetìzce.

       Podobnì  jako ve slubì 0EH reaguje sluba 13H na øídící znaky ASCII
       07H  (zvonek  - pípnutí), 08H (krok zpìt), 10H (posun o øádek) a 0DH
       (skok  na  zaèátek  øádku).  Všechny  ostatní znaky jsou zobrazeny v
       tisknutelném tvaru.



 I N T    1 0 H / 1 4 H (AH = 20) - ovladaè LCD (konvertabilní PC)

    Umoòuje  pouití  uivatelem  definovanıch fontù a mapování atributù s
vyšší  intenzitou  na odlišné atributy v displeji LCD. Tato sluba je moná
pouze pro konvertabilní PC.

    Vstup:    AH = 14H
              AL = podsluba
                   00H - naètení uivatelem specifikovanıch fontù
                        ES:DI = ukazatel na první font tabulky fontù
                        CX = poèet znakù k uloení (1 - 256)
                        DX = ofset znakù v bufferu fontù RAM
                        BL = ètenı blok fontù
                             00H - hlavní font (blok 0)
                             01H - alternativní font (blok 1)
                        BH = bajtù na znak (1 - 255)

                   01H - naètení systémového bloku fontù z ROM
                        BL = ètenı blok fontù
                             00H - hlavní font (blok 0)
                             01H - alternativní font (blok 1)

                   02H - mapování atributu zvıšeného jasu LCD
                        BL = schéma mapování
                             00H - ignorování atributu zvıšeného jasu
                             01H - mapování atributu na inverzní video
                             02H - mapování atributu na podtrení
                             03H - mapování atributu na alternativní font

    Vıstup:   ádnı



 I N T    1 0 H / 1 5 H (AH = 21) - navrácení fyzic. charakterist. displeje

    Sluba   navrací   typ   alternativního  adaptéru  displeje  a  tabulku
popisující  charakteristiku  souèasného displeje. Sluba je moná pouze pro
konvertabilní PC.

    Vstup:    AH = 15H

    Vıstup:   AX = typ alternativního adaptéru displeje
                   00H   - není alternativní adaptér
                   5140H - LCD
                   5153H - CGA displej
                   5151H - Monochromní typ displeje
              ES:DI = ukazatel ma 7-mi slovní tabulku adaptéru displeje

Pozn.: Formát tabulky adaptéru displeje:

         slovo 1 - èíslo modelu displeje
         slovo 2 - vertikální rozlišení na metr
         slovo 3 - horizontální rozlišení na metr
         slovo 4 - celkovı poèet bodù vertikálnì
         slovo 5 - celkovı poèet bodù horizontálnì
         slovo 6 - vıška bodu v mikrometrech (vertikální smìr)
         slovo 7 - šíøka bodu v mikrometrech (horizontální smìr)

       Tabulky adaptérù displeje pro konvertabilní PC:
    +-------+-------------+-----------+-----------+-------------------+
    | slovo | monochromní |    CGA    | LCD (EGA) | LCD (monochromní) |
    +-------+-------------+-----------+-----------+-------------------+
    |   1   |   5151H     |   5153H   |   5140H   |      5140H        |
    |   2   |     0       |   0498H   |   08E1H   |        0          |
    |   3   |     0       |   0A15H   |   0987H   |        0          |
    |   4   |     0       |   00C8H   |   00C8H   |        0          |
    |   5   |     0       |   0280H   |   0280H   |        0          |
    |   6   |     0       |   0352H   |   0172H   |        0          |
    |   7   |     0       |   0184H   |   0172H   |        0          |
    +-------+-------------+-----------+-----------+-------------------+

    Nutno poznamenat, e technická referenèní pøíruèka pro konvertabilní PC
nesprávnì  dokumentuje  slova  6  a  7  pro LCD a CGA. Správné hodnoty jsou
uvedeny vıše.



 I N T    1 1 H (INT 17; 0:0044H) - ètení tabulky vybavení

    Pøerušení  navrací vıpis instalovanıch zaøízení v systému. Informace je
navracena   v  registru  AX,  ostatní  registry  nejsou  ovlivnìny.  Vıznam
jednotlivıch bitù je uveden v následující tabulce:

         Kód vybavení (AX):
+----------------+-----------------+--------------------------------------+
|F E D C B A 9 8 | 7 6 5 4 3 2 1 0 |                vıznam                |
+----------------+-----------------+--------------------------------------+
|* * . . . . . . | . . . . . . . . | poèet nainstalovanıch tiskáren       |
|. . * . . . . . | . . . . . . . . | instalován vnitøní modem             |
|. . . * . . . . | . . . . . . . . | instalován herní adaptér (pro PCjr=1)|
|. . . . * * * . | . . . . . . . . | poèet sériovıch portù RS-232         |
|. . . . . . . * | . . . . . . . . | rezervováno                          |
|. . . . . . . . | * * . . . . . . | poèet disketovıch mechanik - 1       |
|. . . . . . . . | . . * * . . . . | inicializaèní videomód               |
|. . . . . . . . | . . . . * . . . | rezervováno                          |
|. . . . . . . . | . . . . . * . . | rezervováno                          |
|. . . . . . . . | . . . . . . * . | instalován matematickı koprocesor    |
|. . . . . . . . | . . . . . . . * | 1=diskety pøítomny; 0=není ádnı disk|
+----------------+-----------------+--------------------------------------+

                  Inicializaèní videomód (bity 4,5):
              +-------------+-------------------------+
              |   hodnota   |         vıznam          |
              +-------------+-------------------------+
              |     00      |  rezervováno            |
              |     01      |  40 x 25 barevnı        |
              |     10      |  80 x 25 barevnı        |
              |     11      |  80 x 25 monochromní    |
              +-------------+-------------------------+

Pozn.: Hodnota  navrácená  v AX je stejná jako hodnota uloená na pamìovém
       místì  0:0410H,  která  je  inicializována bìhem vnitøního testu pøi
       zapnutí poèítaèe.

       Pro  poèítaèe  IBM  PC,  XT  a  PCjr  jsou  bity  2 a 3 pouity jako
       informace o pamìti RAM instalované na systémové desce v násobcích po
       16KB. 00 znamená 16K, zatímco 11 znamená 64K.

       Bit  0  indikuje pouze to, zda má systém jednu nebo více disketovıch
       mechanik. V kladném pøípadì informují bity 6 a 7 o poètu mechanik (1
       a  4).  K  zjištìní  poètu  instalovanıch  pevnıch  diskù  pouijte
       pøerušení INT 13H, slubu 08H.

       Pokud  pøepínaèe  DIL  pro  PCjr a XT nejsou nastaveny správnì podle
       skuteènosti,  zda je pøítomen matematickı koprocesor, potom mùe bıt
       bit  1  nastaven  chybnì.  Lepší  test  na  pøítomnost matematického
       koprocesoru   je   pøímo  test  provedením  instrukce  matematického
       koprocesory a kontrola, zda byla instrukce provedena.



 I N T    1 2 H (INT 18; 0:0048H) - hlášení o velikosti pamìti

    Pøerušení  hlásí  poèet  souvislıch  1K  blokù  pamìti v systému (a po
640K).  Parametr  se  navrací  v  registru  AX,  ostatní registry zùstávají
neovlivnìny.

Pozn.: Tato sluba urèuje velikost pamìti buï podle nastavení pøepínaèù DIL
       na  systémové  desce  nebo  pouitím  hodnoty  uloené v pamìti CMOS
       (zálohované bateriemi) - podle typu poèítaèe.

       Hodnota  navrácená  v  AX je stejná jako hodnota uloená v pamìti na
       adrese    0:0413H,   která   je   inicializována   bìhem   vnitøního
       inicializaèního testu.

       Tato  hodnota  se  rovná volné pamìti pouitelné pro systém, nikoliv
       však pamìti volné pro uivatelské programy. Ke zjištìní volné pamìti
       pro uivatelské programy pouijte pøerušení INT 21H, funkce 48H.

       Ke  zjištìní  pamìti  nad adresovım rozsahem 1024K pouijte INT 15H,
       slubu 88H.

       Pokud  velikost pamìti uloená v pamìti CMOS zálohované baterií nebo
       podle  pøepínaèù  DIL  je vìtší ne aktuální velikost pamìti, pak je
       tímto pøerušením navrácena velikost aktuální pamìti.



 I N T    1 3 H (INT 19; 0:004CH) - diskové vstupnì/vıstupní operace

    Rutina pro obsluhu diskovıch operací je rozšíøena do více funkcí. Èíslo
poadované funkce je uloeno v registru AH.



         Sluby pøerušení  I N T  1 3 H :


Sluba:  00H (AH =  0) - reset pevného disku/disketového systému
         01H (AH =  1) - získání systémového stavu disku
         02H (AH =  2) - ètení sektorù do pamìti
         03H (AH =  3) - zápis sektorù z pamìti
         04H (AH =  4) - verifikace (kontrola zápisu) sektorù
         05H (AH =  5) - formátování stopy
         06H (AH =  6) - formátování stopy a oznaèení vadnıch sektorù
         07H (AH =  7) - formátování disku od zadané stopy
         08H (AH =  8) - získání aktuálních diskovıch parametrù
         09H (AH =  9) - inicializace tabulky pevného disku
         0AH (AH = 10) - dlouhé ètení
         0BH (AH = 11) - dlouhı zápis
         0CH (AH = 12) - pøístup na stopu
         0DH (AH = 13) - alternativní reset disku
         0EH (AH = 14) - rezervováno pro diagnostiku
         0FH (AH = 15) - rezervováno pro diagnostiku
         10H (AH = 16) - test na pøipravenost disku
         11H (AH = 17) - pøekalibrování diskového driveru
         12H (AH = 18) - rezervováno pro diagnostiku
         13H (AH = 19) - rezervováno pro diagnostiku
         14H (AH = 20) - rezervováno pro diagnostiku
         15H (AH = 21) - ètení typu DASD
         16H (AH = 22) - stav zmìny
         17H (AH = 23) - nastavení typu DASD pro formátování
         18H (AH = 24) - nastavení typu média pro formátování



 I N T    1 3 H / 0 0 H (AH = 0)  - reset pevného disku/disketového systému

    Funkce   resetuje   pevnı   disk  nebo  disketovou  mechaniku,  provede
rekalibraci ètecích/zápisovıch hlav.

    Vstup:    AH = 00H
              DL = èíslo disku (mechaniky)

    Vıstup:   AH = statut operace (viz sluba 01H)
              CF = nastaven pøi chybì, nulován v opaèném pøípadì

Pozn.: Pokud  je  DL  vìtší  nebo roven 80H, je resetován øadiè disketovıch
       mechanik  a  øadiè  pevného  disku.  Statut  navrácenı  v AH v tomto
       pøípadì  je  statut pevného disku. Statut øadièe disketové mechaniky
       lze obdret na adrese 0:0441H.

       Pokud je diskovımi rutinami BIOS hlášena chyba, pouijte tuto slubu
       k  resetování  øadièe  disketovıch  mechanik  a/nebo pevného disku a
       opaeraci opakujte znovu.

       Reset  pevného  disku  je  proveden  pouze  v  pøípadì, e hodnota v
       registru  DL je menší nebo rovna poslednímu pevnému disku v systému.
       To  znamená,  e  spodních  7 bitù reg. DL musí bıt menší nebo rovna
       poètu pevnıch diskù v systému.

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).  Také  disketové operace, které vyadují aby
       byl  motor  disketové  mechaniky  zapnut,  volají INT 15H/sluba 90H
       (zaøízení  zaneprázdnìno)  s  type  ekvivalentním  k·statutu  motoru
       disketové  mechaniky  (typ  =  FDH). To umoòuje systému pro zvıšení
       rychlosti  provádìt  další operace i pokud motor disketové mechaniky
       èeká.


 I N T    1 3 H / 0 1 H (AH = 1)  - získání systémového stavu disku

    Navrátí  stavové  informace  o  nejposlednìjších operacích pevného nebo
pruného disku.

    Vstup:    AH = 01H
              DL = èíslo disku

    Vıstup:   AH = statut operace
              CF = nastaven pøi chybì, v ostatních pøípadech nulován


                   Statut operací (AH):
      +------+---------------------------------------------------------+
      | AH   |      Vıznam                                             |
      +------+---------------------------------------------------------+
      | FFH  |   smysl operace chybnı                                  |
      | E0H  |   chyba stavu                                           |
      | CCH  |   chyba zápisu                                          |
      | BBH  |   nedefinovatelná chyba                                 |
      | AAH  |   disk není pøipraven                                   |
      | 80H  |   time-out                                              |
      | 40H  |   chyba vystavení                                       |
      | 20H  |   chyba øadièe                                          |
      | 11H  |   korekce chybnıch dat pomocí ECC                       |
      | 10H  |   chyba dat ECC (CRC)                                   |
      | 0FH  |   úroveò rozlišení DMA mimo rozsah                      |
      | 0EH  |   detekována adresová znaèka øídících dat               |
      | 0DH  |   neplatnı poèet sektorù ve formátu                     |
      | 0CH  |   typ média nenalezen                                   |
      | 0BH  |   nalezena vadná stopa                                  |
      | 0AH  |   detekováno vadné návìští sektoru                      |
      | 09H  |   pøístup k DMA pøekroèil hranici 64K                   |
      | 08H  |   pøeteèení DMA                                         |
      | 07H  |   chyba aktivity diskovıch parametrù                    |
      | 06H  |   vedení pro vımìnu diskety aktivní                     |
      | 05H  |   chyba resetování disku                                |
      | 04H  |   sektor nenalezen                                      |
      | 03H  |   pokus o zápis na disk chránìní proti zápisu           |
      | 02H  |   adresová znaèka nenalezena                            |
      | 01H  |   neplatnı povel                                        |
      | 00H  |   ádná chyba                                           |
      +------+---------------------------------------------------------+

Pozn.: Statut   nejposlednìjší  disketové  operace  lze  nalést  na  adrese
       0:0441H.  Statut  nejposlednìjší  operace pevného disku je na adrese
       0:0474H.

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).  Také  disketové operace, které vyadují aby
       byl  motor  disketové  mechaniky  zapnut,  volají INT 15H/sluba 90H
       (zaøízení  zaneprázdnìno)  s  type  ekvivalentním  k·statutu  motoru
       disketové  mechaniky  (typ  =  FDH). To umoòuje systému pro zvıšení
       rychlosti  provádìt  další operace i pokud motor disketové mechaniky
       èeká.



 I N T    1 3 H / 0 2 H (AH = 2)  - ètení sektorù do pamìti

    Vstup:    AH = 02H
              AL = poèet sektorù ke ètení
              CH = èíslo válce (10 bitová hodnota; horní 2 bity jsou v CL)
              CL = poèáteèní èíslo sektoru
              DH = èíslo hlavy
              DL = èíslo disku
              ES:BX = adresa bufferu pamìti

    Vıstup:   AH = statut operace (viz sluba 01H)
              AL = poèet pøeètenıch sektorù
              CF = nastaven pøi chybì, jinak vynulován

    Sluba ète specifikovanı poèet sektorù, poèínaje zadanou lokací (hlava,
válec, sektor), z disku do bufferu na adrese ES:BX.

Pozn.: Hodnota  v  DL  menší ne 80H specifikuje prunı disk; hodnota vìtší
       ne  80H  (nebo rovna) specifikuje pevnı disk. Napø. 0 znamená první
       disketovou mechaniku, zatímco 80H znamená první pevnı disk.

       Èíslo   válce   je  desetibitová  poloka  (0  a  1024).  Její  dva
       nejvıznamnìjší  bity  jsou  umístìny  v  bitech  7  a 6 registru CL;
       zbylıch  8  bitù je uloeno v registru CH. Èíslo poèáteèního sektoru
       je uloeno v niší èásti registru CL (niších 6 bitù).

       Hodnota  navrácená  v  AL  (poèet  pøeètenıch sektorù) nemusí udávat
       správnı poèet sektorù, aèkoliv nebyla nalezena ádná chyba. Pouijte
       k  urèení stavu operace vısledky navrácené v pøíznaky pøenosu CF a v
       registru AH (stavové návìští).

       Pro  diskety  musí  bıt  ètené sektory všechny ve stejném válci a na
       stejné  stranì  diskety  (tj.  jedna stopa), zatímco pevnı disk mùe
       èíst maximálnì 128 sektorù naráz.

       Pokud  se  bìhem  ètení  sektoru objeví chyba, pouijte slubu 00H k
       resetování disku a opakujte operaci. Je doporuèováno provést alespoò
       3 pokusy pøístupu døíve ne bude signalizována chyba.

       Z  dùvodu  architektury  kanálu  DMA  vznikne chyba, pokud sektorovı
       buffer  v pamìti pøesahuje pøes okraj stránek po 64K. Okraje stránek
       64K  jsou  pamìová  místa  s  adresami  10000H, 20000H, 30000H atd.
       Pøesvìdète  se,  zda neleí ani èást vašeho bufferu na tomto okraji.
       Pokud  se  tak stane, vytvoøte novı buffer nebo zaènìte ukládat data
       pouze za okrajem.

       Pokud  je  navrácena chyba 11H, jsou data správná, avšak BIOS hlásí,
       e byla data korigována s pouitím opravného algoritmu ECC. Chyba by
       se nemìla objevit znovu, pokud bude informace zapsána zpìt na disk.

       Tato  sluba se odlišuje od pøerušení DOS INT 25H (ètení absolutního
       sektoru)  tím,  e  DOS  INT 25H pracuje s logickımi zaøízeními (RAM
       disk,  drivery Bernoulli atd.). To je mnohem prunìjší. Také INT·25H
       pracuje  s  lineárním  adresováním, zatímco tato sluba pracuje se 3
       souøadnicemi k adresování diskové lokace. INT 25H nemá DMA problémy,
       o  kterıch bylo zmínìno vıše, a není omezení na poèet sektorù, které
       mohou bıt èteny jednou operací. Navíc ještì, INT 25H provádí všechny
       opakovací operace pøi chybì automaticky. INT 25H by mìlo bıt pouito
       namísto  této sluby k získání øízení absolutních sektorù. Programy,
       které  pouívají tuto slubu radìji ne INT 25H, jsou: manipulátor s
       partiemi disku, systémové programy (DOS) a servisní programy disku.

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).  Také  disketové operace, které vyadují aby
       byl  motor  disketové  mechaniky  zapnut,  volají INT 15H/sluba 90H
       (zaøízení  zaneprázdnìno)  s  type  ekvivalentním  k·statutu  motoru
       disketové  mechaniky  (typ  =  FDH). To umoòuje systému pro zvıšení
       rychlosti  provádìt  další operace i pokud motor disketové mechaniky
       èeká.



 I N T    1 3 H / 0 3 H (AH = 3)  - zápis sektorù z pamìti na disk

    Vstup:    AH = 03H
              AL = poèet sektorù k zápisu
              CH = èíslo válce (10 bitová hodnota; horní 2 bity jsou v CL)
              CL = poèáteèní èíslo sektoru
              DH = èíslo hlavy
              DL = èíslo disku
              ES:BX = adresa bufferu pamìti

    Vıstup:   AH = statut operace (viz sluba 01H)
              AL = poèet zapsanıch sektorù
              CF = nastaven pøi chybì, jinak vynulován

    Sluba  zapisuje  specifikovanı poèet sektorù z bufferu na adrese ES:BX
na disk, poèínaje zadanou lokací (hlava, válec, sektor).

Pozn.: Hodnota  v  DL  menší ne 80H specifikuje prunı disk; hodnota vìtší
       ne  80H  (nebo rovna) specifikuje pevnı disk. Napø. 0 znamená první
       disketovou mechaniku, zatímco 80H znamená první pevnı disk.

       Èíslo   válce   je  desetibitová  poloka  (0  a  1024).  Její  dva
       nejvıznamnìjší  bity  jsou  umístìny  v  bitech  7  a 6 registru CL;
       zbylıch  8  bitù je uloeno v registru CH. Èíslo poèáteèního sektoru
       je uloeno v niší èásti registru CL (niších 6 bitù).

       Hodnota  navrácená  v  AL  (poèet  zapsanıch  sektorù) nemusí udávat
       správnı poèet sektorù, aèkoliv nebyla nalezena ádná chyba. Pouijte
       k  urèení stavu operace vısledky navrácené v pøíznaky pøenosu CF a v
       registru AH (stavové návìští).

       Pro  diskety  musí bıt zapisované sektory všechny ve stejném válci a
       na stejné stranì diskety (tj. pouze jedna stopa), zatímco pevnı disk
       mùe zapsat maximálnì 128 sektorù naráz.

       Pokud  se  bìhem  zápisu  sektoru  objeví chyba, pouijte slubu 00H
       k·resetování  disku  a  opakujte  operaci.  Je  doporuèováno provést
       alespoò 3 pokusy pøístupu døíve ne bude signalizována chyba.

       Z  dùvodu  architektury  kanálu  DMA  vznikne chyba, pokud sektorovı
       buffer  v pamìti pøesahuje pøes okraj stránek po 64K. Okraje stránek
       64K  jsou  pamìová  místa  s  adresami  10000H, 20000H, 30000H atd.
       Pøesvìdète  se,  zda neleí ani èást vašeho bufferu na tomto okraji.
       Pokud  se  tak stane, vytvoøte novı buffer nebo zaènìte ukládat data
       pouze za okrajem.

       Tato  sluba se odlišuje od pøerušení DOS INT 26H (zápis absolutního
       sektoru)  tím,  e  DOS  INT 26H pracuje s logickımi zaøízeními (RAM
       disk,  drivery Bernoulli atd.). To je mnohem prunìjší. Také INT·26H
       pracuje  s  lineárním  adresováním, zatímco tato sluba pracuje se 3
       souøadnicemi k adresování diskové lokace. INT 26H nemá DMA problémy,
       o  kterıch bylo zmínìno vıše, a není omezení na poèet sektorù, které
       mohou  bıt  zapsány  jednou  operací.  Navíc  ještì, INT 26H provádí
       všechny opakovací operace pøi chybì automaticky. INT 26H by mìlo bıt
       pouito  namísto  této  sluby k získání øízení absolutních sektorù.
       Programy,  které  pouívají  tuto  slubu  radìji ne INT 26H, jsou:
       modifikace   partií  disku,  systémové  programy  (DOS)  a  servisní
       programy disku.

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).  Také  disketové operace, které vyadují aby
       byl  motor  disketové  mechaniky  zapnut,  volají INT 15H/sluba 90H
       (zaøízení  zaneprázdnìno)  s  type  ekvivalentním  k·statutu  motoru
       disketové  mechaniky  (typ  =  FDH). To umoòuje systému pro zvıšení
       rychlosti  provádìt  další operace i pokud motor disketové mechaniky
       èeká.



 I N T    1 3 H / 0 4 H (AH = 4)  - verifikace sektorù

    Vstup:    AH = 04H
              AL = poèet sektorù k verifikaci
              CH = èíslo válce (10 bitová hodnota; horní 2 bity jsou v CL)
              CL = poèáteèní èíslo sektoru
              DH = èíslo hlavy
              DL = èíslo disku
              ES:BX = adresa bufferu pamìti

    Vıstup:   AH = statut operace (viz sluba 01H)
              AL = poèet verifikovanıch sektorù
              CF = nastaven pøi chybì, jinak vynulován

    Sluba verifikuje (tj. provádí kontrolu èitelnosti) specifikovanı poèet
sektorù,  poèínaje  zadanou  lokací (hlava, válec, sektor) na disku. Proces
verifikace  spoèívá v tom, e je provádìna kontrola, zda lze sektory nalést
a  èíst  (kontrola  adresového pole) a zda je kontrola cyklickou redundancí
(CRC) správná. Pro tuto operaci není potøeba ádnı pamìovı prostor.

Pozn.: Hodnota  v  DL  menší ne 80H specifikuje prunı disk; hodnota vìtší
       ne  80H  (nebo rovna) specifikuje pevnı disk. Napø. 0 znamená první
       disketovou mechaniku, zatímco 80H znamená první pevnı disk.

       Èíslo   válce   je  desetibitová  poloka  (0  a  1024).  Její  dva
       nejvıznamnìjší  bity  jsou  umístìny  v  bitech  7  a 6 registru CL;
       zbylıch  8  bitù je uloeno v registru CH. Èíslo poèáteèního sektoru
       je uloeno v niší èásti registru CL (niších 6 bitù).

       Hodnota  navrácená v AL (poèet verifikovanıch sektorù) nemusí udávat
       správnı poèet sektorù, aèkoliv nebyla nalezena ádná chyba. Pouijte
       k  urèení stavu operace vısledky navrácené v pøíznaky pøenosu CF a v
       registru AH (stavové návìští).

       Pro diskety musí bıt verifikované sektory všechny ve stejném válci a
       na  stejné stranì diskety (tj. jedna stopa), zatímco pevnı disk mùe
       verifikovat maximálnì 255 sektorù naráz.

       Pokud  se bìhem verifikace sektoru objeví chyba, pouijte slubu 00H
       k  resetování  disku  a  opakujte  operaci.  Je doporuèováno provést
       alespoò 3 pokusy pøístupu døíve ne bude signalizována chyba.

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).  Také  disketové operace, které vyadují aby
       byl  motor  disketové  mechaniky  zapnut,  volají INT 15H/sluba 90H
       (zaøízení  zaneprázdnìno)  s  type  ekvivalentním  k·statutu  motoru
       disketové  mechaniky  (typ  =  FDH). To umoòuje systému pro zvıšení
       rychlosti  provádìt  další operace i pokud motor disketové mechaniky
       èeká.



 I N T    1 3 H / 0 5 H (AH = 5)  - formátování stopy

    Vstup:    AH = 05H
              AL = poèet sektorù k formátování (disketa) nebo vkládání (XT)
              CH = èíslo válce (10 bitová hodnota; horní 2 bity jsou v CL)
              CL = poèáteèní èíslo sektoru
              DH = èíslo hlavy
              DL = èíslo disku
              ES:BX = ukazatel na tabulku adresového pole

    Vıstup:   AH = statut operace (viz sluba 01H)
              CF = nastaven pøi chybì, jinak vynulován

    Sluba  inicializuje  (formátuje)  kadı  sektor na specifikované stopì
podle tabulky informací o adresách sektorù a jejich velikosti.

Pozn.: Hodnota  v  DL menší ne 80H specifikuje prunı disk; hodnota 80H a
       87H  specifikuje  pevnı  disk.  Napø.  0  znamená  první  disketovou
       mechaniku, zatímco 80H znamená první pevnı disk.

       Èíslo   válce   je  desetibitová  poloka  (0  a  1024).  Její  dva
       nejvıznamnìjší  bity  jsou  umístìny  v  bitech  7  a 6 registru CL;
       zbylıch  8  bitù je uloeno v registru CH. Èíslo poèáteèního sektoru
       je uloeno v niší èásti registru CL (niších 6 bitù).

       Pokud  se  bìhem  zápisu  sektoru  objeví chyba, pouijte slubu 00H
       k·resetování  disku  a  opakujte  operaci.

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).  Také  disketové operace, které vyadují aby
       byl  motor  disketové  mechaniky  zapnut,  volají INT 15H/sluba 90H
       (zaøízení  zaneprázdnìno)  s  type  ekvivalentním  k·statutu  motoru
       disketové  mechaniky  (typ  =  FDH). To umoòuje systému pro zvıšení
       rychlosti  provádìt  další operace i pokud motor disketové mechaniky
       èeká.

Vkládání: "Vkládání"  je  proces  ukládání  logicky  spojitıch  sektorù  na
          fyzicky  nespojité  lokace  v  poøadí  zvyšujícím prunost disku.
          Faktor  vkládání  specifikuje  poèet  sektorù, o kolik se posouvá
          ukazatel  pro  ukládání  logicky  spojitıch  sektorù.  Napø.  pøi
          faktoru  vkládání  =  3 je sektor s logickım èíslem 1 uloen jako
          první  fyzickı  sektor, sektor s logickım èíslem 2 je uloen jako
          ètvrtı  fyzickı sektor, sektor s logickım èíslem 3 je uloen jako
          sedmı  fyzickı sektor atd. Pokud je daná pozice fyzického sektoru
          ji  obsazena, pouije se nejbliší následující pozice. Níe jsou
          naèrtnuty rùzné cesty zmìny faktoru vkládání v závislosti na typu
          média (pevnı disk nebo disketa) a typu zaøízení.

          Ukazatel  na  vıpis  adresového pole (ES:BX) závisí na tom, kterı
          typ  disku (pevnı nebo diskety) je pro formátovací proces pouit.
          Té  je  faktor  vkládání  specifikován  odlišnì  pro  rùzné typy
          zaøízení  a  diskovıch  mechanik.  Níe  jsou uvedeny formáty pro
          rùzné typy zaøízení a diskù.

Diskety:  ES:BX  ukazuje  na  vıpis  adresovıch  znaèek pro kadı sektor na
          stopì,  která má bıt formátována. Kadá adresová znaèka se skládá
          ze  4 bajtù. Proto k formátování 9-sektorové stopy musí obsahovat
          vıpis 36 bajtù (4 * 9). 4 bajtové adrespvé znaèky jsou definovány
          následujícím zpùsobem:

              bajt 1 - èíslo válce (C)
              bajt 2 - èíslo hlavy (H)
              bajt 3 - èíslo sektoru nebo záznamu (R)
              bajt 4 - velikost sektoru (N)
                        0 - 128 bajtù na sektor
                        1 - 256 bajtù na sektor
                        2 - 512 bajtù na sektor
                        3 - 1024 bajtù na sektor

          Poznamenejme,  e  mùete mìnit faktor vkládání specifikací bajtu
          3·(èíslo sektoru) v nesekvenèním poøadí.

          Standardní  diskety  MS-DOS  jsou  naformátovány  s  512 bajty na
          sektor  (N=2)  a  bez  vkládání  (tj. sektory následují po sobì).
          Take vıpis adresového pole pro standardní devítisektorovou stopu
          MS-DOS by mìl vypadat podobnì jako tento:

              C H R N    C H R N    C H R N   . . . .   C H R N
              0 1 1 2    0 1 2 2    0 1 3 2             0 1 9 2

          Pøed  formátováním diskety, pokud je pro danou diskovou mechaniku
          podporován  více ne jeden typ diskety, budete potøebovat zavolat
          slubu  17H (nastavení typu DASD pro formátování) nebo slubu 18H
          (nastavení  typ  média pro formátování). Pokud tyto sluby nejsou
          volány,  sluba  05H  bude formátovat disk s pouitím maximálního
          èísla  typu  disku  podporovaného  pro  danou diskovou mechaniku.
          Starší  pøístroje, které nepodporovaly slubu 17H (nastavení typu
          DASD  pro  formátování)  ani slubu 18H (nastavení typu média pro
          formátování)   mají   tabulku   parametrù   disketového   driveru
          modifikovánu  direktivnì.  Ukazatel  na  tuto tabulku je nastaven
          pomocí  pøerušení  INT  1EH. Pokud jsou provedeny zmìny v tabulce
          diskovıch parametrù, zajistìte navrácení pùvodních hodnot tabulky
          parametrù.

XT:       Poèítaèe   XT  pouívající  registr  AL  ke  specifikaci  faktoru
          vkládání. Ukazatel ES:BX není pro poèítaèe XT potøebnı.

AT a XT-286: Tyto  pøístroje  pouívají  tabulku  adres  (ukazovanou pomocí
             ES:BX)  podobnou  tabulce  pouívané v disketovém módu avšak s
             nepatrnımi  odlišnostmi.  Buffer  musí  bıt  dlouhı 512 bajtù.
             Prvních  2*(poèet  sektorù  na stopu) bajtù obsahuje informace
             pro  kadı  sektor  na  stopì. Pro kadı sektor jsou v tabulce
             pøidìleny 2 bajty. Tyto 2 bajty jsou definovány následujícnì:

                   bajt 1 - stav formátovaného sektoru (F)
                             00H - dobrı sektor
                             80H - vadnı sektor
                   bajt 2 - èíslo sektoru (N)

             Napøíklad - následující tabulka je pouita k formátování stopy
             pro pevnı disk se 17 sektory na stopu a faktorem vkládání = 3:

         db   00H, 01H, 00H, 07H, 00H, 0DH, 00H, 02H, 00H, 08H, 00H, 0EH
         db   00H, 03H, 00H, 09H, 00H, 0FH, 00H, 04H, 00H, 0AH, 00H, 10H
         db   00H, 05H, 00H, 0BH, 00H, 11H, 00H, 06H, 00H, 0CH




 I N T    1 3 H / 0 6 H (AH = 6)  - formát. stopy, oznaèení vadnıch sektorù

    Vstup:    AH = 06H
              AL = hodnota faktoru vkládání (viz sluba 05H)
              CH = èíslo válce (10-bitová hodnota; vyšší 2 bity jsou v CL)
              DH = èíslo hlavy
              DL = èíslo mechaniky (bit 7 musí bıt nastaven)

    Vıstup:   AH = statut operace (viz sluba 01H)
              CF = nastaven pøi chybì, jinak vynulován

    Sluba  inicializuje kadı sektor na specifikovaném válci a se zadanımi
informacemi  o  velikosti a adresách sektorù. Té oznaèuje sektory na stopì
jako   nepouitelné   (vadné)   nastavením   návìští   vadnıch   sektorù  v
identifikaèním poli ID. Tuto slubu mohou pouívat pouze XT.

Pozn.: Tato sluba znièí všechen pùvodní obsah disku.

       Èíslo válce je 10-bitová hodnota (0 a 1023). Své nejvıznamnìjší dva
       bity  má umístìny v registru CL jako bity 7 a 6; ostatních 8 bitù je
       umístìno v registru CH.

       Pokud  se objeví chyba, pouijte slubu 00H k resetování mechaniky a
       opakujte operaci.




 I N T    1 3 H / 0 7 H (AH = 7)  - formátování disku od zadané stopy

    Vstup:    AH = 07H
              AL = hodnota faktoru vkládání (viz sluba 05H)
              CH = èíslo válce (10-bitová hodnota; vyšší 2 bity jsou v CL)
              DL = èíslo mechaniky (bit 7 musí bıt nastaven)

    Vıstup:   AH = statut operace (viz sluba 01H)
              CF = nastaven pøi chybì, jinak vynulován

    Sluba  inicializuje  kadı  sektor  na  specifikovaném válci a všechny
následující  válce  se zadanımi informacemi o velikosti a adresách sektorù.
Tuto slubu mohou pouívat pouze XT.

Pozn.: Tato sluba znièí všechen pùvodní obsah disku.

       Èíslo válce je 10-bitová hodnota (0 a 1023). Své nejvıznamnìjší dva
       bity  má umístìny v registru CL jako bity 7 a 6; ostatních 8 bitù je
       umístìno v registru CH.

       Pokud  se objeví chyba, pouijte slubu 00H k resetování mechaniky a
       opakujte operaci.



 I N T    1 3 H / 0 8 H (AH = 8)  - získání aktuálních diskovıch parametrù

    Vstup:    AH = 08H
              DL = èíslo disku

    Vıstup:   CH = maximální  hodnota pro válce (10-bitová hodnota; vyšší 2
                   bity jsou v CL)
              CL = maximální hodnota pro sektor
              DH = maximální hodnota pro hlavy

    Pro pevné disky:
              AH = statut operace (viz sluba 01H)
              DL = poèet pevnıch diskù
              CF = nastaven pøi chybì; jinak nulován

    Pro diskety:
              AX = 0
              BL = bity 7 a 4 = 0
                   bity 3 a 0 - platnı typ disku v CMOS (viz níe)
              BH = 0
              DL = poèet disket
              ES:DI = ukazatel  na  11-bitovou  tabulku parametrù disketové
                      mechaniky

Pozn.: Tato  sluba  je  pouitelná pro diskety na poèítaèích konvertabilní
       PC,  XT-286 a AT data pozdìjšího ne 10.1.84. Všechny tyto pøístroje
       podporují mód pevného disku pro tuto slubu.

       Hodnota  v  DL  menší ne 80H specifikuje prunı disk; hodnota vìtší
       ne  80H  (nebo rovna) specifikuje pevnı disk. Napø. 0 znamená první
       disketovou mechaniku, zatímco 80H znamená první pevnı disk.

       Èíslo   válce   je  desetibitová  poloka  (0  a  1024).  Její  dva
       nejvıznamnìjší  bity  jsou  umístìny  v  bitech  7  a 6 registru CL;
       zbylıch  8  bitù je uloeno v registru CH. Èíslo poèáteèního sektoru
       je uloeno v niší èásti registru CL (niších 6 bitù).

       Pokud  je  mechanikou  pevnı  disk  a  nastane  chyba, bude nastaven
       pøíznak  pøenosu  CF. Pokud je èíslo disku neplatné, bude registr AH
       roven 7. A pokud není pøítomen ádnı pevnı disk nebo není instalován
       adaptér øadièe pevného disku, bude registr AH roven 1.

       Pokud je mechanikou disketová jednotka a nastane chyba, potom:

          Pokud typ mechaniky je znám, ale 1) CMOS je neplatná, nepøítomná,
                                           2) baterie jsou znièeny,
                                           3) kontr. souèet CMOS neplatnı,
          potom  všechny  registry budou obsahovat platnou informaci, avšak
          registr BL bude roven 0.

          Pokud  typ  mechaniky  není  znám  nebo poadovaná mechanika není
          instalována,  potom  registry  BX,  CX, DH, ES a DI budou všechny
          nastaveny na 0. DL bude obsahovat poèet disketovıch mechanik.

       Platné typy disketovıch mechanik v CMOS:
           +-----------------+--------------------------------+
           |  BL (bity 3-0)  |             Vıznam             |
           +-----------------+--------------------------------+
           |       00H       |    neznámı typ mechaniky       |
           |       01H       |    360K, 5.25 palcù, 40 stop   |
           |       02H       |    1.2M, 5.25 palcù, 80 stop   |
           |       03H       |    720K, 3.5 palcù, 80 stop    |
           +-----------------+--------------------------------+

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).  Také  disketové operace, které vyadují aby
       byl  motor  disketové  mechaniky  zapnut,  volají INT 15H/sluba 90H
       (zaøízení  zaneprázdnìno)  s  type  ekvivalentním  k·statutu  motoru
       disketové  mechaniky  (typ  =  FDH). To umoòuje systému pro zvıšení
       rychlosti  provádìt  další operace i pokud motor disketové mechaniky
       èeká.



 I N T    1 3 H / 0 9 H (AH = 9)  - inicializace tabulky pevného disku

    Vstup:    AH = 09H
              DL = èíslo disku (bit 7 musí bıt nastaven)

    Vıstup:   AH = statut operace (viz sluba 01H)
              CF = nastaven pøi chybì; jinak nulován

    Sluba  09H  inicializuje  pevnı  disk  s  pouitím  tabulky parametrù.
Pøerušení  INT  41H nastaví ukazatel na tabulku parametrù pevného disku. Na
nìkterıch  zaøízeních  obsahuje  INT  46H tabulku parametrù druhého pevného
disku. Tyto tabulky jsou pouity touto slubou k inicializaci disku. Sluba
09H  zpùsobí  správné  pøizpùsobení  BIOS k parametrùm pevného disku, které
byly zmìnìny v tabulce parametrù pevného disku.

Pozn.: Chování   této   sluby  závisí  na  typu  zaøízení,  na  kterém  je
       provozována:

       XT:          Pokud je èíslo mechaniky platné èíslo (80H < DL < 87H),
                    pak  jsou  inicializovány  obì mechaniky 0 i 1. INT 41H
                    aktualizuje  ukazatel  na  ètyøi tabulky. Tabulka uitá
                    pro  èíslo  mechaniky je urèena nastavením pøepínaèù na
                    adaptéru  øadièe  pevného  disku. Pokud je inicializace
                    disku  0  chybná,  pokus  o  inicializaci  disku 1 není
                    proveden.

       AT a XT-286: Pokud  je  DL  80H,  je  inicializován  disk 0 jako pøi
                    INT·41H.  Pokud je DL 81H, je inicializován disk 1 jako
                    pøi INT·46H.

       Pokud  vznikne  pøi  operaci chyba, pouijte slubu 00H k resetování
       disku a opakujte operaci.

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).



 I N T    1 3 H / 0 A H (AH = 10) - dlouhé ètení

    Vstup:    AH = 0AH
              AL = poèet sektorù ke ètení (1-127)
              CH = èíslo válce (10 bitová hodnota; horní 2 bity jsou v CL)
              CL = poèáteèní èíslo sektoru
              DH = èíslo hlavy
              DL = èíslo disku (bit 7 musí bıt nastaven)
              ES:BX = adresa bufferu pamìti

    Vıstup:   AH = statut operace (viz sluba 01H)
              AL = poèet pøeètenıch sektorù
              CF = nastaven pøi chybì, jinak vynulován

    Sluba  ète jeden nebo více dlouhıch sektorù do pamìti z pevného disku.
Dlouhı sektor je sektor s informací plus 4 bajty reprezentující ECC kód pro
sektor. Tato sluba mùe bıt pouita pouze na pevnıch discích.


Pozn.: Tato  sluba  je urèena pouze pro diagnostiku. Další monosti povelù
       pro ètení sektoru - viz sluba 02H, která ète sektor pro obì diskety
       i  pevnı disk. Viz té pøerušení INT 25H (DOS), které dovoluje ètení
       absolutních sektorù z libovolného typu blokového zaøízení.

       Èíslo   válce   je  desetibitová  poloka  (0  a  1024).  Její  dva
       nejvıznamnìjší  bity  jsou  umístìny  v  bitech  7  a 6 registru CL;
       zbylıch  8  bitù je uloeno v registru CH. Èíslo poèáteèního sektoru
       je uloeno v niší èásti registru CL (niších 6 bitù).

       Hodnota  navrácená  v  AL  (poèet  pøeètenıch sektorù) nemusí udávat
       správnı poèet sektorù, aèkoliv nebyla nalezena ádná chyba. Pouijte
       k  urèení stavu operace vısledky navrácené v pøíznaky pøenosu CF a v
       registru AH (stavové návìští).

       Poèet sektorù ke ètení (AL) mùe bıt maximálnì 127.

       Pokud  se  bìhem  ètení  sektoru objeví chyba, pouijte slubu 00H k
       resetování disku a opakujte operaci. Je doporuèováno provést alespoò
       3 pokusy pøístupu døíve ne bude signalizována chyba.

       Z  dùvodu  architektury  kanálu  DMA  vznikne chyba, pokud sektorovı
       buffer  v pamìti pøesahuje pøes okraj stránek po 64K. Okraje stránek
       64K  jsou  pamìová  místa  s  adresami  10000H, 20000H, 30000H atd.
       Pøesvìdète  se,  zda neleí ani èást vašeho bufferu na tomto okraji.
       Pokud  se  tak stane, vytvoøte novı buffer nebo zaènìte ukládat data
       pouze za okrajem.

       Pokud  je  navrácena chyba 11H, jsou data správná, avšak BIOS hlásí,
       e byla data korigována s pouitím opravného algoritmu ECC. Chyba by
       se nemìla objevit znovu, pokud bude informace zapsána zpìt na disk.

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).



 I N T    1 3 H / 0 B H (AH = 11) - dlouhı zápis

    Vstup:    AH = 0BH
              AL = poèet sektorù k zápisu (1-127)
              CH = èíslo válce (10 bitová hodnota; horní 2 bity jsou v CL)
              CL = poèáteèní èíslo sektoru
              DH = èíslo hlavy
              DL = èíslo disku (bit 7 musí bıt nastaven)
              ES:BX = adresa bufferu pamìti

    Vıstup:   AH = statut operace (viz sluba 01H)
              AL = poèet zapsanıch sektorù
              CF = nastaven pøi chybì, jinak vynulován

    Sluba  zapisuje  jeden  nebo  více  dlouhıch sektorù z pamìti na pevnı
disk.  Dlouhı  sektor je sektor s informací plus 4 bajty reprezentující ECC
kód pro sektor. Tato sluba mùe bıt pouita pouze na pevnıch discích.


Pozn.: Tato  sluba  je urèena pouze pro diagnostiku. Další monosti povelù
       pro  zápis  sektoru  - viz sluba 03H, která zapisuje sektor pro obì
       diskety  i  pevnı  disk.  Viz  té  pøerušení  INT  26H (DOS), které
       dovoluje  zápis  absolutních  sektorù  na  libovolnı  typu blokového
       zaøízení.

       Èíslo   válce   je  desetibitová  poloka  (0  a  1024).  Její  dva
       nejvıznamnìjší  bity  jsou  umístìny  v  bitech  7  a 6 registru CL;
       zbylıch  8  bitù je uloeno v registru CH. Èíslo poèáteèního sektoru
       je uloeno v niší èásti registru CL (niších 6 bitù).

       Hodnota  navrácená  v  AL  (poèet  zapsanıch  sektorù) nemusí udávat
       správnı poèet sektorù, aèkoliv nebyla nalezena ádná chyba. Pouijte
       k  urèení stavu operace vısledky navrácené v pøíznaky pøenosu CF a v
       registru AH (stavové návìští).

       Poèet naráz zapsanıch sektorù (AL) mùe bıt maximálnì 127.

       Pokud  se  bìhem  zápisu  sektoru  objeví chyba, pouijte slubu 00H
       k·resetování  disku  a  opakujte  operaci.  Je  doporuèováno provést
       alespoò 3 pokusy pøístupu døíve ne bude signalizována chyba.

       Z  dùvodu  architektury  kanálu  DMA  vznikne chyba, pokud sektorovı
       buffer  v pamìti pøesahuje pøes okraj stránek po 64K. Okraje stránek
       64K  jsou  pamìová  místa  s  adresami  10000H, 20000H, 30000H atd.
       Pøesvìdète  se,  zda neleí ani èást vašeho bufferu na tomto okraji.
       Pokud  se  tak stane, vytvoøte novı buffer nebo zaènìte ukládat data
       pouze za okrajem.

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).



 I N T    1 3 H / 0 C H (AH = 12) - nastavení na válec

    Vstup:    AH = 0CH
              CH = èíslo válce (10 bitová hodnota; horní 2 bity jsou v CL)
              DH = èíslo hlavy
              DL = èíslo disku (bit 7 musí bıt nastaven)

    Vıstup:   AH = statut operace (viz sluba 01H)
              CF = nastaven pøi chybì, jinak vynulován

    Vystaví ètecí/zapisovací hlavy na specifikovanı válec. Tato sluba mùe
bıt pouita pouze pro pevné disky.

Pozn.: Èíslo   válce   je  desetibitová  poloka  (0  a  1024).  Její  dva
       nejvıznamnìjší  bity  jsou  umístìny  v  bitech  7  a 6 registru CL;
       zbylıch  8  bitù je uloeno v registru CH. Èíslo poèáteèního sektoru
       je uloeno v niší èásti registru CL (niších 6 bitù).

       Pokud  se  bìhem  zápisu  sektoru  objeví chyba, pouijte slubu 00H
       k·resetování  disku  a  opakujte  operaci.  Je  doporuèováno provést
       alespoò 3 pokusy pøístupu døíve ne bude signalizována chyba.

       Aèkoliv hodnota hlav není potøebná, musíte uvádìt povolenou hodnotu,
       jinak vystavení nebude provedeno a bude indikována chyba.

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).



 I N T    1 3 H / 0 D H (AH = 13) - alternativní reset disku

    Vstup:    AH = 0DH
              DL = èíslo disku (bit 7 musí bıt nastaven)

    Vıstup:   AH = statut operace (viz slubu 01H)
              CF = nastaven pøi chybì, jinak nulován

    Resetuje  øadiè  pevného disku a diskové mechaniky, zpùsobí rekalibraci
ètecích/zápisovıch  hlav.  Tato  sluba  mùe bıt provádìna pouze pro pevné
disky.

Pozn.: Viz sluba 00H - všeobecnìjší verze této sluby.

       Reset  pevného  disku  je proveden pouze pokud hodnota v DL je menší
       nebo rovna èíslu posledního pevného disku v systému. Tzn. e niších
       7  bitù  registru DL musí bıt menší nebo rovno poètu pevnıch diskù v
       systému.

       Pro poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).




 I N T    1 3 H / 0 E H (AH = 14) - rezervováno pro diagnost. (pevnı disk)


 I N T    1 3 H / 0 F H (AH = 15) - rezervováno pro diagnost. (pevnı disk)


 I N T    1 3 H / 1 0 H (AH = 16) - test na pøipravenost disku

    Vstup:    AH = 10H
              DL = èíslo disku (bit 7 musí bıt nastaven)

    Vıstup:   AH = statut operace (viz slubu 01H)
              CF = nastaven pøi chybì, jinak nulován

    Testuje, zda je pevnı dis pøipraven. Tato sluba mùe bıt pouita pouze
pro pevnı disk.

Pozn.: Pokud pevnı disk je pøipraven, potom je AH rovno 0 a pøíznak pøenosu
       CF je vynulován.

       Pro poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).



 I N T    1 3 H / 1 1 H (AH = 17) - pøekalibrování diskového driveru

    Vstup:    AH = 11H
              DL = èíslo disku (bit 7 musí bıt nastaven)

    Vıstup:   AH = statut operace (viz slubu 01H)
              CF = nastaven pøi chybì, jinak nulován

    Sluba  pøekalibruje  specifikovanı  pevnı  disk,  resetuje vystavovací
rychlost. Tato sluba mùe bıt provádìna pouze pro pevné disky.

Pozn.: Tato  sluba  je  volána slubami 00H (reset pevného disku/diskového
       systému)  i  0DH  (alternativní reset disku). Tak volání obou tìchto
       slueb bude mít stejné zakonèení jako volání sluby 11H.

       Sluba  vysílá  na  diskovı  øadiè  povel  pro REKALIBRACI, uvedením
       øadièe  do jeho pùvodního stavu a vystavením ètecích/zápisovıch hlav
       na stopu 0.

       Pokud   se  objeví  bìhem  operace  chyba,  pouijte  slubu  00H  k
       resetování disku a opakujte operaci.

       Pro poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).



 I N T    1 3 H / 1 2 H (AH = 18) - rezervováno pro diagnostiku


 I N T    1 3 H / 1 3 H (AH = 19) - rezervováno pro diagnostiku


 I N T    1 3 H / 1 4 H (AH = 20) - rezervováno pro diagnostiku


 I N T    1 3 H / 1 5 H (AH = 21) - ètení typu DASD

    Vstup:    AH = 15H
              DL = èíslo disku

    Vıstup:   CF = nastaven pøi chybì, jinak vynulován
              AH = typ disku
                   statut operace pøi chybì (viz sluba 01H)
              CX:DX = pokud  není chyba a AH <> 0, pak 4-bajtové celé èíslo
                      udávající poèet sektorù.

    Navrací typ interface spojenı s diskem a také poèet sektorù, které disk
obsahuje.  Mùe  bıt  pouit  k  urèení,  zda disketová mechanika podporuje
rozpoznávání vımìny diskety.

Pozn.: Tato sluba není povolena pro PC, PCjr a XT data pøed 10.1.1986.

       Sluba  umoòuje  urèit,  zda  disketová  mechanika podporuje slubu
       indikace  vımìny  diskety  (sluba  16H).  Indikace  vımìny  diskety
       informuje system, zda byla disketa vymìnìna od poslední operace s ní
       nebo ne.

       Pouijte slubu 17H (nastavení typu DASD) k nastavení typu.


              Typy disku:
        +-----------+------------------------------------------------+
        |     AH    |                     Vıznam                     |
        +-----------+------------------------------------------------+
        |     00H   |        disk nepøítomen                         |
        |     01H   |        disketa, není moná indikace vımìny     |
        |     02H   |        disketa, moná indikace vımìny          |
        |     03H   |        pevnı disk                              |
        +-----------+------------------------------------------------+

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).  Také  disketové operace, které vyadují aby
       byl  motor  disketové  mechaniky  zapnut,  volají INT 15H/sluba 90H
       (zaøízení  zaneprázdnìno)  s  type  ekvivalentním  k·statutu  motoru
       disketové  mechaniky  (typ  =  FDH). To umoòuje systému pro zvıšení
       rychlosti  provádìt  další operace i pokud motor disketové mechaniky
       èeká.


 I N T    1 3 H / 1 6 H (AH = 22) - stav indikace vımìny diskety

    Vstup:    AH = 16H
              DL = èíslo disku (bit 7 musí bıt vynulován)

    Vıstup:   AH = stav indikace vımìny diskety
              CF = nastaven pokud AH není roven 0; jinak vynulován

    Sluba  hlásí,  zda  byla  disketa  vymìnìna  nebo ne (dvíøka disketové
mechaniky  byla  otevøena) od poslední operace s disketou. Tato sluba mùe
bıt pouita pouze pro disketové mechaniky.

Pozn.: Tato sluba není povolena pro PC, PCjr a XT data pøed 10.1.1986.

       Pouijte  slubu  15H  k  urèení,  zda disketová mechanika podporuje
       detekci vımìny diskety.

       Pokud  je  pøíznak  pøenosu  CF  nastaven  a AH je 01H nebo 80H, pak
       nastala  chyba.  Pokud  je  AH  rovno  06H,  pøíznak pøenosu CF bude
       nastaven,  to  však  nesignalizuje  chybu;  znamená  to,  e  signál
       "Disketa vymìnìna" je aktivní.

         Vıznam indikace vımìny diskety:
         +--------+---------------------------------------------+
         |   AH   |              vıznam                         |
         +--------+---------------------------------------------+
         |   00H  |  signál "Disketa vymìnìna" není aktivní     |
         |   01H  |  CHYBA - neplatné parametry diskety         |
         |   06H  |  signál "Disketa vymìnìna" je aktivní       |
         |   80H  |  CHYBA - disketová mechanika nepøipravena   |
         +--------+---------------------------------------------+

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).  Také  disketové operace, které vyadují aby
       byl  motor  disketové  mechaniky  zapnut,  volají INT 15H/sluba 90H
       (zaøízení  zaneprázdnìno)  s  type  ekvivalentním  k·statutu  motoru
       disketové  mechaniky  (typ  =  FDH). To umoòuje systému pro zvıšení
       rychlosti  provádìt  další operace i pokud motor disketové mechaniky
       èeká.

 I N T    1 3 H / 1 7 H (AH = 23) - nastavení typu DASD pro formátování

    Vstup:    AH = 17H
              AL = kombinace disketa/mechanika
              DL = èíslo disku (bit 7 musí bıt vynulován)

    Vıstup:   CF = nastaven pøi chybì, jinak vynulován
              AH = statut operace (viz sluba 01H)

    Sluba  nastavuje typ disket pro jednotlivé typy disketovıch mechanik z
dùvodu  správného  naformátování disket. Tato sluba mùe bıt pouita pouze
pro diskety.

                   Kombinace disketa/mechanika:
        +------------+------------------------------------------+
        |     AL     |               vıznam                     |
        +------------+------------------------------------------+
        |     01H    |     disketa 320/360K v mechanice 360K    |
        |     02H    |     disketa 360K v mechanice 1.2M        |
        |     03H    |     disketa 1.2M v mechanice 1.2M        |
        |     04H    |     disketa 720K v mechanice 720K        |
        +------------+------------------------------------------+

Pozn.: Tato sluba není povolena pro PC, PCjr a XT data pøed 10.1.1986.

       Hodnota  kombinace  disketa/mechanika  04H  není  platná pro AT pøed
       10.6.1986.

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).  Také  disketové operace, které vyadují aby
       byl  motor  disketové  mechaniky  zapnut,  volají INT 15H/sluba 90H
       (zaøízení  zaneprázdnìno)  s  type  ekvivalentním  k·statutu  motoru
       disketové  mechaniky  (typ  =  FDH). To umoòuje systému pro zvıšení
       rychlosti  provádìt  další operace i pokud motor disketové mechaniky
       èeká.



 I N T    1 3 H / 1 8 H (AH = 24) - nastavení typu média pro formátování


    Vstup:    AH = 18H
              CH = poèet stop (10-bitová hodnota; vyšší 2 bity jsou v CL)
              CL = sektorù na stopu
              DL = èíslo disku (bit 7 musí bıt vynulován)

    Vıstup:   CF = nastaven pøi chybì, jinak vynulován
              AH = statut operace (viz sluba 01H)
              ES:DI = ukazatel  na  11-bitovou  tabulku parametrù disketové
                      mechaniky

    Tato  sluba  navrací ukazatel na tabulku parametrù disketové mechaniky
(DDPT)  pro  specifikovanou  disketovou  mechaniku.  Tato  sluba  mùe bıt
pouita pouze pro diskety.

Pozn.: Tato  sluba  není  povolena pro PC, PCjr a XT data pøed 10.1.1986 a
       pro AT data pøed 15.11.1985.

       Zaøízení, která podporují tuto slubu, ji volají pøed voláním sluby
       05H (formátování stopy).

       Pro kadı podporovanı typ média je jedna tabulka parametrù disketové
       mechaniky (DDPT).

       V pøípadì, e signál indikace vımìny diskety je aktivní (tj. disketa
       byla  vymìnìna)  nejdøíve  tato  sluba  deaktivuje  signál indikace
       vımìny  diskety  (øádnım  pøihlášením  nové  diskety).  Pokud  je to
       nemoné  udìlat,  sluba  navrací chybu. Takté pokud není disketa v
       mechanice, je navrácena chyba.

       Pro  poèítaèe  AT,  XT-286 a konvertabilní PC provádí BIOS pøerušení
       INT  15H/sluba 90H (zaøízení zaneprázdnìno) pro diskety (typ = 01H)
       a  pevné  disky  (typ  =  00H)  pøedtím  èekající  na  pøerušení. Po
       dokonèení   operace   je  provedeno  pøerušení  INT  15H/sluba  91H
       (pøerušení  dokonèeno).  Také  disketové operace, které vyadují aby
       byl  motor  disketové  mechaniky  zapnut,  volají INT 15H/sluba 90H
       (zaøízení  zaneprázdnìno)  s  type  ekvivalentním  k·statutu  motoru
       disketové  mechaniky  (typ  =  FDH). To umoòuje systému pro zvıšení
       rychlosti  provádìt  další operace i pokud motor disketové mechaniky
       èeká.




 I N T    1 4 H (INT 20; 0:0050H) - servis sériovıch komunikaèních portù


    Rutina  pro  obsluhu  sérivıch komunikaèních portù je rozšíøena do více
funkcí. Èíslo poadované funkce je uloeno v registru AH.


         Sluby pøerušení  I N T  1 4 H :


Sluba:  00H (AH = 0) - inicializace parametrù sériového portu
         01H (AH = 1) - vyslání jednoho znaku
         02H (AH = 2) - pøíjem jednoho znaku
         03H (AH = 3) - dotaz stavu sériového portu



 I N T   1 4 H / 0 0 H (AH = 00H) - inicializace sériového portu

    vstup:    AH = 00H
              AL = komunikaèní parametry
              DX = èíslo sériového portu (0 = COM1, 1 = COM2 atd.)

    vıstup:   AX = stav vedení a modemu (viz sluba 03H)

    Sluba inicializuje pøenosovou rychlost, paritu, stop-bit a délku slova
pro sériovı port. Navrací statut pro danı port.

                  Komunikaèní parametry (bity registru AL):
+-------------------------+---------------+------------+----------------+
| pøenos. rychlost (Baud) |    parita     |  stop-bit  |  délka slova   |
+---+---+---+             +---+---+       +---+        +---+---+        +
| 7 | 6 | 5 |             | 4 | 3 |       | 2 |        | 1 | 0 |        |
+---+---+---+-------------+---+---+-------+---+--------+---+---+--------+
| 0 | 0 | 0 |   110       | 0 | 0 | ádná | 0 | jeden  | 1 | 0 | 7 bitù |
| 0 | 0 | 1 |   150       | 0 | 1 | lichá | 1 | dva    | 1 | 1 | 8 bitù |
| 0 | 1 | 0 |   300       | 1 | 0 | ádná |   |        |   |   |        |
| 0 | 1 | 1 |   600       | 1 | 1 | sudá  |   |        |   |   |        |
| 1 | 0 | 0 | 1 200       |   |   |       |   |        |   |   |        |
| 1 | 0 | 1 | 2 400       |   |   |       |   |        |   |   |        |
| 1 | 1 | 0 | 4 800       |   |   |       |   |        |   |   |        |
| 1 | 1 | 1 | 9 600       |   |   |       |   |        |   |   |        |
+---+---+---+-------------+---+---+-------+---+--------+---+---+--------+



 I N T   1 4 H / 0 1 H (AH = 01H) - vyslání jednoho znaku

    vstup:    AH = 01H
              AL = znak k vyslání
              DX = èíslo sériového portu (0 = COM1, 1 = COM2 atd.)

    vıstup:   AX = stav vedení a modemu (viz sluba 03H)

    Sluba  vyšle  znak na specifikovanı sériovı port. Pokud nastane chyba,
bude  nastaven  bit  7  registru AH. Protoe je bit 7 pouit jako všeobecná
indikace  chyby, není tato sluba schopna identifikovat chybu time-out. Pro
kompletní diagnostické informace pouijte slubu 03H (dotaz stavu sériového
portu).



 I N T   1 4 H / 0 2 H (AH = 02H) - pøíjem jednoho znaku

    vstup:    AH = 02H
              DX = èíslo sériového portu (0 = COM1, 1 = COM2 atd.)

    vıstup:   AH = stav vedení a modemu (viz sluba 03H)
              AL = pøijatı znak

    Sluba  pøijme  jeden  znak  ze specifikovaného sériového portu. Sluba
èeká  na  znak.  Pokud  není  ádnı  znak pøijat nebo nastane chyba, nebude
navrácen  ádnı  znak  a  bit 7 registru AH bude nastaven. Protoe je bit 7
pouit   jako   všeobecná   indikace   chyby,   není  tato  sluba  schopna
identifikovat chybu time-out. Pro kompletní diagnostické informace pouijte
slubu 03H (dotaz stavu sériového portu).



 I N T   1 4 H / 0 3 H (AH = 03H) - dotaz na stav sériového portu

    vstup:    AH = 03H
              DX = èíslo sériového portu (0 = COM1, 1 = COM2 atd.)

    vıstup:   AX = stav vedení a modemu

    Sluba  navrací  informace  o  stavu  vedení a modemu pro specifikovanı
sériovı port.

    Vıznam stavovıch informací navrácenıch v registru AX:

    stav vedení (registr AH):
 +---+---+---+---+---+---+---+---+---------------------------------------+
 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |           vıznam                      |
 +---+---+---+---+---+---+---+---+---------------------------------------+
 | 1 | . | . | . | . | . | . | . | chyba time-out                        |
 | . | 1 | . | . | . | . | . | . | posuvnı pøenosovı registr prázdnı     |
 | . | . | 1 | . | . | . | . | . | pøídrnı pøenosovı registr prázdnı    |
 | . | . | . | 1 | . | . | . | . | chyba - detekováno pøerušení          |
 | . | . | . | . | 1 | . | . | . | chyba rámu dat                        |
 | . | . | . | . | . | 1 | . | . | chyba parity                          |
 | . | . | . | . | . | . | 1 | . | chyba pøekroèení                      |
 | . | . | . | . | . | . | . | 1 | data pøipravena                       |
 +---+---+---+---+---+---+---+---+---------------------------------------+

    stav modemu (registr AL):
 +---+---+---+---+---+---+---+---+---------------------------------------+
 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |           vıznam                      |
 +---+---+---+---+---+---+---+---+---------------------------------------+
 | 1 | . | . | . | . | . | . | . | detekován signál pøijímacího vedení   |
 | . | 1 | . | . | . | . | . | . | indikátor zvonku (zvuková signalizace)|
 | . | . | 1 | . | . | . | . | . | nastavení dat pøipraveno              |
 | . | . | . | 1 | . | . | . | . | vynulován k vysílání                  |
 | . | . | . | . | 1 | . | . | . | detekována zmìna signálu pøij. vedení |
 | . | . | . | . | . | 1 | . | . | detektor hrany zvukové signalizace    |
 | . | . | . | . | . | . | 1 | . | zmìna v nastavení dat                 |
 | . | . | . | . | . | . | . | 1 | zmìna vynulování k vysílání           |
 +---+---+---+---+---+---+---+---+---------------------------------------+

    Pokud je bit 7 stavového bajtu vedení (AH) nastaven, pak je zbytek bitù
v registrech AH a AL nepøedpovìditelnı.

Pozn.: Døívìjší  verze  ROM-BIOS  pro originální PC mìly programovou chybu,
       která  zpùsobovala,  e  chyby  "Time-out"  byly  hlášeny jako chyby
       "posuvnı  pøenosovı registr prázdnı" a chyba "detekováno pøerušení".
       To bylo ve všech následujících verzích ROM-BIOS korigováno.



 I N T    1 5 H (INT 21; 0:0054H) - rozšiøující a kazetové sluby

    Servis  kazetovıch  a  rozšíøujících slueb je rozšíøen do více funkcí.
Èíslo poadované funkce je uloeno v registru AH.


         Sluby pøerušení  I N T  1 5 H :


Sluba:  40H (AH =  64) - ètení/modifikace profilù
         41H (AH =  65) - èekání na vnìjší událost
         42H (AH =  66) - poadavek vypnutí napájení systému
         43H (AH =  67) - ètení stavu systému
         44H (AH =  68) - aktivace/deaktivace napájení modemu
         4FH (AH =  79) - podchycení klávesnice
         80H (AH = 128) - otevøení zaøízení
         81H (AH = 129) - uzavøení zaøízení
         82H (AH = 130) - ukonèení programu zaøízení
         83H (AH = 131) - událost èekání
         84H (AH = 132) - podpora joysticku
         85H (AH = 133) - stisknuta klávesa <Sys Rq>
         86H (AH = 134) - èekání
         87H (AH = 135) - pøesun bloku
         88H (AH = 136) - dotaz na velikost rozšiøující pamìti
         89H (AH = 137) - pøepnutí do ochranného módu
         90H (AH = 144) - zaøízení zaneprázdnìno
         91H (AH = 145) - pøerušení dokonèeno
         C0H (AH = 192) - návrat systémové konfigurace




 I N T    1 5 H / 4 0 H (AH =  64) - ètení/modifikace profilù

    vstup:    AH = 40H
              AL = podsluba
                   0 - ètení systémového profilu
                   1 - modifikace systémového profilu
                        CX = systémovı profil
                        BX = systémovı profil
                   2 - ètení profilu vnitøního modemu
                   3 - modifikace profilu vnitøního modemu
                        BX = profil vnitøního modemu

    vıstup:   CF = nastaven pøi chybì, jinak vynulován
              AL = 0 pøi úspìšné operaci, jinak nenulovı
              BX = modifikováno   pro  podsluby  0  (systémovı  profil)  a
                   2·(profil modemu)
              CX = modifikováno pro podslubu 0 (systémovı profil)

    Sluba  ète  nebo modifikuje parametry systému nebo modemu. Tato sluba
je moná pouze pro konvertabilní PC.

    formát BX - systémovı profil:
  +--------------+--------------------------------------------------------+
  | bit 15       | 0  - nastaven mód studeného startu systému             |
  |              | 1* - nastaven mód horkého staru systému                |
  +--------------+--------------------------------------------------------+
  | bit 14       | 0  - nemoné varovné hlášení nízkého napìtí baterií    |
  |              | 1* - moné varovné hlášení nízkého napìtí baterií      |
  +--------------+--------------------------------------------------------+
  | bity 13,12   | poèáteèní videomód                                     |
  |              |      00  - rezervováno                                 |
  |              |      01  - 40 x 25 monochromní s pouitím CGA/LCD      |
  |              |      10* - 80 x 25 monochromní s pouitím CGA/LCD      |
  |              |      11  - 80 x 25 monochromní s pouitím MONO/LCD     |
  +--------------+--------------------------------------------------------+
  | bity 11,10   | jasové atributy LCD                                    |
  |              |      00* - ignorovány jasové atributy LCD              |
  |              |      01  - jasovı atribut mapován jako podtrení       |
  |              |      10  - jasovı atribut mapován jako inverze         |
  |              |      11  - jasovı atribut mapován jako alternat. font  |
  +--------------+--------------------------------------------------------+
  | bit 9        | 0* - vnitøní modem není závislı na bateriovém napájení |
  |              | 1  - vnitøní modem závislı na bateriovém napájení      |
  +--------------+--------------------------------------------------------+
  | bit 8        | 0* - RS-232/paralelní interface nezávislı na bater. n. |
  |              | 1  - RS-232/paralelní interface závislı na bater. nap. |
  +--------------+--------------------------------------------------------+
  | bity 7-0 (BL)| rezervováno                                            |
  +--------------+--------------------------------------------------------+

    formát CX - systémovı profil:
  +----------------+------------------------------------------------------+
  | bity 15-8 (CH) |    èas ne bude LCD vymazán pøi nepouívání klávesn. |
  |                |    Èas je v minutách. 0 znemoòuje tuto funkci.      |
  +----------------+------------------------------------------------------+
  | bity 7-0 (CL)  |    èas pøed vypnutím systémového napájení pøi nepou- |
  |                |    ívání klávesnice. Èas je v minutách.             |
  |                |    0 znemoòuje tuto funkci.                         |
  +----------------+------------------------------------------------------+

    formát BX - profil modemu:
  +--------------+--------------------------------------------------------+
  | bity 15,14   | rezervováno                                            |
  +--------------+--------------------------------------------------------+
  | bit 13       | 0* - manuální odpovídaè                                |
  |              | 1  - automatickı odpovídaè                             |
  +--------------+--------------------------------------------------------+
  | bity 12-10   | parita a rám                                           |
  |              |      000  - znaèka, data 7 bitù                        |
  |              |      001  - mezera, data 7 bitù                        |
  |              |      010  - lichá, data 7 bitù                         |
  |              |      011* - sudá, data 7 bitù                          |
  |              |      100  - ádná, data 8 bitù                         |
  |              |      101  - rezervováno                                |
  |              |      110  - rezervováno                                |
  |              |      111  - rezervováno                                |
  +--------------+--------------------------------------------------------+
  | bity 9,8     | pøenosová rychlost dat modemu                          |
  |              |      00  - 110 bitù za sekundu                         |
  |              |      01  - 300 bitù za sekundu                         |
  |              |      10* - 1200 bitù za sekundu                        |
  |              |      11  - 2400 bitù za sekundu                        |
  +--------------+--------------------------------------------------------+
  | bity 7-0     | rezervováno                                            |
  +--------------+--------------------------------------------------------+

    * - signály jsou nastaveny po ztrátì napájení



 I N T    1 5 H / 4 1 H (AH =  65) - èekání na vnìjší událost

    vstup:    AH = 41H
              AL = kód typu události
              BH = podmínka porovnání nebo maskovací hodnota
              BL = time-out (v jednotkách 55 ms); 0 znamená ádnı time-out
              ES:DI = ukazatel na uivatelské bajty pro urèení událostí
                      (pokud je AL = 01H a 04H)
              DX = adresa  I/O portu pro urèení události (pokud je AL = 11H
                   a 14H)

    vıstup:   CF = nastaven  - nastala vnìjší událost
                   vynulován - time-out

    Sluba  èeká  na  specifikovanı stav zmìny po døívìjší vnìjší události.
Externí  událost  mùe  bıt  pøerušení nebo øadiè DMA. Pokud systém èeká na
specifikovanı stav, systémovı takt je zastaven z dùvodù šetøení bateriového
napájení. Tuto slubu lze pouít pouze pro konvertabilní PC.

    Kódy typù událostí (AL):
 +--------+------------------------------------------------------+
 |  00H   |   návrat, pokud nastane nìjaká událost               |
 |  01H   |   porovnání hodnoty; návrat pokud nastane shoda      |
 |  02H   |   porovnání hodnoty; návrat pokud nenastane shoda    |
 |  03H   |   test bitu; návrat pokud není 0                     |
 |  04H   |   test bitu; návrat pokud je 0                       |
 +--------+------------------------------------------------------+

    Kódy  typù  událostí 11H a 14H jsou stejné jako 01H a 04H vyjma toho,
e  urèující  událost  pøichází  z  I/O  portu  s  adresou  v  DX namísto z
uivatelského bajtu specifikovaného pomocí ES:DI.

    Pokud  je  typ  události  01H  a  02H  nebo  11H a 12H, potom je bajt
signalizující  urèující událost porovnáván opakovanì pomocí instrukce CMP s
registrem  BH.  Pokud  je typ události 03H a 04H nebo 13H a 14H, potom je
bajt  signalizující  urèující  událost  opakovanì testován pomocí instrukce
TEST s registrem BH.




 I N T    1 5 H / 4 2 H (AH =  66) - poadavek vypnutí napájení systému

    vstup:    AH = 42H
              AL = kód typu události
                   0 - pouít profil pro mód opìtného nastavení
                   1 - opìtovné nastavení nezávisí na profilu

    vıstup:   CF = nastaven pøi chybì, jinak nulován
              AH = modifikován

    Systém  je  odpojen  od  napájecího  napìtí. Kdy je pøíštì system opìt
zapnut  kontroluje,  zda se mùe navrátit na instrukci následující za tímto
voláním   pro   vypnutí   napájení.   Tuto  slubu  lze  pouít  pouze  pro
konvertabilní PC.

    Øízení  programu  je  navráceno pøímo, pokud tato sluba není povolena.
Pokud  je  provedení  operace  moné,  vypne se napájení poèítaèe. Pokud je
poèítaè  pøíštì  zapnut,  pak  v pøípadì, e byl kód události (AL) nastaven
na·1  nebo  profil  systému  (viz  sluba 40H) byl nastaven do módu horkého
startu,  odstartuje  poèítaè  ve stejném místì, ve kterém byl pøerušen (tj.
pokraèuje v programu, kterı vyvolal toto pøerušení).

Pozn.: Pøed vypnutím systému jsou také vypnuty motory disketovıch mechanik.




 I N T    1 5 H / 4 3 H (AH =  67) - ètení stavu systému

    vstup:    AH = 43H

    vıstup:   CF = nastaven pøi chybì, jinak vymazán
              AH = modifikován
              AL = statut

    Hlásí statut systému. Tato sluba je pouitelná pouze pro konvertabilní
PC.

    Statut (AL):
  +-----------------+---------------------------------------------------+
  | 7 6 5 4 3 2 1 0 |                   vıznam                          |
  +-----------------+---------------------------------------------------+
  | 1 . . . . . . . |   nízké napìtí baterií                            |
  | . 1 . . . . . . |   provoz na externí zdroj napìtí                  |
  | . . 1 . . . . . |   nastal vıpadek záloního napájecího napìtí      |
  | . . . 1 . . . . |   napájení aktivováno alarmem hodin reálného èasu |
  | . . . . 1 . . . |   vnitøní modem zapnut                            |
  | . . . . . 1 . . |   sériovı/paralelní interface zapnut              |
  | . . . . . . 1 . |   rezervováno                                     |
  | . . . . . . . 1 |   LCD nepøipojen                                  |
  +-----------------+---------------------------------------------------+

Pozn.: Pokud   nastal   vıpadek  záloního  napájecího  napìtí  (bit  5  je
       nastaven), pak jsou hodiny reálného èasu nastaveny nesprávnì.

       Viz  INT  1AH/sluba  08H  -  pouití alarmu hodin reálného èasu pøi
       zapnutém napájení.




 I N T    1 5 H / 4 4 H (AH =  68) - aktivace/deaktivace napájení modemu

    vstup:    AH = 44H
              AL = statut napájení modemu
                   00H - vypnutí napájecího napìtí vnitøního modemu
                   01H - zapnutí napájecího napìtí vnitøního modemu

    vıstup:   CF = nastaven pøi chybì, jinak vynulován
              AL = 0 pøi úspìšné operaci, jinak není nula

    Sluba  aktivuje nebo deaktivuje vnitøní modem konvertabilního PC. Tato
sluba je pouitelná pouze pro konvertabilní PC.

Pozn.: Pokud  je  vnitøní  modem  zapnut  (AL  =  01H), je inicializován na
       souèasné nastavení nalezené v profilu modemu. Viz slubu 40H - další
       informace o profilu modemu.



 I N T    1 5 H / 4 F H (AH =  79) - podchycení klávesnice

    vstup:    AH = 4FH
              AL = rozšiøující kód klávesy

    vıstup:   CF = vynulován pokud byl kód klávesy vymazán, jinak nastaven
              AL = novı  rozšiøující  kód  klávesy  pokud byl zmìnìn, jinak
                   pùvodní kód klávesy.

    Tato  sluba  je  volána  hardwarovım  ovladaèem klávesnice (INT 09H) a
dovoluje  nahradit  nebo  zrušit  kód  klávesy.  Rozšiøující kód klávesy je
orientaèní  èíslo klávesy na klávesnici. Tomuto orientaènímu èíslu pøisoudí
ovladaè ASCII hodnotu, kód øídící klávesy nebo øídící funkci.

    Pøi vstupu do této sluby obsahuje AL rozšiøující kód klávesy. Pokud si
uivatel  pøeje zmìnit kód klávesy, uloí do registru AL novı kód klávesy a
nastaví pøíznak pøenosu CF. Pokud je kód klávesy ponechán stejnı, pouze jej
ponechá  v  AL  a  nastaví  pøiznak  pøenosu CF. Uivatel mùe vymazat nebo
ignorovat klávesu vynulováním pøíznaku pøenosu CF pøi návratu ze sluby.

Pozn.: Tato  sluba  není moná pro poèítaèe PC, PCjr a XT data 8.11.1982 a
       AT data 10.1.1984.

       Zápisem   ovladaèe   této   sluby   mùew  uivatel  zmìnit  vıznam
       jednorlivıch   kláves.   Operaèní   systém  normálnì  bude  navracet
       rozšiøující kód klávesy nezmìnìn (tzn. ponechá registr AL beze zmìny
       a nastaví pøíznak pøenosu CF).

       K  urèení, zda zaøízení podporuje tuto funkci, viz sluba C0H (dotaz
       na systémovou konfiguraci).



 I N T    1 5 H / 8 0 H (AH = 128) - otevøení zaøízení

    vstup:    AH = 80H
              BX = identifikátor zaøízení
              CX = identifikátor procesu

    vıstup:   CF = nastaven, pokud sluba není podporována, jinak vynulován

    Sluba  zprostøedkovává  styk  k  otevøení  zaøízení  se specifikovanım
procesem.

Pozn.: Poèítaèe PC, PCjr a XT data 8.11.1982 nepodporují tuto slubu.

       Tato  sluba je podporována pro více-úlohové prostøedí, kde mùe bıt
       systémem  provozován  více  ne  jeden  proces  nebo  úloha. Obvykle
       operaèní systém zajišuje ovladaè pro tuto slubu; touto cestou mùe
       operaèní systém ponechat monost volby, které procesy jsou pouívány
       kadım zaøízením v·systému.

       Operaèní  systém pouívá tuto slubu k inicializaci pouití zaøízení
       procesem.




 I N T    1 5 H / 8 1 H (AH = 129) - uzavøení zaøízení

    vstup:    AH = 81H
              BX = identifikátor zaøízení
              CX = identifikátor procesu

    vıstup:   CF = nastaven, pokud sluba není podporována, jinak vynulován

    Sluba  zprostøedkovává  styk  k  uzavøení  zaøízení  se specifikovanım
procesem.

Pozn.: Poèítaèe PC, PCjr a XT data 8.11.1982 nepodporují tuto slubu.

       Tato  sluba je podporována pro více-úlohové prostøedí, kde mùe bıt
       systémem  provozován  více  ne  jeden  proces  nebo  úloha. Obvykle
       operaèní systém zajišuje ovladaè pro tuto slubu; touto cestou mùe
       operaèní systém ponechat monost volby, které procesy jsou pouívány
       kadım zaøízením v·systému.

       Operaèní  systém  pouívá tuto slubu k zastavení pouívání zaøízení
       procesem.




 I N T    1 5 H / 8 2 H (AH = 130) - ukonèení programu zaøízení

    vstup:    AH = 82H
              BX = identifikátor zaøízení

    vıstup:   CF = nastaven, pokud sluba není podporována, jinak vynulován

    Sluba  zprostøedkovává  styk  k  zastavení  pouívání  zaøízení  všemi
procesy bìnì pouívajících zaøízení.

Pozn.: Poèítaèe PC, PCjr a XT data 8.11.1982 nepodporují tuto slubu.

       Tato  sluba je podporována pro více-úlohové prostøedí, kde mùe bıt
       systémem  provozován  více  ne  jeden  proces  nebo  úloha. Obvykle
       operaèní systém zajišuje ovladaè pro tuto slubu; touto cestou mùe
       operaèní systém ponechat monost volby, které procesy jsou pouívány
       kadım zaøízením v·systému.

       Operaèní  systém  pouívá tuto slubu k zablokování pouití zaøízení
       všemi procesy bìnì pouívajících zaøízení.




 I N T    1 5 H / 8 3 H (AH = 131) - událost èekání

    vstup:    AH = 83H
              AL = podsluba
                   00H = nastavení intervalu
                   01H = zrušení nastaveného intervalu
              ES:BX = ukazatel na bajt kterı bude slouit jako indikátor
              CX:DX = mikrosekundy do indikace (dlouhé celé èíslo)

    vıstup:   CF = nastaven pokud sluba není podporována, jinak vynulován

    Sluba  modifikuje  bajt v uivatelské pamìti po specifikovaném èasovém
intervalu.  Øízení  je  pøedáno  zpìt  do  programu  ihned po vyvolání této
sluby.  Sluba  nepracuje  jako  prodleva  a potom návrat k uivateli, ale
navrací  øízení  okamitì;  uivatel musí periodicky testovat specifikovanı
bajt (ukazovanı pomocí ES:BX) k urèení, zda interval ji uplynul.

Pozn.: Poèítaèe  PC,  PCjr  a XT data 8.11.1982 nepodporují tuto slubu. AT
       data 10.1.1984 jsou schopny pouze nastavit interval, avšak hodnota v
       AL není pouita.

       Interval je indikován nastavením nejvyššího bitu (bit 7) indikaèního
       bajtu.  Pøesvìdète  se  proto  pøed  voláním  této  sluby,  zda  má
       indikaèní bajt vynulován nejvyšší bit.

       K èítání poètu mikrosekund jsou pouity hodiny reálného èasu.

       Rolišení jemnosti nastavení èasového intervalu je 976 mikrosekund.

       CX je slovo èítaèe vyšší v poøadí. Napøíklad, pokud je CX = 98H a DX
       = 9680H, potom je specifikována èasová prodleva 10 sekund.




 I N T    1 5 H / 8 4 H (AH = 132) - podpora joysticku

    vstup:    AH = 84H
              DX = podsluba
                   00H - ètení nastavení bìnıch pøepínaèù
                   01H - ètení odporovıch vstupù

    vıstup:   CF = nastaven pøi chybì, jinak vynulován
              pokud DX = 00H (ètení nastavení bìnıch pøepínaèù)
                        AL = bity 7 a 4 obsahují nastavení pøepínaèù
              pokud DX = 01H (ètení odporovıch vstupù)
                        AX = hodnota A(x)
                        BX = hodnota A(y)
                        CX = hodnota B(x)
                        DX = hodnota B(y)

    Sluba  ète  nastavení  bìnıch  pøepínaèù joysticku nebo hlásí hodnoty
odporovıch vstupù joysticku.

Pozn.: Tato sluba je moná pouze pro AT a XT pozdìjšího data ne 8.11.1982
       a XT-286.



 I N T    1 5 H / 8 5 H (AH = 133) - stisknuta klávesa <Sys Rq>

    vstup:    AH = 85H
              AL = podsluba
                   00H = klávesa systémového poadavku <Sys Rq> stlaèena
                   01H = klávesa systémového poadavku <Sys Rq> uvolnìna

    vıstup:   CF = nastaven pokud sluba není podporována, jinak vynulován

    Zprostøedkovává styk pro speciální procesy klávesy <Sys Rq>.

    Standardnì  tato  sluba  nemá  ádnı  úèinek,  pouze  vynuluje pøíznak
pøenosu  CF. Je umonìno operaènímu systému nebo uivateli vytvoøit obsluhu
k  procesu  klávesy  <Sys  Rq>.  Tato  sluba  je volána pøerušením INT 09H
(klávesnice) po stisknutí nebo uvolnìní klávesy <Sys Rq>.

Pozn.: Poèítaèe PC, PCjr a XT data 8.11.1982 nepodporují tuto slubu.

       Bìnì  není  ádné  standardní pouití klávesy systémového poadavku
       <Sys  Rq>. Vıhledovì je moné pouití operaèním systémem k pøepínání
       mezi úlohami.



 I N T    1 5 H / 8 6 H (AH = 134) - èekání

    vstup:    AH = 86H
              CX:DX = poèet mikrosekund prodlevy

    vıstup:   CF = nastaven pøi chybì nebo pokud je èekání provádìno, jinak
                   vynulován

    Sluba èeká na specifikovanı poèet mikrosekund, potom navrátí øízení do
programu, odkud byla vyvolána.

Pozn.: Tato sluba není moná pro poèítaèe PC, PCjr a XT.

       K èítání daného poètu mikrosekund jsou pouity hodiny reálného èasu.

       Jemnost rozlišení nastavení èasu je 976 mikrosekund.

       CX je slovo èítaèe vyšší v poøadí. Napøíklad, pokud je CX = 98H a DX
       = 9680H, potom je specifikována èasová prodleva 10 sekund.




 I N T    1 5 H / 8 7 H (AH = 135) - pøesun bloku

    vstup:    AH = 87H
              CX = velikost bloku k pøesunu ve slovech (max. 8000H = 32K)
              ES:SI = ukazatel na tabulku globálních popisovaèù (GDT)

    vıstup:   CF = nastaven pøi chybì, jinak vynulován
              ZF = vynulován pøi chybì, jinak nastaven
              AH = statut operace
                   00H = úspìšná operace
                   01H = chyba pariy pamìti
                   02H = vyskytla se chyba vyjímeèného pøerušení
                   03H = chyba hradlovací adresové linky 20H

    Umoòuje  programu v reálném módu pøesunout blok dat do nebo z prostoru
nad 1 Megabajt v chránìném módu.

Pozn.: Tato sluba je moná pouze pro poèítaèe AT a XT-286.

       ES:SI  ukazuje  na  vıpis  6  popisovaèù.  Kadı popisovaè je dlouhı
       8·bajtù. Popisovaè je formátován následujícím zpùsobem:

          +-----------+-------+---------------------------------------+
          |   offset  | bajtù |                popis                  |
          +-----------+-------+---------------------------------------+
          |    00H    |   2   |    slovo obsahující omezení segmentu  |
          |    02H    |   2   |    niší slovo 24-bitové adresy       |
          |    04H    |   1   |    vyšší bajt 24-bitové adresy        |
          |    05H    |   1   |    bajt pøístupovıch práv             |
          |    06H    |   2   |    rezervováno (musí bıt 0)           |
          +-----------+-------+---------------------------------------+

       Jednotlivé  popisovaèe  jsou  definovány  podle  následující tabulky
       (jsou v pamìti umístìny ve stejném poøadí):

          +-----------+-------+---------------------------------------+
          |   offset  | bajtù |             popis                     |
          +-----------+-------+---------------------------------------+
          |    00H    |   8   | prázdnı popisovaè - inicializován     |
          |           |       |   uivatelem na 0                     |
          |    08H    |   8   | popisovaè tabulky GDT - inicializován |
          |           |       |   uivatelem na 0, modifikován BIOSem |
          |    10H    |   8   | popisovaè zdrojového bloku -          |
          |           |       |   - inicializován uivatelem          |
          |    18H    |   8   | popisovaè pøíjmového bloku -          |
          |           |       |   - inicializován uivatelem          |
          |    20H    |   8   | popisovaè programového segmentu       |
          |           |       |   chránìného módu - inicializován     |
          |           |       |   uivatelem na 0, modifikován BIOSem |
          |    28H    |   8   | popisovaè zásobníkového segmentu      |
          |           |       |   chránìného módu - inicializován     |
          |           |       |   uivatelem na 0, modifikován BIOSem |
          +-----------+-------+---------------------------------------+

       Proto,  pro  pøesun  bloku  kterı  je  poadován, musí pouze tøetí a
       ètvrtı  popisovaè  obsahovat  hodnotu jinou ne 0. Pole zdrojového a
       pøíjmového   popisovaèe  by  mìlo  bıt  inicializováno  následujícím
       zpùsobem:

       *  Pole   omezení  segmentu  (offset  00H)  musí  obsahovat  hondotu
          2*(CX-1) nebo vìtší.

       *  Pole  24-bitové  adresy  musí  obsahovat  zdrojovou  nebo cílovou
          adresu.

       *  Bajt  pøístupovıch  práv  (offset 05H) musí obsahovat hodnotu 93H
          (CPL0-R/W).

       Pøenos  dlouhého  bloku  dat  mùe mít za následek ztrátu pøerušení,
       nebo bìhem pøesunu není povoleno ádné pøerušení.




 I N T    1 5 H / 8 8 H (AH = 136) - dotaz na velikost rozšiøující pamìti

    vstup:    AH = 88H

    vıstup:   CF = nastaven pøi chybì, jinak vynulován
              AX = poèet 1KB blokù nad 1024KB.

Pozn.: Tato sluba je moná pouze pro poèítaèe AT a XT-286.

       Velikost pamìti navrácená touto slubou je uloena v bateriích CMOS.
       Tato hodnota je urèena a nastavena pøi zapnutí poèítaèe.

       Aby  byla pouitelná pamì nad rozsah 1024K, musí bıt základní pamì
       (pamì  na systémové desce) plnì pøístupná. Pamì nad rozsahem 1024K
       je èasto nazıvána "rozšíøená" pamì ("extended" memory).




 I N T    1 5 H / 8 9 H (AH = 137) - pøepnutí do ochranného módu

    vstup:    AH = 89H
              BH = index  v  tabulce  popisovaèù  pøerušení (IDT) - poèátek
                   první osmice hardwarovıch pøerušení (úroveò pøerušení 1)
              BL = index  v  tabulce  popisovaèù  pøerušení (IDT) - poèátek
                   druhé osmice hardwarovıch pøerušení (úroveò pøerušení 1)
              ES:SI = ukazatel na tabulku globálních popisovaèù (GDT)

    vıstup:   AH = 0 pøi úspìchu operace, jinak nenulovı obsah

    znièené registry:   AX, BP a všechny segmentové registry

    Sluba  pøepne  do  ochranného  módu (virtuální adresování). Také pøedá
øízení na segment programu v ochranném módu specifikovanı uivatelem.

Pozn.: Tato sluba je moná pouze pro poèítaèe AT a XT-286.

       ES:SI  ukazuje na tabulku osmi popisovaèù. Kadı popisovaè je dlouhı
       8 bajtù. Popisovaèe jsou naformátovány podle následující tabulky:

          +-----------+-------+---------------------------------------+
          |   offset  | bajtù |                popis                  |
          +-----------+-------+---------------------------------------+
          |    00H    |   2   |    slovo obsahující omezení segmentu  |
          |    02H    |   2   |    niší slovo 24-bitové adresy       |
          |    04H    |   1   |    vyšší bajt 24-bitové adresy        |
          |    05H    |   1   |    bajt pøístupovıch práv             |
          |    06H    |   2   |    rezervováno (musí bıt 0)           |
          +-----------+-------+---------------------------------------+

       Jednotlivé  popisovaèe  jsou  definovány  podle  následující tabulky
       (jsou v pamìti umístìny ve stejném poøadí):

          +-----------+-------+---------------------------------------+
          |   offset  | bajtù |             popis                     |
          +-----------+-------+---------------------------------------+
          |    00H    |   8   | prázdnı popisovaè - inicializován     |
          |           |       |   uivatelem na 0                     |
          |    08H    |   8   | popisovaè tabulky GDT - inicializován |
          |           |       |   uivatelem                          |
          |    10H    |   8   | popisovaè tabulky popisovaèù pøerušení|
          |           |       |   - inicializován uivatelem          |
          |    18H    |   8   | popisovaè datového segmentu           |
          |           |       |   - inicializován uivatelem          |
          |    20H    |   8   | popisovaè zvláštního segmentu         |
          |           |       |   - inicializován uivatelem          |
          |    28H    |   8   | popisovaè zásobníkového segmentu      |
          |           |       |   - inicializován uivatelem          |
          |    30H    |   8   | popisovaè segmentu programu           |
          |           |       |   - inicializován uivatelem          |
          |    38H    |   8   | popisovaè program. segm. podpùr.BIOS  |
          |           |       |   - inicializován uivatelem na 0     |
          +-----------+-------+---------------------------------------+

       Šest  popisovaèù, které musí bıt inicializovány uivatelem, musí mít
       inicializovány  omezení segmentu, bázovou adresu a bajt pøístupovıch
       práv.

       BIOS  není pøístupnı uivateli; take uivatel musí pouívat všechny
       vstupnì/vıstupní porty.

       Uivatel musí inicializovat obsluné programy a tabulky.

       Mezi  tabulkou  popisovaèù  pøerušení  (IDT)  a  tabulkou popisovaèù
       pøerušení (IDT) v reálném módu nemùe bıt pouit ádnı pøekryv.

       Z dùvodù rezervovanıch prostorù 80286 musí uivatel pøesunout lokace
       vektoru pøerušení.

       Reinicializaci  øadièù  hardwarovıch  pøerušení  je  nutno provést v
       poøadí,   v   jakém   jsou  definovány  lokace  které  neexistují  v
       rezervovaném prostoru 80286.




 I N T    1 5 H / 9 0 H (AH = 144) - zaøízení zaneprázdnìno

    vstup:    AH = 90H
              AL = typ zaøízení

    vıstup:   CF = 0 - èekání není vyhovìno
                   1 - bylo vyhovìno minimálnímu èasu èekání

    Tato  sluba  je volána za úèelem oznámení systému, e zaøízení èeká na
obsluhu.

Pozn.: Tato sluba není moná pro poèítaèe PC, PCjr a XT data 8.11.1982.

       Typy  zaøízení  jsou  roztøídìny  do  tøí  všeobecnıch  skupin. Tyto
skupiny jsou:

    00H - 7FH      sériovì opakovanì pouitelné zaøízení
    80H - BFH      opakovanì  vyvolatelné  zaøízení.  ES:BX  je pouito pro
                   odlišná volání
    C0H - FFH      zaøízení mající time-out pouze pokud není adresováno

    Definované typy zaøízení:
 +---------------------+--------------------------------------+----------+
 |  typ zaøízení (AL)  |              zaøízení                | time-out |
 +---------------------+--------------------------------------+----------+
 |       00H           |   pevnı disk                         |   ano    |
 |       01H           |   disketa                            |   ano    |
 |       02H           |   klávesnice                         |   ne     |
 |       03H           |   zaøízení adresované ukazatelem     |   ano    |
 |       80H           |   síové zaøízení                    |   ne     |
 |                     |     (ES:BX ukazatel na øídící blok   |          |
 |                     |      pro práci v síti)               |          |
 |       FDH           |   start motoru disketové mechaniky   |   ano    |
 |       FEH           |   tiskárna                           |   ano    |
 +---------------------+--------------------------------------+----------+

    Pokud proces vyaduje pouití zaøízení, avšak pøístup na nì je opodìn,
potom  systém  mùe  pro dosaení maximální vıkonnosti provádìt další úlohu
dokud  zaøízení není uvolnìno k pouití procesem. Ve víceúlohovém prostøedí
je  toto  cílem této sluby. Operaèní systém mùe ponechávat cesty urèující
kterı  proces  èeká  na  které zaøízení a zatímco je zaøízení zaneprázdnìno
vyvolává další úlohu. Viz slubu 91H - sluba signalizující, e zaøízení je
pøipraveno pro proces.




 I N T    1 5 H / 9 1 H (AH = 145) - pøerušení dokonèeno

    vstup:    AH = 91H
              AL = typ zaøízení (viz slubu 90H)

    vıstup:   CF = nastaven pøi chybì, jinak vynulován

    Sluba signalizuje systému, e zaøízení je pøipraveno k obslouení.

Pozn.: Tato sluba není moná u poèítaèù PC, PCjr a XT data 8.11.1982.

       Pokud  proces  vyaduje  pouití  zaøízení,  avšak  pøístup na nì je
       opodìn,   potom  systém  mùe  pro  dosaení  maximální  vıkonnosti
       provádìt   další  úlohu  dokud  zaøízení  není  uvolnìno  k  pouití
       procesem.  Ve  víceúlohovém  prostøedí  je  toto  cílem této sluby.
       Operaèní  systém mùe ponechávat cesty urèující kterı proces èeká na
       které  zaøízení  a  zatímco je zaøízení zaneprázdnìno vyvolává další
       úlohu.  Viz  slubu  91H  -  sluba  signalizující,  e  zaøízení je
       pøipraveno pro proces.

       Napøíklad,  INT  09H  (pøerušení  klávesnicí)  vyvolá tuto slubu po
       stisku  klávesy  k  signalizaci  operaènímu systému, e klávesa byla
       stisknuta.  Avšak  pokud  systém vykonával jinou úlohu zatímco první
       proces  èekal na znak z klávesnice, pak první proces pøevezme øízení
       a pøevezme zadanı znak z klávesnice.




 I N T    1 5 H / C 0 H (AH = 192) - návrat systémové konfigurace

    vstup:    AH = C0H

    vıstup:   CF = nastaven pøi chybì, jinak vynulován
              AH = 0
              ES:BX = ukazatel na tabulku systémovıch popisovaèù

    Sluba  podává  hlášení o èíslu modelu stroje, èíslu podmodelu, revizní
úrovni BIOS a jiné hardwarovì-specifické atributy.

              Tabulka systémovıch popisovaèù:
       +-------------------------------+-----------------+-----------+
       |          popisovaè            |  délka (bajtù)  | hodnota   |
       +-------------------------------+-----------------+-----------+
       |   délka tabulky               |        1        |    8      |
       |   èíslo systémového modelu    |        1        |    ?      |
       |   èíslo sub-modelu            |        1        |    ?      |
       |   revizní úroveò BIOS         |        1        |    ?      |
       |   rozšiøující informace       |        1        |    ?      |
       |   rezervováno                 |        4        |    0      |
       +-------------------------------+-----------------+-----------+

              Rozšiøující informace:
      +------------------+-------------------------------------------+
      |  7 6 5 4 3 2 1 0 |           vıznam bitu                     |
      +------------------+-------------------------------------------+
      |  x . . . . . . . |  pevnı disk BIOS pouívá kanál 3 DMA      |
      |  . x . . . . . . |  pøítomen druhı èip pøerušení             |
      |  . . x . . . . . |  pøítomny hodiny reálného èasu            |
      |  . . . x . . . . |  v INT 09H je voláno zachycení klávesnice |
      |  . . . . x . . . |  podporován WAIT pro externí události     |
      |  . . . . . x . . |  rezervováno                              |
      |  . . . . . . x . |  rezervováno                              |
      |  . . . . . . . x |  rezervováno                              |
      +------------------+-------------------------------------------+

Pozn.: Tato  sluba  není moná pro poèítaèe PC, PCjr a XT data 8.11.1982 a
       AT data 10.1.1984. Pouijte navrácenı stav registru AH k urèení, zda
       sluba navrací platnou informaci.

       Poèítaèe  XT  data  10.1.1986  mají  chybu  ve  svıch  rozšiøujících
       informací.  Nesprávnì  informují, e druhı èip pøerušení je pøítomen
       (bit  6 je nastaven) a e pevnı disk nepouívá kanál 3 DMA (bit 7 je
       vynulován).  Oba  tyto  údaje  jsou  nesprávné.  Tyto  podmínky  lze
       otastovat tak, e pokud èíslo modelu je FBH a revizní úroveò BIOS je
       1,  potom  pøedpokládejte, e pevnı disk BIOS pouívá 3. kanál DMA a
       e druhı èip pøerušení není pøítomen.

       Programy  pouívající  3. kanál DMA musí také brát v úvahu, e tento
       kanál  mohou pouívat i jiné adaptéry, jako je napø. adaptér IBM pro
       práci  v  síti,  jeho  pøítomnost se neodráí v bajtu rozšiøujících
       informací.

       Viz  pøerušení  INT 15H/sluba 4FH, kde lze získat další informace o
       zachycování  klávesnice  (bit 4 bajtu rozšiøujících informací) a viz
       té pøerušení INT 09H tıkající se hardwarového pøerušení klávesnicí.

       Viz  pøerušení INT 15H/sluba 41H, kde jsou další informace o èekání
       na vnìjší událost (bit 3 bajtu rozšiøujících informací).

       Viz té identifikátor systémového modelu - adresa F000:FFFEH.



 I N T    1 6 H (INT 22; 0:0058H) - obsluha vstupu z klávesnice

    Servis  obsluhy  vstupu  z klávesnice je rozšíøen do více funkcí. Èíslo
poadované funkce je uloeno v registru AH.


         Sluby pøerušení  I N T   1 6 H :


Sluba:  00H (AH =  0) - ètení z klávesnice
         01H (AH =  1) - stav klávesnice
         02H (AH =  2) - dotaz na stav pøesmykaèù
         03H (AH =  3) - nastavení rychlosti generování znaku
         04H (AH =  4) - pøizpùsobení signalizace klávesnice
         05H (AH =  5) - zápis znaku do bufferu klávesnice
         10H (AH = 16) - ètení rozšíøeného kódu znaku z klávesnice
         11H (AH = 17) - rozšiøující stav klávesnice
         12H (AH = 18) - dotaz na rozšiøující stav pøesmykaèù



 I N T    1 6 H / 0 0 H (AH =  0) - ètení z klávesnice

    vstup:    AH = 00H

    vıstup:   AL = ASCII kód znaku
              AH = rozšiøující kód znaku

    Sluba  navrací  znak  z  bufferu  klávesnice;  pokud  není  v  bufferu
pøipraven ádnı znak, sluba èeká a znak pøijde.

Pozn.: Rozšiøující  kódy  kláves jsou èísla reprezentující umístìní klávesy
       na  klávesnici.  Pokud  jsou  na  klávesnici pøidány další klávesy a
       vzhled   klávesnice   je  pøemìnìn,  nové  schéma  èíslování  nemusí
       souhlasit s pùvodním.

       Pokud  je  znak  speciálním  znakem (speciální klávesy), potom je AL
       roven 0 a v AH je uloena hodnota rozšiøujícího kód klávesy.

       Pouijte rozšiøující kódy kláves k rozlišení kláves reprezentujících
       stejnı ASCII kód, jako napø. klávesa plus v horní èásti klávesnice a
       šedá klávesa plus v numerickém poli.

       Test,  zda je v bufferu klávesnice pøipraven nìjakı znak, se provádí
       porovnáním  hodnot  ukazatelù  pro  zápis  znaku  do bufferu (adresa
       0:041CH)  a  pro  ètení  z  bufferu  (adresa 0:041AH). Pokud jsou si
       rovny, není v bufferu pøipraven ádnı znak.

       Po  vyjmutí  znaku  z  bufferu  klávesnice  je  ukazatel pro ètení z
       bufferu  klávesnice  (na  adrese  0:041AH) zvıšen o 2. Pokud ukazuje
       tento  ukazatel  za  konec  bufferu  klávesnice,  nastaví se zpìt na
       zaèátek bufferu.

       Pokud  není  pøipraven  ádnı  znak z klávesnice, potom AT, XT-286 a
       konvertabilní  PC  vyvolají  pøerušení  INT 15H/slubu 90H (zaøízení
       zaneprázdnìno)  pro  klávesnici.  Tím  informují operaèní systém, e
       nastala èekací smyèka pro vstup z klávesnice a e je tedy moné, aby
       operaèní systém zatím obslouil jinou úlohu.

       Po  stisku  kterékoliv klávesy vyvolávají AT, XT-286 a konvertabilní
       PC  pøerušení  INT 15H/slubu 91H (pøerušení ukonèeno). To umoòuje,
       aby se operaèní systém pøepnul zpìt do úlohy, která èekala na zadání
       znaku z klávesnice.

       Viz  slubu  10H,  která  je  prakticky  ekvivalentní  této  slube,
       umoòuje   však  èíst  kódy  kláves  rozšíøené  klávesnice  (101/102
       kláves).



 I N T    1 6 H / 0 1 H (AH =  1) - stav klávesnice

    vstup:    AH = 01H

    vıstup:   ZF = 0 pokud je znak pøipraven
                   1 pokud znak není pøipraven
              AL = kód ASCII znaku (pokud je znak pøipraven)
              AH = rozšiøující kód znaku (pokud je znak pøipraven)

    Sluba kontroluje, zda je v bufferu pøipraven znak.

Pozn.: Pokud  je v bufferu pøipraven znak, je vynulován pøíznak nuly ZF a v
       registru  AX  je uloen kód znaku (v AL je ASCII kód znaku a v AH je
       rozšiøující kód znaku). Znak však není vyjímán z bufferu klávesnice.
       Pouijte  slubu  00H  k vyjmutí znaku z bufferu klávesnice. Viz té
       slubu 00H, kde je popsán vıznam registru AX pokud je znak platnı.

       Tato  sluba  je vhodná k pouití pro vymazání klávesnice a umonìní
       pøerušení programu specifikovanou posloupností kláves.

       Viz   slubu   11H  -  ekvivalentní  sluba  podporující  rozšíøenou
       klávesnici (101/102 kláves).




 I N T    1 6 H / 0 2 H (AH =  2) - dotaz na stav pøesmykaèù

    vstup:    AH = 02H

    vıstup:   AL = stav pøesmykaèù

    Navrací stav bìnıch pøesmykaèù klávesnice.

         stav pøesmykaèù (AL):
    +-------------------+-------------------------------+
    |  7 6 5 4 3 2 1 0  |         vıznam                |
    +-------------------+-------------------------------+
    |  1 . . . . . . .  | <Insert> zapnut               |
    |  . 1 . . . . . .  | <Casp Lock> zapnut            |
    |  . . 1 . . . . .  | <Num Lock> zapnut             |
    |  . . . 1 . . . .  | <Scroll Lock> zapnut          |
    |  . . . . 1 . . .  | klávesa <Alt> stisknuta       |
    |  . . . . . 1 . .  | klávesa <Ctrl> stisknuta      |
    |  . . . . . . 1 .  | levı <Shift> stisknut         |
    |  . . . . . . . 1  | pravı <Shift> stisknut        |
    +-------------------+-------------------------------+

Pozn.: Stavovı  bajt pøesmykaèù je moné obdret z bajtu na adrese v pamìti
       0:0417H.

       Viz slubu 12H k obdrení stavu pøesmykaèù pro rozšíøenou klávesnici
       (101/102 kláves).




 I N T    1 6 H / 0 3 H (AH =  3) - nastavení rychlosti generování znaku

    vstup:    AH = 03H
              AL = podsluba
                        0 - uvedení klávesnice do normálního stavu
                        1 - zvıšení inicializaèní prodlevy
                        2 - zpomalení rychlosti generování znaku o 1/2
                        3 - provedení podslueb 1 a 2
                        4 - vypnutí generovanıch znakù
                        5 - nastavení rychlosti a prodlevy generování znakù
                             BL - rychlost generování znakù
                             BH - hodnota prodlevy

    vıstup:   ádnı

    Nastavuje rychlost a prodlevu pro generování znakù klávesnice

    Rychlosti generování znakù ve znacích za sekundu (BL):
+---------+-------------+---------+-------------+---------+-------------+
|   BL    |  rychlost   |   BL    |  rychlost   |   BL    |  rychlost   |
+---------+-------------+---------+-------------+---------+-------------+
|   00H   |    30.0     |   0BH   |   10.9      |   16H   |    4.3      |
|   01H   |    26.7     |   0CH   |   10.0      |   17H   |    4.0      |
|   02H   |    24.0     |   0DH   |    9.2      |   18H   |    3.7      |
|   03H   |    21.8     |   0EH   |    8.6      |   19H   |    3.3      |
|   04H   |    20.0     |   0FH   |    8.0      |   1AH   |    3.0      |
|   05H   |    18.5     |   10H   |    7.5      |   1BH   |    2.7      |
|   06H   |    17.1     |   11H   |    6.7      |   1CH   |    2.5      |
|   07H   |    16.0     |   12H   |    6.0      |   1DH   |    2.3      |
|   08H   |    15.0     |   13H   |    5.5      |   1EH   |    2.1      |
|   09H   |    13.3     |   14H   |    5.0      |   1FH   |    2.0      |
|   0AH   |    12.0     |   15H   |    4.6      |         |             |
+---------+-------------+---------+-------------+---------+-------------+

    Prodlevy po stisku klávesy v milisekundách (BH):
              +--------+-----------------+
              |   BH   |     prodleva    |
              +--------+-----------------+
              |    0   |       250 ms    |
              |    1   |       500 ms    |
              |    2   |       750 ms    |
              |    3   |      1000 ms    |
              +--------+-----------------+

Pozn.: Podsluby  0 a 4 jsou moné pouze pro poèítaèe PCjr. Podsluba 5 je
       moná  pouze  pro  poèítaèe  AT  data  15.11.1985 a pozdìjšího a pro
       XT-286.

       Podsluba   0  (uvedení  klávesnice  do  normálního  stavu)  navrací
       klávesnici  do  jejího  pùvodního  stavu,  tj. do stavu, kterı je po
       zapnutí   napájení   poèítaèe  (normální  inicializaèní  prodleva  a
       normální rychlost generování znakù).

       Podsluba  1  (zvıšení inicializaèní prodlevy) zvyšuje prodlevu mezi
       prvním  znakem  po  stisku  klávesy  a  opakovanımi znaky pøi drení
       klávesy.

       Pro  podsluby 0 a 4 - pokadé, kdy je zmìnìna rychlost generování
       znaku,  jsou  pøedešlé stavy zrušeny. Napøíklad, pokud chcete zvıšit
       inicializaèní prodlevu a zpomalit rychlost opakování znaku, pouijte
       slubu 3 (provedení podslueb 1 a 2) radìji ne podslubu 1 (zvıšení
       inicializaèòi prodlevy) samotnou.





 I N T    1 6 H / 0 4 H (AH =  4) - pøizpùsobení signalizace klávesnice

    vstup:    AH = 04H
              AL = 0 - vypnutí akustické signalizace stisku klávesy
                   1 - zapnutí akustické signalizace stisku klávesy

    vıstup:   ádnı

    Sluba  zapne  nebo  vypne  akustickou signalizaci stisku klávesy. Tato
sluba je moná pouze pro poèítaèe PCjr a konvertabilní PC.




 I N T    1 6 H / 0 5 H (AH =  5) - zápis znaku do bufferu klávesnice

    vstup:    AH = 05H
              CH = rozšiøující kód klávesy
              CL = ASCII kód znaku

    vıstup:   AL = 00H - operace probìhla úspìšnì
                   01H - buffer klávesnice je plnı

    Sluba  uloí kód klávesy (kombinace rozšiøujícího kódu klávesy a ASCII
kódu znaku) do bufferu klávesnice.

Pozn.: Tato  sluba  je  moná  pouze  pro  poèítaèe  AT  data 15.11.1985 a
       pozdìjšího a pro XT-286.

       Program  je touto slubou "uveden do omylu", e kód klávesy pøišel z
       klávesnice.  Dobrı  pøíklad  tohoto  by  mohly  bıt operace potøebné
       programem, které jsou implementovány jako klávesová makra.



 I N T    1 6 H / 1 0 H (AH = 16) - ètení rozšíøeného kódu klávesnice

    vstup:    AH = 10H

    vıstup:   AL = ASCII kód znaku
              AH = rozšiøující kód znaku

    Sluba  navrací  znak  z  bufferu  klávesnice;  pokud  není  v  bufferu
pøipraven  ádnı znak, sluba èeká a znak pøijde. Tato sluba je pouívána
k podpoøe rozšíøené klávesnice (101/102 kláves).

Pozn.: Tato  sluba je podporována pouze na poèítaèích AT data 15.11.1985 a
       pozdìjšího,   poèítaèích   PC  XT  data  10.1.1986  a  pozdìjšího  a
       poèítaèích XT-286.

       Rozšiøující  kódy  kláves jsou èísla reprezentující umístìní klávesy
       na  klávesnici.  Pokud  jsou  na  klávesnici pøidány další klávesy a
       vzhled   klávesnice   je  pøemìnìn,  nové  schéma  èíslování  nemusí
       souhlasit s pùvodním.

       Pokud  je  znak  speciálním  znakem (speciální klávesy), potom je AL
       roven 0 a v AH je uloena hodnota rozšiøujícího kód klávesy.

       Pouijte rozšiøující kódy kláves k rozlišení kláves reprezentujících
       stejnı ASCII kód, jako napø. klávesa plus v horní èásti klávesnice a
       šedá klávesa plus v numerickém poli.

       Test,  zda je v bufferu klávesnice pøipraven nìjakı znak, se provádí
       porovnáním  hodnot  ukazatelù  pro  zápis  znaku  do bufferu (adresa
       0:041CH)  a  pro  ètení  z  bufferu  (adresa 0:041AH). Pokud jsou si
       rovny, není v bufferu pøipraven ádnı znak.

       Po  vyjmutí  znaku  z  bufferu  klávesnice  je  ukazatel pro ètení z
       bufferu  klávesnice  (na  adrese  0:041AH) zvıšen o 2. Pokud ukazuje
       tento  ukazatel  za  konec  bufferu  klávesnice,  nastaví se zpìt na
       zaèátek bufferu.

       Pokud  není  pøipraven  ádnı  znak z klávesnice, potom AT, XT-286 a
       konvertabilní  PC  vyvolají  pøerušení  INT 15H/slubu 90H (zaøízení
       zaneprázdnìno)  pro  klávesnici.  Tím  informují operaèní systém, e
       nastala èekací smyèka pro vstup z klávesnice a e je tedy moné, aby
       operaèní systém zatím obslouil jinou úlohu.

       Po  stisku  kterékoliv klávesy vyvolávají AT, XT-286 a konvertabilní
       PC  pøerušení  INT 15H/slubu 91H (pøerušení ukonèeno). To umoòuje,
       aby se operaèní systém pøepnul zpìt do úlohy, která èekala na zadání
       znaku z klávesnice.

       Viz  slubu  02H,  která  je  prakticky  ekvivalentní  této  slubì,
       nepodporuje  však  nové  klávesy  na  rozšíøené  klávesnici (101/102
       kláves).




 I N T    1 6 H / 1 1 H (AH = 17) - rozšiøující statut klávesnice

    vstup:    AH = 11H

    vıstup:   ZF = 0 pokud je znak pøipraven
                   1 pokud znak není pøipraven
              AL = kód ASCII znaku (pokud je znak pøipraven)
              AH = rozšiøující kód znaku (pokud je znak pøipraven)

    Sluba  kontroluje,  zda  je  v  bufferu pøipraven znak. Tato sluba je
provádìna k podpoøe rozšíøené klávesnice (101/102 kláves).

Pozn.: Tato  sluba je podporována pouze na poèítaèích AT data 15.11.1985 a
       pozdìjšího,   poèítaèích   PC  XT  data  10.1.1986  a  pozdìjšího  a
       poèítaèích XT-286.

       Pokud  je v bufferu pøipraven znak, je vynulován pøíznak nuly ZF a v
       registru  AX  je uloen kód znaku (v AL je ASCII kód znaku a v AH je
       rozšiøující kód znaku). Znak však není vyjímán z bufferu klávesnice.
       Pouijte  slubu  10H  k vyjmutí znaku z bufferu klávesnice. Viz té
       slubu 10H, kde je popsán vıznam registru AX pokud je znak platnı.

       Tato  sluba  je vhodná k pouití pro vymazání klávesnice a umonìní
       pøerušení programu specifikovanou posloupností kláves.

       Viz  slubu  02H,  která  je  prakticky  ekvivalentní  této  slubì,
       nepodporuje  však  nové  klávesy  na  rozšíøené  klávesnici (101/102
       kláves).




 I N T    1 6 H / 1 2 H (AH = 18) - dotaz na rozšiøující stav pøesmykaèù

    vstup:    AH = 12H

    vıstup:   AL = stav pøesmykaèù
              AH = rozšiøující stav pøesmykaèù

    Navrací  stav  bìnıch  pøesmykaèù  klávesnice.  Tato  sluba podporuje
rozšíøenou klávesnici (101/102 kláves).

         stav pøesmykaèù (AL):
    +-------------------+-------------------------------+
    |  7 6 5 4 3 2 1 0  |         vıznam                |
    +-------------------+-------------------------------+
    |  1 . . . . . . .  | <Insert> zapnut               |
    |  . 1 . . . . . .  | <Casp Lock> zapnut            |
    |  . . 1 . . . . .  | <Num Lock> zapnut             |
    |  . . . 1 . . . .  | <Scroll Lock> zapnut          |
    |  . . . . 1 . . .  | klávesa <Alt> stisknuta       |
    |  . . . . . 1 . .  | klávesa <Ctrl> stisknuta      |
    |  . . . . . . 1 .  | levı <Shift> stisknut         |
    |  . . . . . . . 1  | pravı <Shift> stisknut        |
    +-------------------+-------------------------------+

         rozšiøující stav pøesmykaèù (AH):
    +-------------------+-------------------------------+
    |  7 6 5 4 3 2 1 0  |         vıznam                |
    +-------------------+-------------------------------+
    |  1 . . . . . . .  | klávesa <Sys Rq> stisknuta    |
    |  . 1 . . . . . .  | klávesa <Caps Lock> stisknuta |
    |  . . 1 . . . . .  | klávesa <Num Lock> stisknuta  |
    |  . . . 1 . . . .  | kláv. <Scroll Lock> stisknuta |
    |  . . . . 1 . . .  | pravá klávesa <Alt> stisknuta |
    |  . . . . . 1 . .  | pravá klávesa <Ctrl> stisknuta|
    |  . . . . . . 1 .  | levá klávesa <Alt> stisknuta  |
    |  . . . . . . . 1  | levá klávesa <Ctrl> stisknuta |
    +-------------------+-------------------------------+


Pozn.: Tato  sluba je podporována pouze na poèítaèích AT data 15.11.1985 a
       pozdìjšího,   poèítaèích   PC  XT  data  10.1.1986  a  pozdìjšího  a
       poèítaèích XT-286.

       Stavovı  bajt pøesmykaèù je moné obdret z bajtu na adrese v pamìti
       0:0417H  (stav  pøesmykaèù).  Tato hodnota je stejná jako hodnota ve
       slubì 02H. Rozšiøující stavovı bajt pøesmykaèù je odvozován z bajtu
       na  adrese  0:0418H  (rozšiøující stav pøesmykaèù), vıznam bitù však
       není pøesnì shodnı.

       Viz slubu 12H k obdrení stavu pøesmykaèù pro rozšíøenou klávesnici
       (101/102 kláves).

       Pozor  na to, e rozšiøující stav pøesmykaèù (hodnota v AH) hlásí e
       jsou klávesy stisknuty, nikoliv e jsou zapnuty jejich funkce.

       Viz  slubu  02H,  která  je  prakticky  ekvivalentní  této  slubì,
       nepodporuje  však  nové  klávesy  na  rozšíøené  klávesnici (101/102
       kláves).




 I N T    1 7 H (INT 23; 0:005CH) - obsluha vıstupu na tiskárnu

    Servis  obsluhy  vıstupu  na tiskárnu je rozšíøen do více funkcí. Èíslo
poadované funkce je uloeno v registru AH.


         Sluby pøerušení  I N T   1 7 H :


Sluba:  00H (AH = 0) - vyslání jednoho bajtu na tiskárnu
         01H (AH = 1) - inizializace tiskárny
         02H (AH = 2) - dotaz na stav tiskárny



 I N T    1 7 H / 0 0 H (AH = 0)  - vyslání jednoho bajtu na tiskárnu

    vstup:    AH = 00H
              AL = znak k vytištìní
              DX = èíslo paralelního portu tiskárny (0=LPT1, 1=LPT2 atd.)

    vıstup:   AH = stav tiskárny (viz sluba 02H)

    Sluba  vyšle  jeden  znak  na  specifikovanı paralelní port tiskárny a
navrátí bìnı stav tiskárny.

Pozn.: Pro  poèítaèe  AT, XT-286 a konvertabilní PC je pøi zaneprázdnìnosti
       tiskárny    voláno    pøerušení   INT   15H/sluba   90H   (zaøízení
       zaneprázdnìno).   To  umoòuje  systému  provádìt  bìhem  èekání  na
       pøipravenost  tiskárny  jinou  úlohu  (ve  víceúlohovém prostøedí) a
       zvıšit  tak  úèinnost systému. Pøitom je provádìna mìøící smyèka pro
       time-out tiskárny.




 I N T    1 7 H / 0 1 H (AH = 1)  - inizializace tiskárny

    vstup:    AH = 01H
              DX = èíslo paralelního portu tiskárny (0=LPT1, 1=LPT2, atd.)

    vıstup:   AH = stav tiskárny (viz sluba 02H)

    Sluba  vyšle  na  specifikovanı  paralelní port tiskárny inicializaèní
øídící kód a navrátí bìnı stav tiskárny.

Pozn.: Tato  sluba  inicializuje  tiskárnu tím zpùsobem, e na øídící port
       tiskárny vyšle bajt o hodnotì 08H a 0CH.




 I N T    1 7 H / 0 2 H (AH = 2)  - dotaz na stav tiskárny

    vstup:    AH = 02H
              DX = èíslo paralelního portu tiskárny (0=LPT1, 1=LPT2 atd.)

    vıstup:   AH = stav tiskárny

    Navrátí stavové informace o specifikované tiskárnì.

         Stav tiskárny (AH):
      +-------------------+--------------------------------------+
      |  7 6 5 4 3 2 1 0  |       vıznam                         |
      +-------------------+--------------------------------------+
      |  x . . . . . . .  |  tiskárna není zaneprázdnìna (0=je)  |
      |  . x . . . . . .  |  potvrzení od tiskárny               |
      |  . . x . . . . .  |  v tiskárnì není papír               |
      |  . . . x . . . .  |  tiskárna vybrána                    |
      |  . . . . x . . .  |  I/O chyba                           |
      |  . . . . . 0 0 .  |  nepouito                           |
      |  . . . . . . . x  |  chyba time-out                      |
      +-------------------+--------------------------------------+




 I N T    1 8 H (INT 24; 0:0060H) - sluba zavadìèe BASIC

    Pøerušení je aktivováno programem BASIC umístìnım v kazetì.

Pozn.: Toto  pøerušení  pøedá  øízení  na  adresu F600:0, na které je v ROM
       umístìn  standardní  interpreter  BASIC.  Pøerušení pracuje pouze na
       poèítaèích  IBM.  Kompatibilní  poèítaèe nemají umístìn BASIC v ROM,
       místo toho spouštìjí verzy programu BASIC umístìnou na disku obvykle
       známou jako GW-BASIC.

       Pøerušení  je provádìno pouze pokud vnitøní test po zapnutí poèítaèe
       (Power-On  Self  Test  POST)  není  schopen  èíst  operaèní systém z
       disketové mechaniky nebo z pevného disku.




 I N T    1 9 H (INT 25; 0:0064H) - sluba zavadìèe operaèního systému

    Pøerušení  slouí k zavádìní operaèního systému z disku. Po vyvolání se
pokouší  naèíst  zavádìcí  sektor  z  diskety  nebo pevného disku (zavádìcí
sektor  na  disku  je  na pozici - hlava 0, válec 0, sektor 1) do pamìti na
adresu 0:7C00H a pøedá na tuto adresu øízení. Tento sektor obvykle slouí k
zavedení operaèního systému do poèítaèe.

    Pøerušení  se pokouší naèíst zavádìcí sektor nejdøíve z první disketové
mechaniky.  Pokud je operace neúspìšná, pokouší se zavést zavádìcí sektor z
prvního  pevného  disku.  Pokud  není  moné  zavést  zavádìcí sektor ani z
diskety  ani  z  pevného  disku, potom volá pøerušení INT 18H, které vyvolá
iterpreter BASIC, umístìnı v ROM ("kazetovı BASIC").

    Pokud  je  pøerušení  INT  19H  úspìšné,  pøedá  øízení  na  první bajt
zavedeného  sektoru,  kterı  byl  naèten  do  pamìti  od adresy 0:7C00H. To
znamená, e CS je nastaven na 0 a IP je nastaven na hodnotu 7C00H.

Pozn.: Toto  pøerušení není náhradou horkého startu Ctrl-Alt-Del. Pøerušení
       je  poslední  akcí,  kterou  provádí  inicializaèní vnitøní test pøi
       zapnutí  poèítaèe  (POST)  nebo pøi aktivaci klávesami Ctrl-Alt-Del.
       Pokud  se  uivatelskı program pokouší vyvolat toto pøerušení pøímo,
       poèítaè se obvykle zablokuje.

       Správnı  restart  operaèního systému vyvolanı z aplikaèního programu
       musí  provést skok na adresu FFFF:0H v pamìti. Tzn. e CS se nastaví
       na  hodnotu  FFFFH  a  IP na hodnotu 0. Na této adrese zaèíná stejnı
       proces,  jakı  se provádí pøi prvním zapnutí poèítaèe (nebo pøi jeho
       restartu) - tj. buï studenı nebo horkı start.

       V  normálním  stavu  se  provádí  po zapnutí poèítaèe nebo po stisku
       tlaèítka  RESET  na  pøedním  panelu  poèítaèe tzv. "studenı start".
       Studenı   start  poèítaèe  inicializuje  hardware,  testuje  veškerı
       hardware,  testuje  pamì  RAM  a  nakonec vyvolá pøerušení INT 19H,
       které zpùsobí zavedení operaèního systému do pamìti.

       Druhou  moností  je  provedení  tzv.  "horkého startu". Horkı start
       provádí  vnitøní  testy  hardware,  inicializaci hardware poèítaèe a
       zavede  operaèní  systém  z  disku do pamìti, neprovádí však vnitøní
       testy  pamìtí  RAM.  Tento  proces  je  provádìn po stisku kombinace
       kláves Ctrl-Alt-Del.

       Studenı i horkı start se startují na stejné adrese v pamìti FFFF:0H.
       Jejich  rozlišení se provádí testem slova na adrese 0:472H v pamìti.
       Pokud  je  na  této  adrese  uloena hodnota 1234H, provede se horkı
       start.  Jinak  se  provede  studenı  start. Uloení hodnoty 1234H na
       danou  adresu  se  provede pøi stisku kombinace kláves Ctrl-Alt-Del,
       èím  se  zajistí procedení horkého startu. Toto slovo je však moné
       uloit  na  danou  adresu  i programovì, èím je moné rozlišit, zda
       bude  po  skoku  na  adresu FFFF:0H z programu proveden studenı nebo
       horkı start.

       Zavádìcí sektor naètenı z diskety nebo pevného disku provede naètení
       hlavní  èasti  operaèního systému z disku do pamìti. U pevného disku
       je   pøeètena  tabulka  rozdìlení  disku  (Partition  Table),  která
       informuje o tom, z které èásti bude èten operaèní systém.



Zavádìcí sektor diskety formátu 360K (40 stop/9 sektorù) pro MSDOS v4.01:

===========================================================================

stack    SEGMENT   stack
         dw        64 dup (?)
stack    ENDS

code     SEGMENT   page
         ASSUME    cs:code,ds:code

COMMENT %

 *************************************************************************

                  zavádìcí sektor operaèního systému

 *************************************************************************

    Zavádìcí  sektor  operaèního  systému  je  umístìn  v prvním sektoru na
disketì  (hlava  0, válec 0, sektor 1). Pøi startu poèítaèe jej zavede BIOS
pomocí sluby INT 19H od adresy 0:7C00H, na kterou potom pøedá øízení.

    Zavádìcí  sektor  systému  resetuje  disk,  zavede  do pamìti od adresy
0:0500H  první sektor základního adresáøe disku, zkontroluje zda jsou první
dvì  poloky  adresáøe  soubory IO.SYS a MSDOS.SYS. Pokud je vše v poøádku,
zavede ze zaèátku datového prostoru diskety (tj. ze zaèátku souboru IO.SYS)
od  adresy  0:0700H první tøi sektory a pøedá øízení na tuto adresu (adresa
0070:0000H). Pokud vznikne pøi nìkteré operaci chyba, ohlásí chybu zavádìní
systému a èeká na stisk libovolné klávesy.

     %
         org       7c00H

start:   jmp       short boot               ; start zavadìèe

         db        90h                      ; instrukce NOP
         db        'MSDOS4.0'               ; firemní název a verze (OEM)
delka    dw        512                      ; délka sektoru (bajtù)
blok     db        2                        ; velikost bloku (sektorù)
rezsekt  dw        1                        ; poèet rezerv.sektorù pøed FAT
numfat   db        2                        ; poèet alokaèních tabulek FAT
maxroot  dw        0070h                    ; max. poè. pol. zákl. adresáøe
maxsekt  dw        02d0h                    ; celkovı poè. sektorù na médiu
typdsk   db        0fdh                     ; typ disku (popisovaè média)
sektfat  dw        2                        ; poèet sektorù v jednom FAT
sektnm   dw        9                        ; poèet sektorù na stopu
numhlav  dw        2                        ; poèet hlav disku
hidsekt  dw        0                        ; poèet skrytıch sektorù
d7c1e    dw        0
d7c20    dw        0
d7c22    db        0,0
disk     db        0                        ; èíslo disku
hlava    db        0                        ; èíslo hlavy ke ètení
d7c26    db        29h,0d0h,15h,51h,21h
d7c2b    db        'NO NAME    FAT12   '



tabdsk:                                     ; zde se uloí tab. disk.param.
                                            ; (pøekryje èást programu)

COMMENT %

offset, adresa, velikost

 + 0    7c3eh   1     bity 0-3: rychlost krok.; bity 4-7:èas po ètení hlavy
 + 1    7c3fh   1     bit 0:1=pouít DMA; bity 2-7: èas do ètení hlavy
 + 2    7c40h   1     èekání motoru pøed vypnutím (v jednotkách 55 ms)
 + 3    7c41h   1     velikost sektoru (0=128; 1=256; 2=512; 3=1024)
 + 4    7c42h   1     poslední sektor stopy (poèet sektorù)
 + 5    7c43h   1     délka prodlevy pro ètecí/zápisové operace
 + 6    7c44h   1     max. délka pøenosu dat
 + 7    7c45h   1     délka prodelvy pro formátovací operace
 + 8    7c46h   1     plnící znak pro formátování (normálnì 0F6H = '÷')
 + 9    7c47h   1     èas pøítlaku hlavy (v milisekundách)
 +10    7c48h   1     èas potøebnı k zapnutí motoru (v jednotkách 1/8 sek.)

 +11    7c49h   2     èítaè relat. èísla sektoru pøi ètení (niší slovo)
 +13    7c4Bh   2     èítaè relat. èísla sektoru pøi ètení (vyšší slovo)
 +15    7c4dh   2     èíslo válce ke ètení
 +17    7c4fh   1     èíslo sektoru ke ètení
 +18    7c50h   2     poèáteèní sektor základního adresáøe (niší slovo)
 +20    7c52h   2     poèáteèní sektor základního adresáøe (vyšší slovo)

        %

boot:                                       ; start programu zavadìèe

         cli                                ; zákaz pøerušení
         xor       ax,ax                    ; segment = 0
         mov       ss,ax                    ; nastavení segm. zásobníku 0
         mov       sp,offset start          ; ukazatel zásob. pod program
         push      ss                       ; = 00
         pop       es                       ; ES = 00 (segment 0)
         mov       bx,78h                   ; ukazatel disk. param. INT 13H
         lds       si,ss:[bx]               ; DS:SI <-- tab. disk. param.
         push      ds                       ; segment tab. disk. parametrù
         push      si                       ; offset tabulky disk.parametrù
         push      ss                       ; segment 0
         push      bx                       ; adr. ukaz. tab. disk. param.
         mov       di,offset tabdsk         ; zaèátek tabulky parametrù
         mov       cx,11                    ; délka tabulky disk. parametrù
         cld                                ; smìr pøenosu nahoru
         rep       movsb                    ; naètení tab. disk. parametrù
         push      es                       ; segment 0
         pop       ds                       ; DS <-- 0
         mov       byte ptr [di-2],0fh      ; 7c3c <-- 0fh
         mov       cx,[sektnm]              ; poèet sektorù na stopu
         mov       byte ptr [di-7],cl       ; 7c37 <-- 0
         mov       word ptr [bx+2],ax       ; adresa tab.disk.par.<--tabdsk
         mov       word ptr [bx],offset tabdsk; nová adresa tab. disk. par.
         sti                                ; povolení pøerušení
         int       13h                      ; reset disku
         jc        booterr                  ; chyba (tisk hlášení)
         xor       ax,ax                    
         cmp       [maxsekt],ax             ; celkovı poèet sekt. na médiu
         jz        boot1                    ; není ádnı sektor
         mov       cx,[maxsekt]             ; celkovı poèet sekt. na médiu
         mov       [d7c20],cx               ; = 0
boot1:   mov       al,[numfat]              ; poèet alokaèních tabulek FAT
         mul       word ptr [sektfat]       ; poèet sektorù v jednom FAT
         add       ax,[hidsekt]             ; poèet skrytıch sektorù
         adc       dx,[d7c1e]               ; = 0
         add       ax,[rezsekt]             ; poèet rezerv.sektorù pøed FAT
         adc       dx,0                     
         mov       word ptr [tabdsk+18],ax  ; poèát. sektor zákl. adresáøe
         mov       word ptr [tabdsk+20],dx  ; poèát. sektor zákl. adresáøe
         mov       word ptr [tabdsk+11],ax  ; èítaè rel. è. sekt. (LOW)
         mov       word ptr [tabdsk+13],dx  ; èítaè rel. è. sekt. (HIGH)
         mov       ax,32                    ; délka poloky adres. (bajtù)
         mul       word ptr [maxroot]       ; vıpoèet délky zákl. adresáøe
         mov       bx,[delka]               ; délka sektoru (bajtù)
         add       ax,bx                    ;
         dec       ax                       
         div       bx                       ; vıpoèet poèáteè. sektoru dat
         add       word ptr [tabdsk+11],ax  ; èítaè rel. è. sekt. (LOW)
         adc       word ptr [tabdsk+13],0   ; èítaè rel. è. sekt. (HIGH)
         mov       bx,0500h                 ; adresa k zavedení adresáøe
         mov       dx,word ptr [tabdsk+20]  ; poèát. sektor zákl. adresáøe
         mov       ax,word ptr [tabdsk+18]  ; poèát. sektor zákl. adresáøe
         call      setpar                   ; nastav.sektoru, válce a hlavy
         jc        booterr                  ; chyba (pøeteèení disku)
         mov       al,1                     ; poèet sektorù ke ètení = 1
         call      readsekt                 ; ètení sekt. adres. od 0:0500H
         jc        booterr                  ; chyba ètení adresáøe
         mov       di,bx                    ; konec sektoru adresáøe
         mov       cx,11                    ; délka jména souboru IO.SYS
         mov       si,offset soubio         ; jméno souboru IO.SYS
         rep       cmpsb                    ; kontrola jména
         jnz       booterr                  ; není - hlášení chyby
         lea       di,[bx+32]               ; DI - ukazuje na 2. poloku
         mov       si,offset soubdos        ; jméno souboru DOS.SYS
         mov       cx,11                    ; délka jména DOS.SYS
         rep       cmpsb                    ; porovnání jména DOS.SYS
         jz        readio                   ; nataení zavadìèe systému
booterr: mov       si,offset texterr        ; text Není systémovı disk ...
         call      tisktxt                  ; tisk chybového hlášení
         xor       ah,ah                    ; funkce ètení znaku z kláves.
         int       16h                      ; èekání na stisk klávesy
         pop       si                       ;
         pop       ds                       
         pop       [si]                     
         pop       [si+2]                   
         int       19h                      ; skok do sluby zavedení syst.
booter2: pop       ax                       
         pop       ax                       
         pop       ax                       
         jmp       booterr                  ; skok zpìt na hlášení
                                            ; naètení 3 sektorù soub.IO.SYS
                                            ; ES = segment (=0)
readio:  mov       bx,0700h                 ; adresa poèátku bufferu
         mov       cx,3                     ; poèet sektorù k naètení = 3
         mov       ax,word ptr [tabdsk+11]  ; rel. èíslo sektoru - LOW
         mov       dx,word ptr [tabdsk+13]  ; rel. èíslo sektoru - HIGH
nxtsekt: push      ax                       ; èíslo stopy - niší slovo
         push      dx                       ; èíslo stopy - vyšší slovo
         push      cx                       ; poèet sektorù
         call      setpar                   ; nastav.sektoru, válce a hlavy
         jc        booter2                  ; chybové hlášení
         mov       al,1                     ; poèet sektorù ke ètení = 1
         call      readsekt                 ; naètení sektorù do pamìti
         pop       cx                       ; poèet sektorù
         pop       dx                       ; èíslo sektoru
         pop       ax                       ; èíslo stopy
         jc        booterr                  ; chybové hlášení
         add       ax,1                     ; zvıšení ukaz. stopy (LOW)
         adc       dx,0                     ; zvıšení ukaz. stopy (HIGH)
         add       bx,[delka]               ; zvıšení ukládací adr.o sektor
         loop      nxtsekt                  ; další sektor ke ètení
         mov       ch,[typdsk]              ; typ disku (popisovaè média)
         mov       dl,[disk]                ; èíslo disku
         mov       bx,word ptr [tabdsk+11]  ; rel. èíslo násled. sektoru
         mov       ax,word ptr [tabdsk+13]  ;    -  "  -  (niší slovo)

         ; db        0eah,0,0,70h,0
         jmp       far 0070h:0000h          ; start modulu IO.SYS

                                            ; tisk textu na adrese DS:SI
tisktxt: lodsb                              ; pøeètení znaku k tisku
         or        al,al                    ; byl koncovı znak ?
         jz        bootret                  ; konec tisku textu
         mov       ah,0eh                   ; funkce tisku znaku v TTY módu
         mov       bx,0007h                 ; = bílé písmo, stránka 0
         int       10h                      ; tisk znaku v AL
         jmp       tisktxt                  ; další znak k tisku

                                            ; nastav.sektoru, válce a hlavy
                                            ; vstup:AX = rel.sektor (LOW)
                                            ;       DX = rel.sektor (HIGH)
setpar:  cmp       dx,[sektnm]              ; poèet sektorù na stopu
         jnc       setpar2                  ; není další sektor na stopì
         div       word ptr [sektnm]        ; poèet sektorù na stopu
         inc       dl                       ; èíslo sektoru ke ètení
         mov       byte ptr [tabdsk+17],dl  ; èíslo sektoru ke ètení
         xor       dx,dx
         div       word ptr [numhlav]       ; dìleno poètem hlav disku
         mov       [hlava],dl               ; èíslo hlavy ke ètení
         mov       word ptr [tabdsk+15],ax  ; èíslo válce ke ètení
         clc                                ; pøevod OK
         ret                                
setpar2: stc                                ; nastavení pøíznaku chyby
bootret: ret                                
                                            ; naètení sektorù do pamìti
                                            ; vstup:  AL = poèet sektorù
readsekt:mov       ah,2                     ; funkce ètení sekt. do pamìti
         mov       dx,word ptr [tabdsk+15]  ; èíslo válce ke ètení
         mov       cl,6                     ; poèet rotací
         shl       dh,cl                    ; vynásobení * 64 (bity 9,8)
         or        dh,byte ptr [tabdsk+17]  ; ètenı sekt.OR bity 9,8 stopy
         mov       cx,dx                    ; CL = è.válce; CH = è.sektoru
         xchg      ch,cl                    ; CH = è.válce; CL = è.sektoru
         mov       dl,[disk]                ; èíslo disku
         mov       dh,[hlava]               ; èíslo hlavy ke ètení
         int       13h                      ; ètení sektorù do pamìti
         ret                                

texterr  db        0dh,0ah,'Non-System disk or disk error'
         db        0dh,0ah,'Replace and press any key'
         db        ' when ready',0dh,0ah,0

soubio   db        'IO      SYS'
soubdos  db        'MSDOS   SYS'

         db        0,0,0,0,0,0,0,0,0,0,0,0,0,85,170

         code      ends

         end       start


===========================================================================





 I N T    1 A H (INT 26; 0:0068H) - sluby systémového èasovaèe a hodin

    Rutina slueb systémového èasovaèe a hodin je rozšíøena do více funkcí.
Èíslo poadované funkce je uloeno v registru AH.



         Sluby pøerušení  I N T  1 A H :


Sluba:  00H (AH =  0) - ètení èítaèe èasu systémového èasovaèe
         01H (AH =  1) - nastavení èítaèe èasu systémového èasovaèe
         02H (AH =  2) - ètení èasu hodin reálného èasu
         03H (AH =  3) - nastavení hodin reálného èasu
         04H (AH =  4) - ètení data hodin reálného èasu
         05H (AH =  5) - nastavení data hodin reálného èasu
         06H (AH =  6) - nastavení alarmu hodin reálného èasu
         07H (AH =  7) - reset alarmu hodin reálného èasu
         08H (AH =  8) - nastavení módu zapnutí poèítaèe hodinami
         09H (AH =  9) - ètení èasu alarmu hodin a stavu
         0AH (AH = 10) - ètení èítaèe dnù systémového èasu
         0BH (AH = 11) - nastavení èítaèe dnù systémového èasu
         80H (AH =120) - nastavení multiplexeru zdroje zvuku



 I N T    1 A H / 0 0 H (AH =  0) - ètení èítaèe èasu systémového èasovaèe

    vstup:    AH = 00H

    vıstup:   CX = vyšší èást èítaèe èasu
              DX = niší èást èítaèe èasu
              AL = 0 pokud ještì neuplynulo 24 hodin; jinak 1

    Navrací  bìnı èas dne a zda uplynulo 24 hodin od 1) posledního zapnutí
poèítaèe, 2) posledního resetu poèítaèe, 3) posledního ètení nebo nastavení
systémového èasovaèe.

Pozn.: Následující rovnice konvertují obsah systémového èítaèe na èas dne:

              hodina    = stav_èítaèe_èasu / 65543 (1007H)
              zbytek1   = stav_èítaèe_èasu MOD 65543 (1007H)

              minuta    = zbytek1 / 1092 (0444H)
              zbytek2   = zbytek1 MOD 1092 (0444H)

              sekunda   = zbytek2 / 18.21
              zbytek3   = zbytek2 MOD 18.21

              setiny    = CINT (zbytek3 * 100)

       Systémovı  èasovaè (tak jak je rozeznáván hodinami reálného èasu) je
       èasovaè,  kterı  je  nastaven pøi startu systému. Tento èas je pouze
       podpùrnı, bìí pouze tak dlouho, jak dlouho je zapnut systém.

       Obsah  èítacích hodin lze té èíst jako 4-bajtovou poloku na adrese
       0:046CH  v  pamìti.  Tato  4-bajtová poloka je ekvivalentní hodnotì
       CX:DX po vyvolání sluby 00H.

       Po  vyvolání  sluby  je  pøíznak  (na adrese 0:0470H) informující o
       uplynutí 24 hodinové doby vynulován.

       Pokud je v povelovém øádku systému zadán povel TIME, DOS získá èas s
       pouitím této sluby.

       Èítání  èasu  probíhá  s  rychlostí  taktování 18.21 za sekundu (tj.
       kadıch 55 milisekund je zvıšen stav èítaèe èasu o 1).




 I N T    1 A H / 0 1 H (AH =  1) - nastavení èítaèe èasu systém. èasovaèe


    vstup:    AH = 01H
              CX = vyšší èást èítaèe èasu
              DX = niší èást èítaèe èasu

    vıstup:   ádnı

    Sluba nastaví systémovı èasovaè (èas dne).

Pozn.: Následující rovnice konvertuje èas dne na stav èítaèe èasu:

         stav_èítaèe_èasu = (hodina * 65543.33) + (minuta * 1092.38) +
                            + (sekunda * 18.21) + (setina * .182)

       Systémovı  èasovaè (tak jak je rozeznáván hodinami reálného èasu) je
       èasovaè,  kterı  je  nastaven pøi startu systému. Tento èas je pouze
       podpùrnı, bìí pouze tak dlouho, jak dlouho je zapnut systém.

       Obsah  èítacích  hodin lze té nastavovat jako 4-bajtovou poloku na
       adrese  0:046CH  v  pamìti.  Tato  4-bajtová poloka je ekvivalentní
       hodnotì CX:DX pøi vyvolání sluby 01H.

       Po  vyvolání  sluby  je  pøíznak  (na adrese 0:0470H) informující o
       uplynutí 24 hodinové doby vynulován.

       Pokud je v povelovém øádku systému zadán povel TIME, DOS nastaví èas
       s pouitím této sluby.

       Èítání  èasu  probíhá  s  rychlostí  taktování 18.21 za sekundu (tj.
       kadıch 55 milisekund je zvıšen stav èítaèe èasu o 1).




 I N T    1 A H / 0 2 H (AH =  2) - ètení èasu hodin reálného èasu

    vstup:    AH = 02H

    vıstup:   CF = nastaven pokud hodiny nepracují; jinak vynulován
              CH = hodiny (BCD)
              CL = minuty (BCD)
              DH = sekundy (BCD)
              DL = 1 pokud je èasová volba denního ukládání; jinak je 0

    Sluba poskytuje èas z vnitøních hodin reálného èasu.

Pozn.: Všechny  èíselné údaje jsou ve formì BCD (binárnì kódované dekadické
       èíslice).  Napøíklad  údaj 9:04:12 je navrácen jako CX = 0904H; DH =
       12H.

       Hodiny  reálného  èasu  jsou  hodiny,  které  bìí dokonce i kdy je
       poèítaè vypnut. K tomu slouí baterie CMOS, která zajišuje správnou
       funkci èítání dne, èasu i alarmu a to i pøi vypnutém poèítaèi.

       Tato  sluba  je moná pouze pro poèítaèe AT, XT-286 a konvertabilní
       PC. Døívìjší pøístroje budou hlásit nepøedpokládané vısledky (vèetnì
       stavu pøíznaku pøenosu CF).

       Èasová  volba  denního  ukládání  není hlášena na poèítaèích AT data
       pøed 6.10.1985.

       Informace navrácená touto slubou se mùe lišit od systémového èasu.
       To  je zpùsobeno tím, e údaj hodin reálného èasu je èten jednou pøi
       startu  systému  a  uloí  se  do  systémového èítaèe. Všechny další
       reference  k  èasu  jsou  pouity  ze systémového èasovaèe. Pokud se
       zmìní  buï  hodiny reálného èasu (sluba 03H) nebo systémovı èasovaè
       (sluba 01H), potom druhé hodiny se nezmìní v souhlasu s prvními.

       Aèkoliv  systém pouívá systémovı èasovaè pro informace o èasu, jsou
       hodiny reálného èasu i systémovı èasovaè nastavovány spolu.




 I N T    1 A H / 0 3 H (AH =  3) - nastavení hodin reálného èasu

    vstup:    AH = 03H
              CH = hodiny (BCD)
              CL = minuty (BCD)
              DH = sekundy (BCD)
              DL = 1 pokud je èasová volba denního ukládání; jinak je 0

    vıstup:   ádnı

    Sluba nastavuje èas vnitøních hodin reálného èasu.

Pozn.: Všechny  èíselné údaje jsou ve formì BCD (binárnì kódované dekadické
       èíslice).  Napøíklad  údaj 9:04:12 je nastaven jako CX = 0904H; DH =
       12H.

       Hodiny  reálného  èasu  jsou  hodiny,  které  bìí dokonce i kdy je
       poèítaè vypnut. K tomu slouí baterie CMOS, která zajišuje správnou
       funkci èítání dne, èasu i alarmu a to i pøi vypnutém poèítaèi.

       Tato  sluba  je moná pouze pro poèítaèe AT, XT-286 a konvertabilní
       PC. Døívìjší pøístroje budou hlásit nepøedpokládané vısledky (vèetnì
       stavu pøíznaku pøenosu CF).

       Èasová  volba  denního  ukládání  není pouita na poèítaèích AT data
       pøed 6.10.1985.

       Nastavení  hodin reálného èasu nemá vliv na systémovı èasovaè, nebo
       údaj  hodin  reálného èasu je èten jednou pøi startu systému a uloí
       se  do  systémového  èítaèe.  Všechny  další  reference  k èasu jsou
       pouity  ze systémového èasovaèe. Pokud se zmìní buï hodiny reálného
       èasu  (tato sluba) nebo systémovı èasovaè (sluba 01H), potom druhé
       hodiny se nezmìní v souhlasu s prvními.

       Aèkoliv  systém pouívá systémovı èasovaè pro informace o èasu, jsou
       hodiny reálného èasu i systémovı èasovaè nastavovány spolu.





 I N T    1 A H / 0 4 H (AH =  4) - ètení data hodin reálného èasu

    vstup:    AH = 04H

    vıstup:   CF = nastaven pokud hodiny nepracují; jinak vynulován
              CH = století (19 nebo 20) (BCD)
              CL = rok (BCD)
              DH = mìsíc (BCD)
              DL = den

    Sluba poskytuje datum z vnitøních hodin reálného èasu.

Pozn.: Všechny  èíselné údaje jsou ve formì BCD (binárnì kódované dekadické
       èíslice).  Napøíklad  údaj  15.listopadu  1987 je navrácen jako CX =
       1987H; DX = 1115H.

       Hodiny  reálného  èasu  jsou  hodiny,  které  bìí dokonce i kdy je
       poèítaè vypnut. K tomu slouí baterie CMOS, která zajišuje správnou
       funkci èítání dne, èasu i alarmu a to i pøi vypnutém poèítaèi.

       Tato  sluba  je moná pouze pro poèítaèe AT, XT-286 a konvertabilní
       PC. Døívìjší pøístroje budou hlásit nepøedpokládané vısledky (vèetnì
       stavu pøíznaku pøenosu CF).

       Informace navrácená touto slubou se mùe lišit od systémového data.
       To  je zpùsobeno tím, e údaj hodin reálného èasu je èten jednou pøi
       startu  systému  a  uloí  se  do  systémového èítaèe. Všechny další
       reference  k  datu  jsou  pouity  ze systémového èasovaèe. Pokud se
       zmìní  buï  hodiny reálného èasu (sluba 05H) nebo systémovı èasovaè
       (sluba 01H), potom druhé hodiny se nezmìní v souhlasu s prvními.

       Aèkoliv  systém pouívá systémovı èasovaè pro informace o datu, jsou
       hodiny reálného èasu i systémovı èasovaè nastavovány spolu.





 I N T    1 A H / 0 5 H (AH =  5) - nastavení data hodin reálného èasu

    vstup:    AH = 05H
              CH = století (19 nebo 20) (BCD)
              CL = rok (BCD)
              DH = mìsíc (BCD)
              DL = den

    vıstup:   ádnı

    Sluba nastavuje datum vnitøních hodin reálného èasu.

Pozn.: Všechny  èíselné údaje jsou ve formì BCD (binárnì kódované dekadické
       èíslice).  Napøíklad  údaj  15.listopadu  1987 je nastaven jako CX =
       1987H; DX = 1115H.

       Hodiny  reálného  èasu  jsou  hodiny,  které  bìí dokonce i kdy je
       poèítaè vypnut. K tomu slouí baterie CMOS, která zajišuje správnou
       funkci èítání dne, èasu i alarmu a to i pøi vypnutém poèítaèi.

       Tato  sluba  je moná pouze pro poèítaèe AT, XT-286 a konvertabilní
       PC. Døívìjší pøístroje budou hlásit nepøedpokládané vısledky (vèetnì
       stavu pøíznaku pøenosu CF).

       Nastavení  hodin  reálného  èasu  touto  slubou  nemá ádnı vliv na
       systémové datum. To je zpùsobeno tím, e údaj hodin reálného èasu je
       èten  jednou  pøi  startu  systému a uloí se do systémového èítaèe.
       Všechny další reference k datu jsou pouity ze systémového èasovaèe.
       Pokud se zmìní buï hodiny reálného èasu (tato sluba) nebo systémovı
       èasovaè  (sluba  01H),  potom  druhé hodiny se nezmìní v souhlasu s
       prvními.

       Aèkoliv  systém pouívá systémovı èasovaè pro informace o datu, jsou
       hodiny reálného èasu i systémovı èasovaè nastavovány spolu.




 I N T    1 A H / 0 6 H (AH =  6) - nastavení alarmu hodin reálného èasu

    vstup:    AH = 06H
              CH = hodiny (BCD)
              CL = minuty (BCD)
              DH = sekundy (BCD)

    vıstup:   CF = nastaven,  pokud  hodiny  nepracují  nebo  je  alarm ji
                   nastaven; jinak je vynulován

    Sluba  nastavuje  èas,  ve  kterém  poèítaè  pøejde  do  stavu  alarmu
vyvoláním pøerušení INT 4AH.

Pozn.: Všechny  èíselné údaje jsou ve formì BCD (binárnì kódované dekadické
       èíslice).  Napøíklad  údaj 9:04:12 je nastaven jako CX = 0904H; DH =
       12H.

       Hodiny  reálného  èasu  jsou  hodiny,  které  bìí dokonce i kdy je
       poèítaè vypnut. K tomu slouí baterie CMOS, která zajišuje správnou
       funkci èítání dne, èasu i alarmu a to i pøi vypnutém poèítaèi.

       Tato  sluba  je moná pouze pro poèítaèe AT, XT-286 a konvertabilní
       PC. Døívìjší pøístroje budou hlásit nepøedpokládané vısledky (vèetnì
       stavu pøíznaku pøenosu CF).

       Po  provedení  této  sluby je pøi shodì poadované hodiny, minuty a
       sekundy  vygenerováno  pøerušení  INT  4AH.  Pøedtím  je  však nutno
       nainstalovat ovladaè pøerušení INT 4AH.

       Pøerušení  alarmu  (INT  4AH) je vyvoláváno vdy kadıch 24 hodin ve
       specifikovanou dobu a do doby, kdy bude alarm resetován slubou 07H
       (reset  alarmu  hodin  reálného  èasu). Souèasnì lze aktivovat pouze
       jeden alarm.

       Protoe  jsou  hodiny  reálného  èasu  zaznamenány  i  pøi  vypnutém
       poèítaèi,  zùstane  nastavení  èasového  alarmu aktivní i po vypnutí
       poèítaèe  (samozøejmì  ale  alarm  nemùe  bıt pøi vypnutém poèítaèi
       generován).

       Nastavení  hodin reálného èasu nemá vliv na systémovı èasovaè, nebo
       údaj  hodin  reálného èasu je èten jednou pøi startu systému a uloí
       se  do  systémového  èítaèe.  Všechny  další  reference  k èasu jsou
       pouity  ze systémového èasovaèe. Pokud se zmìní buï hodiny reálného
       èasu  (sluba  03H) nebo systémovı èasovaè (sluba 01H), potom druhé
       hodiny se nezmìní v souhlasu s prvními.

       Aèkoliv  systém pouívá systémovı èasovaè pro informace o èasu, jsou
       hodiny reálného èasu i systémovı èasovaè nastavovány spolu.




 I N T    1 A H / 0 7 H (AH =  7) - reset alarmu hodin reálného èasu

    vstup:    AH = 07H

    vıstup:   ádnı

    Sluba vyøazuje alarm hodin reálného èasu z èinnosti.

Pozn.: Tato  sluba  znemoòuje  vyvolání  procesu  alarmu. To je provedeno
       zablokováním  provedení  pøerušení  INT  4AH  (vyvolání alarmu). Viz
       sluba 06H (nastavení alarmu hodin reálného èasu).

       Hodiny  reálného  èasu  jsou  hodiny,  které  bìí dokonce i kdy je
       poèítaè vypnut. K tomu slouí baterie CMOS, která zajišuje správnou
       funkci èítání dne, èasu i alarmu a to i pøi vypnutém poèítaèi.

       Tato  sluba  je moná pouze pro poèítaèe AT, XT-286 a konvertabilní
       PC. Døívìjší pøístroje budou hlásit nepøedpokládané vısledky (vèetnì
       stavu pøíznaku pøenosu CF).





 I N T    1 A H / 0 8 H (AH =  8) - nastav. módu zapnutí poèítaèe hodinami

    vstup:    AH = 08H
              CH = hodiny (BCD)
              CL = minuty (BCD)
              DH = sekundy (BCD)

    vıstup:   CF = nastaven,  pokud  hodiny  nepracují  nebo  je  alarm ji
                   nastaven; jinak je vynulován

    Sluba  nastavuje  èas,  ve  kterém  se poèítaè automaticky zapne.

Pozn.: Všechny  èíselné údaje jsou ve formì BCD (binárnì kódované dekadické
       èíslice).  Napøíklad  údaj 9:04:12 je nastaven jako CX = 0904H; DH =
       12H.

       Tato  sluba je moná pouze pro konvertabilní PC. Døívìjší pøístroje
       budou hlásit nepøedpokládané vısledky (vèetnì stavu pøíznaku pøenosu
       CF). Poèítaèe AT, XT-286 a PS/2 nastaví pøíznak pøenosu CF.

       Hodiny  reálného  èasu  jsou  hodiny,  které  bìí dokonce i kdy je
       poèítaè vypnut. K tomu slouí baterie CMOS, která zajišuje správnou
       funkci èítání dne, èasu i alarmu a to i pøi vypnutém poèítaèi.

       Po  provedení  této  sluby je pøi shodì poadované hodiny, minuty a
       sekundy  poèítaè automaticky zapnut. Po zapnutí napájení je vyvoláno
       pøerušení   INT  4AH  (uivatelkı  alarm).  Pøedtím  je  však  nutno
       nainstalovat ovladaè pøerušení INT 4AH.

       Je-li  systém  zapnut, pøerušení alarmu (INT 4AH) je vyvoláváno vdy
       kadıch  24  hodin ve specifikovanou dobu a do doby, kdy bude alarm
       resetován  slubou  07H (reset alarmu hodin reálného èasu). Souèasnì
       lze aktivovat pouze jeden alarm.





 I N T    1 A H / 0 9 H (AH =  9) - ètení èasu alarmu hodin a stavu

    vstup:    AH = 09H

    vıstup:   CF = nastaven, pokud hodiny pracují; jinak je vynulován
              CH = hodiny (BCD)
              CL = minuty (BCD)
              DH = sekundy (BCD)
              DL = stav alarmu
                   00H - alarm není monı
                   01H - alarm monı, avšak nebude zapínat systém
                   02h - alarm monı a zapne té napájení poèítaèe

    Sluba  ète èas alarmu a jeho stav.

Pozn.: Všechny  èíselné údaje jsou ve formì BCD (binárnì kódované dekadické
       èíslice).  Napøíklad  údaj 9:04:12 je navrácen jako CX = 0904H; DH =
       12H.

       Hodiny  reálného  èasu  jsou  hodiny,  které  bìí dokonce i kdy je
       poèítaè vypnut. K tomu slouí baterie CMOS, která zajišuje správnou
       funkci èítání dne, èasu i alarmu a to i pøi vypnutém poèítaèi.

       Tato  sluba je moná pouze pro konvertabilní PC. Døívìjší pøístroje
       budou hlásit nepøedpokládané vısledky (vèetnì stavu pøíznaku pøenosu
       CF). Poèítaèe AT, XT-286 a PS/2 nastaví pøíznak pøenosu CF.




 I N T    1 A H / 0 A H (AH = 10) - ètení èítaèe dnù systémového èasu

    vstup:    AH = 0AH

    vıstup:   CF = nastaven pøi chybì; jinak vynulován
              CX = poèet dnù od 1.ledna 1980

    Navrací poèet dnù od 1.ledna 1980 (odvozeno ze systémového èasovaèe).

Pozn.: Systémovı  èasovaè  je  èasovaè  nastavenı  pøi startu systému. Toto
       datum je pomocné, platící pouze pokud je systém zapnut.

       Tato  sluba  je  moná  pouze  pro  poèítaèe  XT  data  10.1.1986 a
       pozdìjšího.  AT  a  XT-286  nastaví pøíznak pøenosu CF jako indikaci
       chybového  stavu.  Døívìjší  pøístroje budou hlásit nepøedpokládanou
       chybu (vèetnì stavu pøíznaku pøenosu CF).




 I N T    1 A H / 0 B H (AH = 11) - nastavení èítaèe dnù systémového èasu

    vstup:    AH = 0AH
              CX = poèet dnù od 1.ledna 1980

    vıstup:   CF = nastaven pøi chybì; jinak vynulován

    Nastavuje poèet dnù od 1.ledna 1980 (nastavuje systémovı èasovaè).

Pozn.: Systémovı  èasovaè  je  èasovaè  nastavenı  pøi startu systému. Toto
       datum je pomocné, platící pouze pokud je systém zapnut.

       Tato  sluba  je  moná  pouze  pro  poèítaèe  XT  data  10.1.1986 a
       pozdìjšího.  AT  a  XT-286  nastaví pøíznak pøenosu CF jako indikaci
       chybového  stavu.  Døívìjší  pøístroje budou hlásit nepøedpokládanou
       chybu (vèetnì stavu pøíznaku pøenosu CF).





 I N T    1 A H / 8 0 H (AH =120) - nastavení multiplexeru zdroje zvuku

    vstup:    AH = 80H
              AL = zdroj zvuku
                   00H - 8253 kanál 2
                   01H - kazetovı vstup
                   02H - audio vstup (vstupnì/vıstupní kanál)
                   03H - èip komplexního zvukového generátoru (TI 76496)

    vıstup:   CF = nastaven pøi chybì; jinak vynulován

    Sluba urèuje zdroj, kterı bude pouit pro generaci zvuku.

Pozn.: Tato  sluba je moná pouze pro poèítaèe PCjr. Poèítaèe AT, XT-286 a
       konvertabilní  PC  nastaví  pøíznak pøenosu CF, informující o chybì.
       Døívìjší  pøístroje  budou  hlásit  nepøedpokládanı vısledek (vèetnì
       stavu pøíznaku pøenosu CF).

       Pøi  zapnutí  napájení  je  nastaven  standardní  zdroj  zvuku  8253
       (programovatelnı èasovací èip) a to kanál 2.




 I N T    1 B H (INT 27; 0:006CH) - pøerušení klávesnicí

    Pøerušení  je  voláno  pøi  zadání  kombinace  kláves  <Ctrl>-<Break> z
klávesnice.

    Pøi  zapnutí  napájení  je  jako ovladaè tohoto pøerušení pouita pouze
instrukce IRET zabezpeèující návrat z pøerušení. DOS si však instaluje svùj
ovladaè,  kterı  nastaví  vnitøní pøíznak informující o tom, e byla zadána
kombinace kláves <Ctrl>-<Break>.

Pozn.: DOS  testuje  stav vnitøního pøíznaku pøíleitostnì, v závislosti na
       nastavení  stupnì kontroly pøerušení (INT 21H, funkce 33H). Pokud je
       pøíznak  bìhem testu nastaven, potom se na obrazovce zobrazí øetìzec
       "^C"  následovanı  znaky CR a LF (provede se pøechod na novı øadek),
       vnitøní  pøíznak  se  resetuje  a  je  vyvoláno  pøerušení  INT  23H
       (vıstupní adresa pøerušení Ctrl-Break).

       Pøerušení  INT  09H  (klávesnicové pøerušení) nastaví bajt na adrese
       0:0417H,   kterı   signalizuje,  e  byla  zadána  kombinace  kláves
       <Ctrl>-<Break>.



 I N T    1 C H (INT 28; 0:0070H) - uivatelské èasovací impulsy

    Pøerušení je voláno kadım impulsem èasovaèe (18.2 krát za sekundu, tj.
kadıch 55 ms) z pøerušení INT 08H (systémovı èasovaè).

    Standardnì  obsahuje  ovladaè pøerušení pouze instrukci IRET slouící k
návratu z pøerušení. Uivatel mùe nastavit svùj vlastní ovladaè umoòující
pøevzít øízení kadı impuls èasovaèe.

Pozn.: Je  nutno  se  zmínit  o tom, e toto pøerušení je voláno pøerušením
       hardwarového  èasovaèe  (INT  08H),  kterı  nemá  signalizaci  konce
       pøerušení.  Proto  je  rozsah  akcí v této rutinì omezen, pokud jsou
       všechna  pøerušení  zakázána.  Lepší  pøístup  k  tomuto problému je
       zachytit  pøerušení  INT  08H.  Novı  ovladaè pøerušení INT 08H bude
       nejdøíve volat standardní ovladaè pøerušení INT 08H, krerı kompletnì
       obslouí  signály  øadièe  pøerušení. Po ukonèení standardní obsluhy
       pøerušení  INT 08H mùe novı ovladaè dìlat cokoliv co má dìlat kadı
       impuls èasovaèe.




 I N T    1 D H (INT 29; 0:0074H) - ukazatel na tabulku videoparametrù

    Vektor ukazuje na tabulku videoparametrù.



 I N T    1 E H (INT 30; 0:0078H) - ukazatel tabulky disketovıch parametrù

- viz pøerušení INT 13H/sluba 05H.



 I N T    1 F H (INT 31; 0:007CH) - ukazatel tabulky grafickıch znakù

- viz pøerušení INT 10H/funkce 12H



    Následujících 32 pøerušení (INT 20H a INT 3FH) je rezervováno pro èást
operaèního systému DOS. Tato èást je podrobnì popsána v kapitole DOS.

 I N T    2 0 H (INT 32; 0:0080H) - pøerušení programu (DOS)
 I N T    2 1 H (INT 33; 0:0084H) - volání slueb DOS (DOS)
 I N T    2 2 H (INT 34; 0:0088H) - adresa ukonèení programu (DOS)
 I N T    2 3 H (INT 35; 0:008CH) - adresa obsluhy klávesy <Break> (DOS)
 I N T    2 4 H (INT 36; 0:0090H) - adresa obsluhy kritickıch chyb (DOS)
 I N T    2 5 H (INT 37; 0:0094H) - absolutní ètení z disku (DOS)
 I N T    2 6 H (INT 38; 0:0098H) - absolutní zápis na disk (DOS)
 I N T    2 7 H (INT 39; 0:009CH) - pøerušení a ponechání rezidentním (DOS)
 I N T    2 8 H (INT 40; 0:00A0H) - seznam (DOS)
 I N T    2 9 H (INT 41; 0:00A4H) - uloení obrazovky (DOS)
 I N T    2 A H (INT 42; 0:00A8H) - síové zaøízení (DOS)
 I N T    2 B H (INT 43; 0:00ACH) - rezervováno (DOS)
 I N T    2 C H (INT 44; 0:00B0H) - rezervováno (DOS)
 I N T    2 D H (INT 45; 0:00B4H) - rezervováno (DOS)
 I N T    2 E H (INT 46; 0:00B8H) - rezervováno (DOS)
 I N T    2 F H (INT 47; 0:00BCH) - multiplexované pøerušení (DOS)
 I N T    3 0 H (INT 48; 0:00C0H) - rezervováno - skok (DOS)
 I N T    3 1 H (INT 49; 0:00C4H) - rezervováno - skok (DOS)
 I N T    3 2 H (INT 50; 0:00C8H) - rezervováno (DOS)
 I N T    3 3 H (INT 51; 0:00CCH) - rezervováno (DOS)
 I N T    3 4 H (INT 52; 0:00D0H) - rezervováno (DOS)
 I N T    3 5 H (INT 53; 0:00D4H) - rezervováno (DOS)
 I N T    3 6 H (INT 54; 0:00D8H) - rezervováno (DOS)
 I N T    3 7 H (INT 55; 0:00DCH) - rezervováno (DOS)
 I N T    3 8 H (INT 56; 0:00E0H) - rezervováno (DOS)
 I N T    3 9 H (INT 57; 0:00E4H) - rezervováno (DOS)
 I N T    3 A H (INT 58; 0:00E8H) - rezervováno (DOS)
 I N T    3 B H (INT 59; 0:00ECH) - rezervováno (DOS)
 I N T    3 C H (INT 60; 0:00F0H) - rezervováno (DOS)
 I N T    3 D H (INT 61; 0:00F4H) - rezervováno (DOS)
 I N T    3 E H (INT 62; 0:00F8H) - rezervováno (DOS)
 I N T    3 F H (INT 63; 0:00FCH) - rezervováno (DOS)



 I N T    4 0 H (INT 64; 0:0100H) - pøerušení od øadièe floppy diskù



 I N T    4 1 H (INT 65; 0:0104H) - ukazatel na parametry pevného disku 0



 I N T    4 2 H (INT 66; 0:0108H) - vstupní bod EGA



 I N T    4 3 H (INT 67; 0:010CH) - ukazatel na inicializaci EGA



 I N T    4 4 H (INT 68; 0:0110H) - ukazatel na grafické znaky EGA



 I N T    4 5 H (INT 69; 0:0114H) - rezervováno (BIOS)



 I N T    4 6 H (INT 70; 0:0118H)  - uzatale na parametry pevného disku 1



 I N T    4 7 H (INT 71; 0:011CH) - rezervováno (BIOS)



 I N T    4 8 H (INT 72; 0:0120H) - klávesnice PC Jr



 I N T    4 9 H (INT 73; 0:0124H) - orientaèní kód klávesy PC Jr



 I N T    4 A H (INT 74; 0:0128H) - uivatelskı èasovı alarm

    Pøerušení  je  voláno  ovladaèem  hodin  reálného  èasu, pokud vzniknou
podmínky pro vyvolání èasového alarmu.

    Standardnì  obsahuje  ovladaè pøerušení pouze instrukci IRET slouící k
návratu z pøerušení. Uivatel mùe nastavit svùj vlastní ovladaè umoòující
obsluhu  alarmu.  Pøesvìdète  se  pøed  vyvoláním  pøerušení 1AH/sluby 06H
(nastavení  alarmu),  zda  je  nastaven  ovladaè  pro obsluhu uivatelského
alarmu.

Pozn.: Tato  sluba  je moná pouze pro poèítaèe AT, XT-286 a konvertabilní
       PC.

       Ovladaè pro obsluhu pøerušení hodin reálného èasu je pro poèítaèe AT
       a  XT-286  pøerušení INT 70H. Konvertabilní PC pouívá pøerušení INT
       08H (systémovı èasovaè).




 I N T    4 B H (INT 75; 0:012CH) - rezervováno (BIOS)



 I N T    4 C H (INT 76; 0:0130H) - rezervováno (BIOS)


 I N T    4 D H (INT 77; 0:0134H) - rezervováno (BIOS)



 I N T    4 E H (INT 78; 0:0138H) - rezervováno (BIOS)



 I N T    4 F H (INT 79; 0:013CH) - rezervováno (BIOS)



 I N T    5 0 H (INT 80; 0:0140H) - pøerušení èasovaèem CMOS



 I N T    5 1 H (INT 81; 0:0144H) - rezervováno (BIOS)



 I N T    5 2 H (INT 82; 0:0148H) - rezervováno (BIOS)



 I N T    5 3 H (INT 83; 0:014CH) - rezervováno (BIOS)



 I N T    5 4 H (INT 84; 0:0150H) - rezervováno (BIOS)



 I N T    5 5 H (INT 85; 0:0154H) - rezervováno (BIOS)



 I N T    5 6 H (INT 86; 0:0158H) - rezervováno (BIOS)



 I N T    5 7 H (INT 87; 0:015CH) - rezervováno (BIOS)



 I N T    5 8 H (INT 88; 0:0160H) - rezervováno (BIOS)



 I N T    5 9 H (INT 89; 0:0164H) - rezervováno (BIOS)



 I N T    5 A H (INT 90; 0:0168H) - adaptér blokù (cluster) BIOS



 I N T    5 B H (INT 91; 0:016CH) - rezervováno (BIOS)



 I N T    5 C H (INT 92; 0:0170H) - síovı adaptér - BIOS



 I N T    5 D H (INT 93; 0:0174H) - rezervováno (BIOS)



 I N T    5 E H (INT 94; 0:0178H) - rezervováno (BIOS)



 I N T    5 F H (INT 95; 0:017CH) - rezervováno (BIOS)



 I N T    6 0 H (INT 96; 0:0180H) - uivatelské pøerušení




 I N T    6 1 H (INT 97; 0:0184H) - uivatelské pøerušení



 I N T    6 2 H (INT 98; 0:0188H) - uivatelské pøerušení



 I N T    6 3 H (INT 99; 0:018CH) - uivatelské pøerušení



 I N T    6 4 H (INT 100; 0:0190H) - uivatelské pøerušení



 I N T    6 5 H (INT 101; 0:0194H) - uivatelské pøerušení



 I N T    6 6 H (INT 102; 0:0198H) - uivatelské pøerušení



 I N T    6 7 H (INT 103; 0:019CH) - driver rozšíøené pamìti EMM

    Vektor  ukazuje  na  záhlaví  driveru pro rozšíøenou pamì EMM (manaer
rozšíøené  pamìti).  Pracuje  jako  blokové  zaøízení  se  jménem  zaøízení
EMSXXXX0.  Bliší podrobnosti viz oddíl DOS - "Specifikace rozšíøené pamìti
EMS".




 I N T    6 8 H (INT 104; 0:01A0H) - nepouito



 I N T    6 9 H (INT 105; 0:01A4H) - nepouito



 I N T    6 A H (INT 106; 0:01A8H) - nepouito



 I N T    6 B H (INT 107; 0:01ACH) - nepouito



 I N T    6 C H (INT 108; 0:01B0H) - pokraèování systému

- pokraèování systému po opìtovném zapnutí poèítaèe (poèítaèe PC Jr)



 I N T    6 D H (INT 109; 0:01B4H) - nepouito



 I N T    6 E H (INT 110; 0:01B8H) - nepouito



 I N T    6 F H (INT 111; 0:01BCH) - nepouito



 I N T    7 0 H (INT 112; 0:01C0H) - hodiny reálného èasu

    Pøerušení  obsahuje  ovladaè  pro  obsluhu alarmu a periodického èítání
hodin reálného èasu.

    Jde  o hardwarové pøerušení (IRQ 8) aktivované CMOS èasovaèem 1024 krát
za sekundu.

Pozn.: Pøerušení se pouívá pouze pro poèítaèe AT a XT-286. Hodiny reálného
       èasu  konvertabilního  PC generují pøerušení INT 02H (nemaskovatelné
       pøerušení).

       Toto  pøerušení  provádí  dvì  sluby.  První  slubou je periodické
       pøerušení,  pokud  je generována èasová prodleva (viz INT 15H/sluba
       83H  -  událost  èekání  - a sluba 86H - èekání). Druhou slubou je
       aktivace  pøerušení  alarmu.  Pokud  CMOS  alarm se shoduje s bìnım
       èasem CMOS, je vyvoláno pøerušení INT 4AH (uivatelskı alarm).




 I N T    7 1 H (INT 113; 0:01C4H) - øadiè pøerušení - IRQ 9/2



 I N T    7 2 H (INT 114; 0:01C8H) - øadiè pøerušení



 I N T    7 3 H (INT 115; 0:01CCH) - øadiè pøerušení



 I N T    7 4 H (INT 116; 0:01D0H) - øadiè pøerušení



 I N T    7 5 H (INT 117; 0:01D4H) - koprocesor



 I N T    7 6 H (INT 118; 0:01D8H)  - pøerušení od øadièe pevného disku AT

    Øadiè  pevného  disku  AT  generuje  po  kadé  operaci  (ètení, zápis,
vystavení,  atd.)  pøerušení  úrovnì  14  (IRQ  14). IRQ 14 je nastaveno na
vektor  pøerušení  INT  76H,  pro které je akèní pøíznakovı bit nastaven na
adrese 0:048EH.


 I N T    7 7 H (INT 119; 0:01DCH) - øadiè pøerušení



 I N T    7 8 H (INT 120; 0:01E0H) - nepouito



 I N T    7 9 H (INT 121; 0:01E4H) - nepouito



 I N T    7 A H (INT 122; 0:01E8H) - nepouito



 I N T    7 B H (INT 123; 0:01ECH) - nepouito



 I N T    7 C H (INT 124; 0:01F0H) - nepouito



 I N T    7 D H (INT 125; 0:01F4H) - nepouito



 I N T    7 E H (INT 126; 0:01F8H) - nepouito



 I N T    7 F H (INT 127; 0:01FCH) - nepouito




 I N T    8 0 H (INT 128; 0:0200H)
  a
 I N T    F 0 H (INT 240; 0:03C0H) - rezervováno BASIC



 I N T    F 1 H (INT 241; 0:03C4H)
  a
 I N T    F F H (INT 255; 0:03FCH) - nepouito
