<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=windows-1250">
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title>6. Sedmikráska ve smyèce</title>
</head>

<body bgcolor="#FFFFFF" text="#000000">

<h1 align="left"><font size="3" face="Arial">6. Sedmikráska ve
smyèce</font></h1>

<p align="left"><font size="2" face="Arial">V dnešní lekci si
vysvìtlíme ponìkud nároènìjší záleitost - smyèky. Ale
nejdøíve zadání úkolu. Naším pøáním je vygenerovat
následující kvìt sedmikrásky.</font></p>

<p align="left"><font size="2" face="Arial"><img
src="../img/Tutorial6_1.gif" width="256" height="256"></font></p>

<p align="left"><font size="2" face="Arial">Lístek kvìtu
vytvoøíme filtrem Droplet (kapka) a støed filtrem Round
(koleèko). Nejjednodušší by zøejmì bylo pouít
nìkolikrát filtr pro rotaci Rotate a lístky poté spojit.
Nebo, pokud by byl kvìt symetrickı, vygenerovat èást a zbytek
zrcadlit. Ale co kdy má bıt poèet lístkù promìnlivı?
Nebo co kdy kvìt není symetrickı? V takovém pøípadì je
èas na PROGRAMOVOU SMYÈKU!</font></p>

<p align="left"><font size="2" face="Arial">Nejdøíve popis
principu smyèky. Pouiji zjednodušenı obrázek z helpu. V
helpu si mùete o smyèce pøeèíst další podrobnosti.</font></p>

<p align="left"><font size="2" face="Arial"><img
src="../img/FLoopBegin2.gif" width="525" height="331"></font></p>

<p align="left"><font size="2" face="Arial">Smyèka zaèíná na
levé stranì filtrem LoopBegin (ze skupiny Podpora). Jeho vstup
Source urèuje vıchozí pozadí, na které se grafika uvnitø
smyèky vykresluje. Vıstup filtru LoopBegin vstupuje do filtrù
pro vykreslování obrazu. V tomto pøípadì je ve vykreslovací
vìtvi jedinı filtr, Star. Vykreslovací vìtev uvnitø smyèky
je opakovanì volána pøi kadém iteraèním kroku smyèkou.
Úkolem vykreslovací vìtve je pøidat pøi kadém prùchodu
do obrazu svou èást grafiky. Aby se však obraz nevykresloval
stále stejnım zpùsobem, potøebuje vykreslovací smyèka
znát, ve kterém iteraèním kroku se nachází. To zajišuje
filtr LoopIndex (ze skupiny Podpora), jeho vstup je napojen na
vıstup filtru LoopBegin. Na vıstupu filtru LoopIndex se bìhem
iterací postupnì zvyšuje hodnota od 0 po 1 a pøedstavuje
relativní fázi iteraèního kroku. To znamená - je-li smyèka
nastavena na 5 krokù (poèet prùchodù smyèkou se nastavuje
parametrem Loops filtru LoopBegin), navrací filtr LoopIndex na
svém vıstupu hodnoty 0, 0.25, 0.5, 0.75 a 1. Vıstupem filtru
LoopIndex se zde øídí otáèení a jas hvìzdy. Renderovací
smyèka je zakonèena filtrem LoopEnd (skupina Podpora). Filtr
LoopEnd na svém vstupu získává obraz od vykreslovací vìtve
filtrù uvnitø smyèky. Vıslednı sestavenı obraz poskytuje na
svém vıstupu. Souèasnì je vıstup filtru LoopEnd veden zpìt
na zaèátek smyèky do vstupu LoopEnd filtru LoopBegin.</font></p>

<p align="left"><font size="2" face="Arial">A zde je sestavenı
generátor kvìtu (obrázek je rozdìlen na 2 èásti, levou a
pravou). Podrobnìjší popis a rozbor bude následovat.</font></p>

<p align="left"><font size="2" face="Arial"><img
src="../img/Tutorial6_2.gif" width="735" height="399"></font></p>

<p align="left"><font size="2" face="Arial"><img
src="../img/Tutorial6_3.gif" width="716" height="224"></font></p>

<p align="left"><font size="2" face="Arial">Smyèka je zahájena
na levé stranì filtrem LoopBegin (skupina Podpora) a zakonèena
na pravé stranì filtrem LoopEnd (skupina Podpora). Z obrázkù
to není pøíliš patrné, ale vıstup filtru LoopEnd je veden
zpìt na vstup LoopEnd filtru LoopBegin. Za filtrem LoopBegin
následuje filtr Droplet (skupina Vıplnì), kterı generuje
jeden lístek kvìtu. U filtru Droplet zmìòte barvu Color i
Background na bílou, Width na 10, Height na 20 a ShiftY na -25.
Vıstup Droplet smìøuje do vstupu Source filtru Rotate (skupina
Transformace). Do vstupu Angle filtru Rotate je napojen vıstup
filtru LoopIndex (ze skupiny Podpora), jeho vstup je napojen na
vıstup filtru LoopBegin. Filtry LoopIndex a Rotate zajišují
otáèení lístku kvìtu, v kadém iteraèním kroku jinak.</font></p>

<p align="left"><font size="2" face="Arial">Všimnìte si ve
vısledném obazu, e kvìt má jenom 9 lístkù, pøitom poèet
iteraèních krokù (vstup Loops filtru LoopBegin) je nastaven na
10. Je to proto, e první iteraèní krok navrací ve filtru
LoopIndex vıstupní hodnotu 0 a poslední iteraèní krok
hodnotu 1. U filtru Rotate pøedstavuje rotace 0 úhel otoèení
0° a rotace 1 je úhel otoèení 360°. Díky tomu se první a
poslední lístek pøekrıvají pøes sebe a je vidìt jen jeden.
V nìkterıch pøípadech by to mohlo vadit - v tom pøípadì by
bylo nutné zmenšit vıstupní rozsah hodnot LoopIndex
vynásobením menší hodnotou.</font></p>

<p align="left"><font size="2" face="Arial">Po otoèení lístku
na správnou pozici se lístek pøidá k sestavovanému obrazu
pomocí filtru Blend. Okolí lístku je prùhledné (je to
znázornìno ètvereèkovanou sítí) a proto je lístek s
obrazem slouèen bez nutnosti pouívat jiné blendovací módy.
Po slouèení obrazu je obraz veden do vstupu filtru LoopEnd,
kterı smyèku zakonèí. Filtr LoopEnd funguje jako akumulátor
obrazu. Po kadém prùchodu smyèkou si uchová sestavenı
obraz a vede ho zpìt do filtru LoopBegin na zaèátku smyèky
jako podkladovı obraz pro další iteraèní krok.</font></p>

<p align="left"><font size="2" face="Arial">Obraz je dále veden
na vstup Background filtru Round (skupina Vıplnì), kterı do
obrazu pøidá koleèko støedu kvìtu. Vstup Color kvìtu je
nastaven na lutou barvu, parametry Width a Height na 10
(rozmìr koleèka) a parametr Bevel na 20 (zjemnìní hrany).
Vıstup z filtru Round je veden do vstupu vıstupního filtru
Out.</font></p>

<p align="left"><font size="2" face="Arial">Moná by vás mohlo
napadnout - a co takhle uvnitø smyèky rotovat ne kvìt, ale
podkladovı obraz pod kvìtem? Bohuel transformace
podkladového obrazu uvnitø smyèky nejsou z principu moné.
Smyèka bìhem iterací pracuje vdy pouze s jedním
renderovanım bodem, kterı opakovanì støádá na vıstupu a
vrací zpìt na vstup. Není moné aby pøi vnitøních
operacích pøešla na jinou souøadnici bodu. Proto souøadnice
obrazu na vıstupu se musí shodovat se souøadnicemi obrazu na
vstupu. Je-li potøeba obraz transformovat (tj.posouvat,
otáèet), je nutné takové operace provádìt s pøidávanım
obrazem a ne s podkladem.</font></p>

<p align="left"><a href="..\Index.htm"><font size="2"
face="Arial"><img src="..\img\Book.jpg" border="0" width="16"
height="16"></font></a><font size="2" face="Arial"> </font><a
href="..\Index.htm"><font size="2" face="Arial">Témata
nápovìdy</font></a><font size="2" face="Arial"> </font><a
href="Tutorials.htm"><font size="2" face="Arial"><img
src="..\img\Book.jpg" border="0" width="16" height="16"></font></a><font
size="2" face="Arial"> </font><a href="Tutorials.htm"><font
size="2" face="Arial">Tutoriály</font></a></p>
</body>
</html>
